require=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({"/home/ubuntu/staging/apps/build/js/level_base.js":[function(e,t,n){"use strict";n.call=function(e){return{test:function(t){return"procedures_callnoreturn"==t.type&&t.getTitleValue("NAME").toLowerCase()==e.toLowerCase()},type:"procedures_callnoreturn",titles:{NAME:e}}},n.callWithArg=function(e,t){return{test:function(t){return"procedures_callnoreturn"==t.type&&t.getTitleValue("NAME").toLowerCase()==e.toLowerCase()},type:"procedures_callnoreturn",extra:'<mutation name="'+e+'"><arg name="'+t+'"></arg></mutation>'}},n.define=function(e){return{test:function(t){return"procedures_defnoreturn"==t.type&&t.getTitleValue("NAME").toLowerCase()==e.toLowerCase()},type:"procedures_defnoreturn",titles:{NAME:e}}}},{}],"/home/ubuntu/staging/apps/node_modules/canvg/canvg.js":[function(e,t){!function(n,i){"use strict";"undefined"!=typeof define&&define.amd?define("canvgModule",["rgbcolor","stackblur"],i):"undefined"!=typeof t&&t.exports&&(t.exports=i(e("rgbcolor"),e("stackblur"))),n.canvg=i(n.RGBColor,n.stackBlur)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=[0,0,0],n=function(n,i){var r=e.match(n);null!=r&&(t[i]+=r.length,e=e.replace(n," "))};return e=e.replace(/:not\(([^\)]*)\)/g,"     $1 "),e=e.replace(/{[\s\S]*/gm," "),n(a,1),n(l,0),n(u,1),n(c,2),n(p,1),n(h,1),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),n(d,2),t.join("")}function r(r){var s={opts:r};s.FRAMERATE=30,s.MAX_VIRTUAL_PIXELS=3e4,s.log=function(){},1==s.opts.log&&"undefined"!=typeof console&&(s.log=function(e){console.log(e)}),s.init=function(e){var t=0;s.UniqueId=function(){return t++,"canvg"+t},s.Definitions={},s.Styles={},s.StylesSpecificity={},s.Animations=[],s.Images=[],s.ctx=e,s.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(e,t){this.viewPorts.push({width:e,height:t})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(e){return null!=e&&"number"==typeof e?e:"x"==e?this.width():"y"==e?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},s.init(),s.ImagesLoaded=function(){for(var e=0;e<s.Images.length;e++)if(!s.Images[e].loaded)return!1;return!0},s.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},s.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")},s.ajax=function(e){var t;return t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t?(t.open("GET",e,!1),t.send(null),t.responseText):null},s.parseXml=function(e){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var t=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,t.loadXml(e,n),t}if(window.DOMParser){var i=new DOMParser;return i.parseFromString(e,"text/xml")}e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t},s.Property=function(e,t){this.name=e,this.value=t},s.Property.prototype.getValue=function(){return this.value},s.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},s.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var e=parseFloat(this.value);return(this.value+"").match(/%$/)&&(e/=100),e},s.Property.prototype.valueOrDefault=function(e){return this.hasValue()?this.value:e},s.Property.prototype.numValueOrDefault=function(e){return this.hasValue()?this.numValue():e},s.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new e(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new s.Property(this.name,n)},s.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),s.Definitions[e]},s.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},s.Property.prototype.getFillStyleDefinition=function(e,t){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(s.ctx,e,t);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var i=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),i.hasValue()&&(n.attribute("patternTransform",!0).value=i.value)}return n.createPattern(s.ctx,e)}return null},s.Property.prototype.getDPI=function(){return 96},s.Property.prototype.getEM=function(e){var t=12,n=new s.Property("fontSize",s.Font.Parse(s.ctx.font).fontSize);return n.hasValue()&&(t=n.toPixels(e)),t},s.Property.prototype.getUnits=function(){var e=this.value+"";return e.replace(/[0-9\.\-]/g,"")},s.Property.prototype.toPixels=function(e,t){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/em$/))return this.numValue()*this.getEM(e);if(n.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(e);if(n.match(/%$/))return this.numValue()*s.ViewPort.ComputeSize(e);var i=this.numValue();return t&&1>i?i*s.ViewPort.ComputeSize(e):i},s.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/s$/)?1e3*this.numValue():(e.match(/ms$/),this.numValue())},s.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/deg$/)?this.numValue()*(Math.PI/180):e.match(/grad$/)?this.numValue()*(Math.PI/200):e.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var a={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return s.Property.prototype.toTextBaseline=function(){return this.hasValue()?a[this.value]:null},s.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,t,n,i,r,o){var a=null!=o?this.Parse(o):this.CreateFont("","","","","",s.ctx.font);return{fontFamily:r||a.fontFamily,fontSize:i||a.fontSize,fontStyle:e||a.fontStyle,fontWeight:n||a.fontWeight,fontVariant:t||a.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(t){for(var n={},i=s.trim(s.compressSpaces(t||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",a=0;a<i.length;a++)r.fontStyle||-1==e.Styles.indexOf(i[a])?r.fontVariant||-1==e.Variants.indexOf(i[a])?r.fontWeight||-1==e.Weights.indexOf(i[a])?r.fontSize?"inherit"!=i[a]&&(o+=i[a]):("inherit"!=i[a]&&(n.fontSize=i[a].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=i[a]&&(n.fontWeight=i[a]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=i[a]&&(n.fontVariant=i[a]),r.fontStyle=r.fontVariant=!0):("inherit"!=i[a]&&(n.fontStyle=i[a]),r.fontStyle=!0);return""!=o&&(n.fontFamily=o),n}},s.ToNumberArray=function(e){for(var t=s.trim(s.compressSpaces((e||"").replace(/,/g," "))).split(" "),n=0;n<t.length;n++)t[n]=parseFloat(t[n]);return t},s.Point=function(e,t){this.x=e,this.y=t},s.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)},s.Point.prototype.applyTransform=function(e){var t=this.x*e[0]+this.y*e[2]+e[4],n=this.x*e[1]+this.y*e[3]+e[5];this.x=t,this.y=n},s.CreatePoint=function(e){var t=s.ToNumberArray(e);return new s.Point(t[0],t[1])},s.CreatePath=function(e){for(var t=s.ToNumberArray(e),n=[],i=0;i<t.length;i+=2)n.push(new s.Point(t[i],t[i+1]));return n},s.BoundingBox=function(e,t,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},this.addX=function(e){this.addPoint(e,null)},this.addY=function(e){this.addPoint(null,e)},this.addBoundingBox=function(e){this.addPoint(e.x1,e.y1),this.addPoint(e.x2,e.y2)},this.addQuadraticCurve=function(e,t,n,i,r,o){var s=e+2/3*(n-e),a=t+2/3*(i-t),l=s+1/3*(r-e),u=a+1/3*(o-t);this.addBezierCurve(e,t,s,l,a,u,r,o)},this.addBezierCurve=function(e,t,n,r,o,s,a,l){var u=[e,t],c=[n,r],p=[o,s],h=[a,l];for(this.addPoint(u[0],u[1]),this.addPoint(h[0],h[1]),i=0;1>=i;i++){var d=function(e){return Math.pow(1-e,3)*u[i]+3*Math.pow(1-e,2)*e*c[i]+3*(1-e)*Math.pow(e,2)*p[i]+Math.pow(e,3)*h[i]},f=6*u[i]-12*c[i]+6*p[i],m=-3*u[i]+9*c[i]-9*p[i]+3*h[i],g=3*c[i]-3*u[i];if(0!=m){var b=Math.pow(f,2)-4*g*m;if(!(0>b)){var v=(-f+Math.sqrt(b))/(2*m);v>0&&1>v&&(0==i&&this.addX(d(v)),1==i&&this.addY(d(v)));var y=(-f-Math.sqrt(b))/(2*m);y>0&&1>y&&(0==i&&this.addX(d(y)),1==i&&this.addY(d(y)))}}else{if(0==f)continue;var _=-g/f;_>0&&1>_&&(0==i&&this.addX(d(_)),1==i&&this.addY(d(_)))}}},this.isPointInBox=function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2},this.addPoint(e,t),this.addPoint(n,r)},s.Transform=function(e){var t=this;this.Type={},this.Type.translate=function(e){this.p=s.CreatePoint(e),this.apply=function(e){e.translate(this.p.x||0,this.p.y||0)},this.unapply=function(e){e.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(e){e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var t=s.ToNumberArray(e);this.angle=new s.Property("angle",t[0]),this.cx=t[1]||0,this.cy=t[2]||0,this.apply=function(e){e.translate(this.cx,this.cy),e.rotate(this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.unapply=function(e){e.translate(this.cx,this.cy),e.rotate(-1*this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.applyToPoint=function(e){var t=this.angle.toRadians();e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),e.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]),e.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=s.CreatePoint(e),this.apply=function(e){e.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(e){e.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(e){e.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=s.ToNumberArray(e),this.apply=function(e){e.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(e){var t=this.m[0],n=this.m[2],i=this.m[4],r=this.m[1],o=this.m[3],s=this.m[5],a=0,l=0,u=1,c=1/(t*(o*u-s*l)-n*(r*u-s*a)+i*(r*l-o*a));e.transform(c*(o*u-s*l),c*(s*a-r*u),c*(i*l-n*u),c*(t*u-i*a),c*(n*s-i*o),c*(i*r-t*s))},this.applyToPoint=function(e){e.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=t.Type.matrix,this.base(e),this.angle=new s.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(e){this.base=t.Type.SkewBase,this.base(e),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(e){this.base=t.Type.SkewBase,this.base(e),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(e)},this.unapply=function(e){for(var t=this.transforms.length-1;t>=0;t--)this.transforms[t].unapply(e)},this.applyToPoint=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(e)};for(var n=s.trim(s.compressSpaces(e)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<n.length;i++){var r=s.trim(n[i].split("(")[0]),o=n[i].split("(")[1].replace(")",""),a=this.Type[r];if("undefined"!=typeof a){var l=new a(o);l.type=r,this.transforms.push(l)}}},s.AspectRatio=function(e,t,n,i,r,o,a,l,u,c){t=s.compressSpaces(t),t=t.replace(/^defer\s/,"");var p=t.split(" ")[0]||"xMidYMid",h=t.split(" ")[1]||"meet",d=n/i,f=r/o,m=Math.min(d,f),g=Math.max(d,f);"meet"==h&&(i*=m,o*=m),"slice"==h&&(i*=g,o*=g),u=new s.Property("refX",u),c=new s.Property("refY",c),u.hasValue()&&c.hasValue()?e.translate(-m*u.toPixels("x"),-m*c.toPixels("y")):(p.match(/^xMid/)&&("meet"==h&&m==f||"slice"==h&&g==f)&&e.translate(n/2-i/2,0),p.match(/YMid$/)&&("meet"==h&&m==d||"slice"==h&&g==d)&&e.translate(0,r/2-o/2),p.match(/^xMax/)&&("meet"==h&&m==f||"slice"==h&&g==f)&&e.translate(n-i,0),p.match(/YMax$/)&&("meet"==h&&m==d||"slice"==h&&g==d)&&e.translate(0,r-o)),"none"==p?e.scale(d,f):"meet"==h?e.scale(m,m):"slice"==h&&e.scale(g,g),e.translate(null==a?0:-a,null==l?0:-l)},s.Element={},s.EmptyProperty=new s.Property("EMPTY",""),s.Element.ElementBase=function(e){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(e,t){var n=this.attributes[e];return null!=n?n:(1==t&&(n=new s.Property(e,""),this.attributes[e]=n),n||s.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if("href"==e||e.match(/:href$/))return this.attributes[e];return s.EmptyProperty},this.style=function(e,t,n){var i=this.styles[e];if(null!=i)return i;var r=this.attribute(e);if(null!=r&&r.hasValue())return this.styles[e]=r,r;if(1!=n){var o=this.parent;if(null!=o){var a=o.style(e);if(null!=a&&a.hasValue())return a}}return 1==t&&(i=new s.Property(e,""),this.styles[e]=i),i||s.EmptyProperty},this.render=function(e){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(e.save(),this.style("mask").hasValue()){var t=this.style("mask").getDefinition();null!=t&&t.apply(e,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(e,this)}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(e){for(var t=0;t<this.children.length;t++)this.children[t].render(e)},this.addChild=function(e,t){var n=e;t&&(n=s.CreateElement(e)),n.parent=this,"title"!=n.type&&this.children.push(n)},this.addStylesFromStyleDefinition=function(){for(var t in s.Styles)if("@"!=t[0]&&o(e,t)){var n=s.Styles[t],i=s.StylesSpecificity[t];if(null!=n)for(var r in n){var a=this.stylesSpecificity[r];"undefined"==typeof a&&(a="000"),i>a&&(this.styles[r]=n[r],this.stylesSpecificity[r]=i)}}};var t=new RegExp("^[A-Z-]+$"),n=function(e){return t.test(e)?e.toLowerCase():e};if(null!=e&&1==e.nodeType){for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i],a=n(r.nodeName);this.attributes[a]=new s.Property(a,r.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var l=this.attribute("style").value.split(";"),i=0;i<l.length;i++)if(""!=s.trim(l[i])){var u=l[i].split(":"),c=s.trim(u[0]),p=s.trim(u[1]);this.styles[c]=new s.Property(c,p)}this.attribute("id").hasValue()&&null==s.Definitions[this.attribute("id").value]&&(s.Definitions[this.attribute("id").value]=this);for(var i=0;i<e.childNodes.length;i++){var h=e.childNodes[i];if(1==h.nodeType&&this.addChild(h,!0),this.captureTextNodes&&(3==h.nodeType||4==h.nodeType)){var d=h.value||h.text||h.textContent||"";""!=s.compressSpaces(d)&&this.addChild(new s.Element.tspan(h),!1)}}}},s.Element.RenderedElementBase=function(e){this.base=s.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var t=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=t&&(e.fillStyle=t)}else if(this.style("fill").hasValue()){var n=this.style("fill");"currentColor"==n.value&&(n.value=this.style("color").value),"inherit"!=n.value&&(e.fillStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}if(this.style("fill-opacity").hasValue()){var n=new s.Property("fill",e.fillStyle);n=n.addOpacity(this.style("fill-opacity")),e.fillStyle=n.value}if(this.style("stroke").isUrlDefinition()){var t=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=t&&(e.strokeStyle=t)}else if(this.style("stroke").hasValue()){var i=this.style("stroke");"currentColor"==i.value&&(i.value=this.style("color").value),"inherit"!=i.value&&(e.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value)}if(this.style("stroke-opacity").hasValue()){var i=new s.Property("stroke",e.strokeStyle);i=i.addOpacity(this.style("stroke-opacity")),e.strokeStyle=i.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();e.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var o=s.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof e.setLineDash?e.setLineDash(o):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=o:"undefined"==typeof e.mozDash||1==o.length&&0==o[0]||(e.mozDash=o);var a=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=a:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=a:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=a)}if("undefined"!=typeof e.font&&(e.font=s.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var l=new s.Transform(this.style("transform",!1,!0).value);l.apply(e)}if(this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},s.Element.RenderedElementBase.prototype=new s.Element.ElementBase,s.Element.PathElementBase=function(e){this.base=s.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new s.BoundingBox},this.renderChildren=function(e){this.path(e),s.Mouse.checkPath(this,e),""!=e.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?e.fill(this.style("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var t=this.getMarkers();if(null!=t){if(this.style("marker-start").isUrlDefinition()){var n=this.style("marker-start").getDefinition();n.render(e,t[0][0],t[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),i=1;i<t.length-1;i++)n.render(e,t[i][0],t[i][1]);if(this.style("marker-end").isUrlDefinition()){var n=this.style("marker-end").getDefinition();n.render(e,t[t.length-1][0],t[t.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},s.Element.PathElementBase.prototype=new s.Element.RenderedElementBase,s.Element.svg=function(e){this.base=s.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),s.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,"undefined"!=typeof e.font&&"undefined"!=typeof window.getComputedStyle&&(e.font=window.getComputedStyle(e.canvas).getPropertyValue("font")),this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var t=s.ViewPort.width(),n=s.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){t=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");var i=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(i=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(e.beginPath(),e.moveTo(i,r),e.lineTo(t,r),e.lineTo(t,n),e.lineTo(i,n),e.closePath(),e.clip())}if(s.ViewPort.SetCurrent(t,n),this.attribute("viewBox").hasValue()){var o=s.ToNumberArray(this.attribute("viewBox").value),a=o[0],l=o[1];t=o[2],n=o[3],s.AspectRatio(e,this.attribute("preserveAspectRatio").value,s.ViewPort.width(),t,s.ViewPort.height(),n,a,l,this.attribute("refX").value,this.attribute("refY").value),s.ViewPort.RemoveCurrent(),s.ViewPort.SetCurrent(o[2],o[3])}}},s.Element.svg.prototype=new s.Element.RenderedElementBase,s.Element.rect=function(e){this.base=s.Element.PathElementBase,this.base(e),this.path=function(e){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(a=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=a),o=Math.min(o,i/2),a=Math.min(a,r/2),null!=e&&(e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+a),e.lineTo(t+i,n+r-a),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+o,n),e.closePath()),new s.BoundingBox(t,n,t+i,n+r)}},s.Element.rect.prototype=new s.Element.PathElementBase,s.Element.circle=function(e){this.base=s.Element.PathElementBase,this.base(e),this.path=function(e){var t=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(t,n,i,0,2*Math.PI,!0),e.closePath()),new s.BoundingBox(t-i,n-i,t+i,n+i)}},s.Element.circle.prototype=new s.Element.PathElementBase,s.Element.ellipse=function(e){this.base=s.Element.PathElementBase,this.base(e),this.path=function(e){var t=4*((Math.sqrt(2)-1)/3),n=this.attribute("rx").toPixels("x"),i=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(r,o-i),e.bezierCurveTo(r+t*n,o-i,r+n,o-t*i,r+n,o),e.bezierCurveTo(r+n,o+t*i,r+t*n,o+i,r,o+i),e.bezierCurveTo(r-t*n,o+i,r-n,o+t*i,r-n,o),e.bezierCurveTo(r-n,o-t*i,r-t*n,o-i,r,o-i),e.closePath()),new s.BoundingBox(r-n,o-i,r+n,o+i)}},s.Element.ellipse.prototype=new s.Element.PathElementBase,s.Element.line=function(e){this.base=s.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new s.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new s.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var t=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y)),new s.BoundingBox(t[0].x,t[0].y,t[1].x,t[1].y)},this.getMarkers=function(){var e=this.getPoints(),t=e[0].angleTo(e[1]);return[[e[0],t],[e[1],t]]}},s.Element.line.prototype=new s.Element.PathElementBase,s.Element.polyline=function(e){this.base=s.Element.PathElementBase,this.base(e),this.points=s.CreatePath(this.attribute("points").value),this.path=function(e){var t=new s.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)t.addPoint(this.points[n].x,this.points[n].y),null!=e&&e.lineTo(this.points[n].x,this.points[n].y);return t},this.getMarkers=function(){for(var e=[],t=0;t<this.points.length-1;t++)e.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return e.length>0&&e.push([this.points[this.points.length-1],e[e.length-1][1]]),e}},s.Element.polyline.prototype=new s.Element.PathElementBase,s.Element.polygon=function(e){this.base=s.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(e){var t=this.basePath(e);return null!=e&&(e.lineTo(this.points[0].x,this.points[0].y),e.closePath()),t}},s.Element.polygon.prototype=new s.Element.polyline,s.Element.path=function(e){this.base=s.Element.PathElementBase,this.base(e);var t=this.attribute("d").value;t=t.replace(/,/gm," ");for(var n=0;2>n;n++)t=t.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");t=t.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2");for(var n=0;2>n;n++)t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=s.compressSpaces(t),t=s.trim(t),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new s.Point(0,0),this.control=new s.Point(0,0),this.current=new s.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new s.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var e=this.getPoint();return this.control=e,e},this.getAsCurrentPoint=function(){var e=this.getPoint();return this.current=e,e},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var e=new s.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e},this.makeAbsolute=function(e){return this.isRelativeCommand()&&(e.x+=this.current.x,e.y+=this.current.y),e},this.addMarker=function(e,t,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(e,null==t?null:t.angleTo(e))},this.addMarkerAngle=function(e,t){this.points.push(e),this.angles.push(t)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++)if(null==this.angles[e])for(var t=e+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[e]=this.angles[t];break}return this.angles}}(t),this.path=function(e){var t=this.PathParser;t.reset();var n=new s.BoundingBox;for(null!=e&&e.beginPath();!t.isEnd();)switch(t.nextCommand(),t.command){case"M":case"m":var i=t.getAsCurrentPoint();for(t.addMarker(i),n.addPoint(i.x,i.y),null!=e&&e.moveTo(i.x,i.y),t.start=t.current;!t.isCommandOrEnd();){var i=t.getAsCurrentPoint();t.addMarker(i,t.start),n.addPoint(i.x,i.y),null!=e&&e.lineTo(i.x,i.y)}break;case"L":case"l":for(;!t.isCommandOrEnd();){var r=t.current,i=t.getAsCurrentPoint();t.addMarker(i,r),n.addPoint(i.x,i.y),null!=e&&e.lineTo(i.x,i.y)}break;case"H":case"h":for(;!t.isCommandOrEnd();){var o=new s.Point((t.isRelativeCommand()?t.current.x:0)+t.getScalar(),t.current.y);t.addMarker(o,t.current),t.current=o,n.addPoint(t.current.x,t.current.y),null!=e&&e.lineTo(t.current.x,t.current.y)}break;case"V":case"v":for(;!t.isCommandOrEnd();){var o=new s.Point(t.current.x,(t.isRelativeCommand()?t.current.y:0)+t.getScalar());t.addMarker(o,t.current),t.current=o,n.addPoint(t.current.x,t.current.y),null!=e&&e.lineTo(t.current.x,t.current.y)}break;case"C":case"c":for(;!t.isCommandOrEnd();){var a=t.current,l=t.getPoint(),u=t.getAsControlPoint(),c=t.getAsCurrentPoint();t.addMarker(c,u,l),n.addBezierCurve(a.x,a.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!t.isCommandOrEnd();){var a=t.current,l=t.getReflectedControlPoint(),u=t.getAsControlPoint(),c=t.getAsCurrentPoint();t.addMarker(c,u,l),n.addBezierCurve(a.x,a.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!t.isCommandOrEnd();){var a=t.current,u=t.getAsControlPoint(),c=t.getAsCurrentPoint();t.addMarker(c,u,u),n.addQuadraticCurve(a.x,a.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!t.isCommandOrEnd();){var a=t.current,u=t.getReflectedControlPoint();t.control=u;var c=t.getAsCurrentPoint();t.addMarker(c,u,u),n.addQuadraticCurve(a.x,a.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!t.isCommandOrEnd();){var a=t.current,p=t.getScalar(),h=t.getScalar(),d=t.getScalar()*(Math.PI/180),f=t.getScalar(),m=t.getScalar(),c=t.getAsCurrentPoint(),g=new s.Point(Math.cos(d)*(a.x-c.x)/2+Math.sin(d)*(a.y-c.y)/2,-Math.sin(d)*(a.x-c.x)/2+Math.cos(d)*(a.y-c.y)/2),b=Math.pow(g.x,2)/Math.pow(p,2)+Math.pow(g.y,2)/Math.pow(h,2);b>1&&(p*=Math.sqrt(b),h*=Math.sqrt(b));var v=(f==m?-1:1)*Math.sqrt((Math.pow(p,2)*Math.pow(h,2)-Math.pow(p,2)*Math.pow(g.y,2)-Math.pow(h,2)*Math.pow(g.x,2))/(Math.pow(p,2)*Math.pow(g.y,2)+Math.pow(h,2)*Math.pow(g.x,2)));isNaN(v)&&(v=0);var y=new s.Point(v*p*g.y/h,v*-h*g.x/p),_=new s.Point((a.x+c.x)/2+Math.cos(d)*y.x-Math.sin(d)*y.y,(a.y+c.y)/2+Math.sin(d)*y.x+Math.cos(d)*y.y),w=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},E=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(w(e)*w(t))},x=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(E(e,t))},k=x([1,0],[(g.x-y.x)/p,(g.y-y.y)/h]),T=[(g.x-y.x)/p,(g.y-y.y)/h],S=[(-g.x-y.x)/p,(-g.y-y.y)/h],C=x(T,S);E(T,S)<=-1&&(C=Math.PI),E(T,S)>=1&&(C=0);var B=1-m?1:-1,R=k+B*(C/2),P=new s.Point(_.x+p*Math.cos(R),_.y+h*Math.sin(R));if(t.addMarkerAngle(P,R-B*Math.PI/2),t.addMarkerAngle(c,R-B*Math.PI),n.addPoint(c.x,c.y),null!=e){var E=p>h?p:h,j=p>h?1:p/h,I=p>h?h/p:1;e.translate(_.x,_.y),e.rotate(d),e.scale(j,I),e.arc(0,0,E,k,k+C,1-m),e.scale(1/j,1/I),e.rotate(-d),e.translate(-_.x,-_.y)}}break;case"Z":case"z":null!=e&&e.closePath(),t.current=t.start}return n},this.getMarkers=function(){for(var e=this.PathParser.getMarkerPoints(),t=this.PathParser.getMarkerAngles(),n=[],i=0;i<e.length;i++)n.push([e[i],t[i]]);return n}},s.Element.path.prototype=new s.Element.PathElementBase,s.Element.pattern=function(e){this.base=s.Element.ElementBase,this.base(e),this.createPattern=function(e){var t=this.attribute("width").toPixels("x",!0),n=this.attribute("height").toPixels("y",!0),i=new s.Element.svg;i.attributes.viewBox=new s.Property("viewBox",this.attribute("viewBox").value),i.attributes.width=new s.Property("width",t+"px"),i.attributes.height=new s.Property("height",n+"px"),i.attributes.transform=new s.Property("transform",this.attribute("patternTransform").value),i.children=this.children;var r=document.createElement("canvas");r.width=t,r.height=n;var o=r.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var a=-1;1>=a;a++)for(var l=-1;1>=l;l++)o.save(),i.attributes.x=new s.Property("x",a*r.width),i.attributes.y=new s.Property("y",l*r.height),i.render(o),o.restore();var u=e.createPattern(r,"repeat");return u}},s.Element.pattern.prototype=new s.Element.ElementBase,s.Element.marker=function(e){this.base=s.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,t,n){e.translate(t.x,t.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();
var i=new s.Element.svg;i.attributes.viewBox=new s.Property("viewBox",this.attribute("viewBox").value),i.attributes.refX=new s.Property("refX",this.attribute("refX").value),i.attributes.refY=new s.Property("refY",this.attribute("refY").value),i.attributes.width=new s.Property("width",this.attribute("markerWidth").value),i.attributes.height=new s.Property("height",this.attribute("markerHeight").value),i.attributes.fill=new s.Property("fill",this.attribute("fill").valueOrDefault("black")),i.attributes.stroke=new s.Property("stroke",this.attribute("stroke").valueOrDefault("none")),i.children=this.children,i.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-n),e.translate(-t.x,-t.y)}},s.Element.marker.prototype=new s.Element.ElementBase,s.Element.defs=function(e){this.base=s.Element.ElementBase,this.base(e),this.render=function(){}},s.Element.defs.prototype=new s.Element.ElementBase,s.Element.GradientBase=function(e){this.base=s.Element.ElementBase,this.base(e),this.stops=[];for(var t=0;t<this.children.length;t++){var n=this.children[t];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(e){for(var t=0;t<this.attributesToInherit.length;t++){var n=this.attributesToInherit[t];!this.attribute(n).hasValue()&&e.attribute(n).hasValue()&&(this.attribute(n,!0).value=e.attribute(n).value)}},this.createGradient=function(e,t,n){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var r=function(e){if(n.hasValue()){var t=new s.Property("color",e);return t.addOpacity(n).value}return e},o=this.getGradient(e,t);if(null==o)return r(i.stops[i.stops.length-1].color);for(var a=0;a<i.stops.length;a++)o.addColorStop(i.stops[a].offset,r(i.stops[a].color));if(this.attribute("gradientTransform").hasValue()){var l=s.ViewPort.viewPorts[0],u=new s.Element.rect;u.attributes.x=new s.Property("x",-s.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new s.Property("y",-s.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new s.Property("width",s.MAX_VIRTUAL_PIXELS),u.attributes.height=new s.Property("height",s.MAX_VIRTUAL_PIXELS);var c=new s.Element.g;c.attributes.transform=new s.Property("transform",this.attribute("gradientTransform").value),c.children=[u];var p=new s.Element.svg;p.attributes.x=new s.Property("x",0),p.attributes.y=new s.Property("y",0),p.attributes.width=new s.Property("width",l.width),p.attributes.height=new s.Property("height",l.height),p.children=[c];var h=document.createElement("canvas");h.width=l.width,h.height=l.height;var d=h.getContext("2d");return d.fillStyle=o,p.render(d),d.createPattern(h,"no-repeat")}return o}},s.Element.GradientBase.prototype=new s.Element.ElementBase,s.Element.linearGradient=function(e){this.base=s.Element.GradientBase,this.base(e),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(e,t){var n="objectBoundingBox"==this.gradientUnits()?t.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),o="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),s="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==o&&r==s?null:e.createLinearGradient(i,r,o,s)}},s.Element.linearGradient.prototype=new s.Element.GradientBase,s.Element.radialGradient=function(e){this.base=s.Element.GradientBase,this.base(e),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(e,t){var n=t.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=i,s=r;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var a="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return e.createRadialGradient(o,s,0,i,r,a)}},s.Element.radialGradient.prototype=new s.Element.GradientBase,s.Element.stop=function(e){this.base=s.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var t=this.style("stop-color",!0);""===t.value&&(t.value="#000"),this.style("stop-opacity").hasValue()&&(t=t.addOpacity(this.style("stop-opacity"))),this.color=t.value},s.Element.stop.prototype=new s.Element.ElementBase,s.Element.AnimateBase=function(e){this.base=s.Element.ElementBase,this.base(e),s.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var e=this.attribute("attributeType").value,t=this.attribute("attributeName").value;return"CSS"==e?this.parent.style(t,!0):this.parent.attribute(t,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(e){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+e;var t=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,t=!0}return t},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var t=e.progress*(this.values.value.length-1),n=Math.floor(t),i=Math.ceil(t);e.from=new s.Property("from",parseFloat(this.values.value[n])),e.to=new s.Property("to",parseFloat(this.values.value[i])),e.progress=(t-n)/(i-n)}else e.from=this.from,e.to=this.to;return e}},s.Element.AnimateBase.prototype=new s.Element.ElementBase,s.Element.animate=function(e){this.base=s.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),t=e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress;return t+this.initialUnits}},s.Element.animate.prototype=new s.Element.AnimateBase,s.Element.animateColor=function(t){this.base=s.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),n=new e(t.from.value),i=new e(t.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*t.progress,o=n.g+(i.g-n.g)*t.progress,s=n.b+(i.b-n.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(o,10)+","+parseInt(s,10)+")"}return this.attribute("from").value}},s.Element.animateColor.prototype=new s.Element.AnimateBase,s.Element.animateTransform=function(e){this.base=s.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),t=s.ToNumberArray(e.from.value),n=s.ToNumberArray(e.to.value),i="",r=0;r<t.length;r++)i+=t[r]+(n[r]-t[r])*e.progress+" ";return i}},s.Element.animateTransform.prototype=new s.Element.animate,s.Element.font=function(e){this.base=s.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var t=0;t<this.children.length;t++){var n=this.children[t];"font-face"==n.type?(this.fontFace=n,n.style("font-family").hasValue()&&(s.Definitions[n.style("font-family").value]=this)):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}},s.Element.font.prototype=new s.Element.ElementBase,s.Element.fontface=function(e){this.base=s.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},s.Element.fontface.prototype=new s.Element.ElementBase,s.Element.missingglyph=function(e){this.base=s.Element.path,this.base(e),this.horizAdvX=0},s.Element.missingglyph.prototype=new s.Element.path,s.Element.glyph=function(e){this.base=s.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},s.Element.glyph.prototype=new s.Element.path,s.Element.text=function(e){this.captureTextNodes=!0,this.base=s.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e);var t=this.style("dominant-baseline").toTextBaseline();null==t&&(t=this.style("alignment-baseline").toTextBaseline()),null!=t&&(e.textBaseline=t)},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),n=this.parent.style("font-size").numValueOrDefault(s.Font.Parse(s.ctx.font).fontSize);return new s.BoundingBox(e,t-n,e+Math.floor(2*n/3)*this.children[0].getText().length,t)},this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(e,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(e,this,this,t)},this.getAnchorDelta=function(e,t,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,o=n;o<t.children.length;o++){var s=t.children[o];if(o>n&&s.attribute("x").hasValue())break;r+=s.measureTextRecursive(e)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(e,t,n,i){var r=n.children[i];r.attribute("x").hasValue()?(r.x=r.attribute("x").toPixels("x")+t.getAnchorDelta(e,n,i),r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))):(r.attribute("dx").hasValue()&&(t.x+=r.attribute("dx").toPixels("x")),r.x=t.x),t.x=r.x+r.measureText(e),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(t.y+=r.attribute("dy").toPixels("y")),r.y=t.y),t.y=r.y,r.render(e);for(var i=0;i<r.children.length;i++)t.renderChild(e,t,r,i)}},s.Element.text.prototype=new s.Element.RenderedElementBase,s.Element.TextElementBase=function(e){this.base=s.Element.RenderedElementBase,this.base(e),this.getGlyph=function(e,t,n){var i=t[n],r=null;if(e.isArabic){var o="isolated";(0==n||" "==t[n-1])&&n<t.length-2&&" "!=t[n+1]&&(o="terminal"),n>0&&" "!=t[n-1]&&n<t.length-2&&" "!=t[n+1]&&(o="medial"),n>0&&" "!=t[n-1]&&(n==t.length-1||" "==t[n+1])&&(o="initial"),"undefined"!=typeof e.glyphs[i]&&(r=e.glyphs[i][o],null==r&&"glyph"==e.glyphs[i].type&&(r=e.glyphs[i]))}else r=e.glyphs[i];return null==r&&(r=e.missingGlyph),r},this.renderChildren=function(e){var t=this.parent.style("font-family").getDefinition();if(null==t)""!=e.fillStyle&&e.fillText(s.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(s.compressSpaces(this.getText()),this.x,this.y);else{var n=this.parent.style("font-size").numValueOrDefault(s.Font.Parse(s.ctx.font).fontSize),i=this.parent.style("font-style").valueOrDefault(s.Font.Parse(s.ctx.font).fontStyle),r=this.getText();t.isRTL&&(r=r.split("").reverse().join(""));for(var o=s.ToNumberArray(this.parent.attribute("dx").value),a=0;a<r.length;a++){var l=this.getGlyph(t,r,a),u=n/t.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(u,-u);var c=e.lineWidth;e.lineWidth=e.lineWidth*t.fontFace.unitsPerEm/n,"italic"==i&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==i&&e.transform(1,0,-.4,1,0,0),e.lineWidth=c,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=n*(l.horizAdvX||t.horizAdvX)/t.fontFace.unitsPerEm,"undefined"==typeof o[a]||isNaN(o[a])||(this.x+=o[a])}}},this.getText=function(){},this.measureTextRecursive=function(e){for(var t=this.measureText(e),n=0;n<this.children.length;n++)t+=this.children[n].measureTextRecursive(e);return t},this.measureText=function(e){var t=this.parent.style("font-family").getDefinition();if(null!=t){var n=this.parent.style("font-size").numValueOrDefault(s.Font.Parse(s.ctx.font).fontSize),i=0,r=this.getText();t.isRTL&&(r=r.split("").reverse().join(""));for(var o=s.ToNumberArray(this.parent.attribute("dx").value),a=0;a<r.length;a++){var l=this.getGlyph(t,r,a);i+=(l.horizAdvX||t.horizAdvX)*n/t.fontFace.unitsPerEm,"undefined"==typeof o[a]||isNaN(o[a])||(i+=o[a])}return i}var u=s.compressSpaces(this.getText());if(!e.measureText)return 10*u.length;e.save(),this.setContext(e);var c=e.measureText(u).width;return e.restore(),c}},s.Element.TextElementBase.prototype=new s.Element.RenderedElementBase,s.Element.tspan=function(e){this.captureTextNodes=!0,this.base=s.Element.TextElementBase,this.base(e),this.text=s.compressSpaces(e.value||e.text||e.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},s.Element.tspan.prototype=new s.Element.TextElementBase,s.Element.tref=function(e){this.base=s.Element.TextElementBase,this.base(e),this.getText=function(){var e=this.getHrefAttribute().getDefinition();return null!=e?e.children[0].getText():void 0}},s.Element.tref.prototype=new s.Element.TextElementBase,s.Element.a=function(e){this.base=s.Element.TextElementBase,this.base(e),this.hasText=e.childNodes.length>0;for(var t=0;t<e.childNodes.length;t++)3!=e.childNodes[t].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var t=new s.Property("fontSize",s.Font.Parse(s.ctx.font).fontSize);s.Mouse.checkBoundingBox(this,new s.BoundingBox(this.x,this.y-t.toPixels("y"),this.x+this.measureText(e),this.y))}else if(this.children.length>0){var n=new s.Element.g;n.children=this.children,n.parent=this,n.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){s.ctx.canvas.style.cursor="pointer"}},s.Element.a.prototype=new s.Element.TextElementBase,s.Element.image=function(e){this.base=s.Element.RenderedElementBase,this.base(e);var t=this.getHrefAttribute().value;if(""!=t){var n=t.match(/\.svg$/);if(s.Images.push(this),this.loaded=!1,n)this.img=s.ajax(t),this.loaded=!0;else{this.img=document.createElement("img"),1==s.opts.useCORS&&(this.img.crossOrigin="Anonymous");var i=this;this.img.onload=function(){i.loaded=!0},this.img.onerror=function(){s.log('ERROR: image "'+t+'" not found'),i.loaded=!0},this.img.src=t}this.renderChildren=function(e){var t=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=r&&0!=o&&(e.save(),n?e.drawSvg(this.img,t,i,r,o):(e.translate(t,i),s.AspectRatio(e,this.attribute("preserveAspectRatio").value,r,this.img.width,o,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");return new s.BoundingBox(e,t,e+n,t+i)}}},s.Element.image.prototype=new s.Element.RenderedElementBase,s.Element.g=function(e){this.base=s.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new s.BoundingBox,t=0;t<this.children.length;t++)e.addBoundingBox(this.children[t].getBoundingBox());return e}},s.Element.g.prototype=new s.Element.RenderedElementBase,s.Element.symbol=function(e){this.base=s.Element.RenderedElementBase,this.base(e),this.render=function(){}},s.Element.symbol.prototype=new s.Element.RenderedElementBase,s.Element.style=function(e){this.base=s.Element.ElementBase,this.base(e);for(var t="",i=0;i<e.childNodes.length;i++)t+=e.childNodes[i].data;t=t.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),t=s.compressSpaces(t);for(var r=t.split("}"),i=0;i<r.length;i++)if(""!=s.trim(r[i]))for(var o=r[i].split("{"),a=o[0].split(","),l=o[1].split(";"),u=0;u<a.length;u++){var c=s.trim(a[u]);if(""!=c){for(var p=s.Styles[c]||{},h=0;h<l.length;h++){var d=l[h].indexOf(":"),f=l[h].substr(0,d),m=l[h].substr(d+1,l[h].length-d);null!=f&&null!=m&&(p[s.trim(f)]=new s.Property(s.trim(f),s.trim(m)))}if(s.Styles[c]=p,s.StylesSpecificity[c]=n(c),"@font-face"==c)for(var g=p["font-family"].value.replace(/"/g,""),b=p.src.value.split(","),v=0;v<b.length;v++)if(b[v].indexOf('format("svg")')>0)for(var y=b[v].indexOf("url"),_=b[v].indexOf(")",y),w=b[v].substr(y+5,_-y-6),E=s.parseXml(s.ajax(w)),x=E.getElementsByTagName("font"),k=0;k<x.length;k++){var T=s.CreateElement(x[k]);s.Definitions[g]=T}}}},s.Element.style.prototype=new s.Element.ElementBase,s.Element.use=function(e){this.base=s.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e),this.attribute("x").hasValue()&&e.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&e.translate(0,this.attribute("y").toPixels("y"))};var t=this.getHrefAttribute().getDefinition();this.path=function(e){null!=t&&t.path(e)},this.getBoundingBox=function(){return null!=t?t.getBoundingBox():void 0},this.renderChildren=function(e){if(null!=t){var n=t;"symbol"==t.type&&(n=new s.Element.svg,n.type="svg",n.attributes.viewBox=new s.Property("viewBox",t.attribute("viewBox").value),n.attributes.preserveAspectRatio=new s.Property("preserveAspectRatio",t.attribute("preserveAspectRatio").value),n.attributes.overflow=new s.Property("overflow",t.attribute("overflow").value),n.children=t.children),"svg"==n.type&&(this.attribute("width").hasValue()&&(n.attributes.width=new s.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(n.attributes.height=new s.Property("height",this.attribute("height").value)));var i=n.parent;n.parent=null,n.render(e),n.parent=i}}},s.Element.use.prototype=new s.Element.RenderedElementBase,s.Element.mask=function(e){this.base=s.Element.ElementBase,this.base(e),this.apply=function(e,t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==r&&0==o){for(var a=new s.BoundingBox,l=0;l<this.children.length;l++)a.addBoundingBox(this.children[l].getBoundingBox());var n=Math.floor(a.x1),i=Math.floor(a.y1),r=Math.floor(a.width()),o=Math.floor(a.height())}var u=t.attribute("mask").value;t.attribute("mask").value="";var c=document.createElement("canvas");c.width=n+r,c.height=i+o;var p=c.getContext("2d");this.renderChildren(p);var h=document.createElement("canvas");h.width=n+r,h.height=i+o;var d=h.getContext("2d");t.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=p.createPattern(c,"no-repeat"),d.fillRect(0,0,n+r,i+o),e.fillStyle=d.createPattern(h,"no-repeat"),e.fillRect(0,0,n+r,i+o),t.attribute("mask").value=u},this.render=function(){}},s.Element.mask.prototype=new s.Element.ElementBase,s.Element.clipPath=function(e){this.base=s.Element.ElementBase,this.base(e),this.apply=function(e){var t=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var n=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},t.call(e);for(var i=0;i<this.children.length;i++){var r=this.children[i];if("undefined"!=typeof r.path){var o=null;r.style("transform",!1,!0).hasValue()&&(o=new s.Transform(r.style("transform",!1,!0).value),o.apply(e)),r.path(e),CanvasRenderingContext2D.prototype.closePath=n,o&&o.unapply(e)}}n.call(e),e.clip(),CanvasRenderingContext2D.prototype.beginPath=t,CanvasRenderingContext2D.prototype.closePath=n},this.render=function(){}},s.Element.clipPath.prototype=new s.Element.ElementBase,s.Element.filter=function(e){this.base=s.Element.ElementBase,this.base(e),this.apply=function(e,t){var n=t.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),o=Math.floor(n.width()),s=Math.floor(n.height()),a=t.style("filter").value;t.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var p=this.children[c].extraFilterDistance||0;l=Math.max(l,p),u=Math.max(u,p)}var h=document.createElement("canvas");h.width=o+2*l,h.height=s+2*u;var d=h.getContext("2d");d.translate(-i+l,-r+u),t.render(d);for(var c=0;c<this.children.length;c++)"function"==typeof this.children[c].apply&&this.children[c].apply(d,0,0,o+2*l,s+2*u);e.drawImage(h,0,0,o+2*l,s+2*u,i-l,r-u,o+2*l,s+2*u),t.style("filter",!0).value=a},this.render=function(){}},s.Element.filter.prototype=new s.Element.ElementBase,s.Element.feMorphology=function(e){this.base=s.Element.ElementBase,this.base(e),this.apply=function(){}},s.Element.feMorphology.prototype=new s.Element.ElementBase,s.Element.feComposite=function(e){this.base=s.Element.ElementBase,this.base(e),this.apply=function(){}},s.Element.feComposite.prototype=new s.Element.ElementBase,s.Element.feColorMatrix=function(e){function t(e,t,n,i,r,o){return e[n*i*4+4*t+o]}function n(e,t,n,i,r,o,s){e[n*i*4+4*t+o]=s}function i(e,t){var n=r[e];return n*(0>n?t-255:t)}this.base=s.Element.ElementBase,this.base(e);var r=s.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var o=r[0];r=[.213+.787*o,.715-.715*o,.072-.072*o,0,0,.213-.213*o,.715+.285*o,.072-.072*o,0,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var a=r[0]*Math.PI/180,l=function(e,t,n){return e+Math.cos(a)*t+Math.sin(a)*n};r=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(e,r,o,s,a){for(var l=e.getImageData(0,0,s,a),o=0;a>o;o++)for(var r=0;s>r;r++){var u=t(l.data,r,o,s,a,0),c=t(l.data,r,o,s,a,1),p=t(l.data,r,o,s,a,2),h=t(l.data,r,o,s,a,3);n(l.data,r,o,s,a,0,i(0,u)+i(1,c)+i(2,p)+i(3,h)+i(4,1)),n(l.data,r,o,s,a,1,i(5,u)+i(6,c)+i(7,p)+i(8,h)+i(9,1)),n(l.data,r,o,s,a,2,i(10,u)+i(11,c)+i(12,p)+i(13,h)+i(14,1)),n(l.data,r,o,s,a,3,i(15,u)+i(16,c)+i(17,p)+i(18,h)+i(19,1))}e.clearRect(0,0,s,a),e.putImageData(l,0,0)}},s.Element.feColorMatrix.prototype=new s.Element.ElementBase,s.Element.feGaussianBlur=function(e){this.base=s.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,n,i,r,o){return"undefined"==typeof t.canvasRGBA?void s.log("ERROR: StackBlur.js must be included for blur to work"):(e.canvas.id=s.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),t.canvasRGBA(e.canvas.id,n,i,r,o,this.blurRadius),void document.body.removeChild(e.canvas))}},s.Element.feGaussianBlur.prototype=new s.Element.ElementBase,s.Element.title=function(){},s.Element.title.prototype=new s.Element.ElementBase,s.Element.desc=function(){},s.Element.desc.prototype=new s.Element.ElementBase,s.Element.MISSING=function(e){s.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")},s.Element.MISSING.prototype=new s.Element.ElementBase,s.CreateElement=function(e){var t=e.nodeName.replace(/^[^:]+:/,"");t=t.replace(/\-/g,"");var n=null;return n="undefined"!=typeof s.Element[t]?new s.Element[t](e):new s.Element.MISSING(e),n.type=e.nodeName,n},s.load=function(e,t){s.loadXml(e,s.ajax(t))},s.loadXml=function(e,t){s.loadXmlDoc(e,s.parseXml(t))},s.loadXmlDoc=function(e,t){s.init(e);var n=function(t){for(var n=e.canvas;n;)t.x-=n.offsetLeft,t.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=s.opts.ignoreMouse&&(e.canvas.onclick=function(e){var t=n(new s.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));s.Mouse.onclick(t.x,t.y)},e.canvas.onmousemove=function(e){var t=n(new s.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));s.Mouse.onmousemove(t.x,t.y)});var i=s.CreateElement(t.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var r=!0,o=function(){s.ViewPort.Clear(),e.canvas.parentNode&&s.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=s.opts.ignoreDimensions&&(i.style("width").hasValue()&&(e.canvas.width=i.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),i.style("height").hasValue()&&(e.canvas.height=i.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var n=e.canvas.clientWidth||e.canvas.width,o=e.canvas.clientHeight||e.canvas.height;if(1==s.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(n=i.style("width").toPixels("x"),o=i.style("height").toPixels("y")),s.ViewPort.SetCurrent(n,o),null!=s.opts.offsetX&&(i.attribute("x",!0).value=s.opts.offsetX),null!=s.opts.offsetY&&(i.attribute("y",!0).value=s.opts.offsetY),null!=s.opts.scaleWidth||null!=s.opts.scaleHeight){var a=null,l=null,u=s.ToNumberArray(i.attribute("viewBox").value);null!=s.opts.scaleWidth&&(i.attribute("width").hasValue()?a=i.attribute("width").toPixels("x")/s.opts.scaleWidth:isNaN(u[2])||(a=u[2]/s.opts.scaleWidth)),null!=s.opts.scaleHeight&&(i.attribute("height").hasValue()?l=i.attribute("height").toPixels("y")/s.opts.scaleHeight:isNaN(u[3])||(l=u[3]/s.opts.scaleHeight)),null==a&&(a=l),null==l&&(l=a),i.attribute("width",!0).value=s.opts.scaleWidth,i.attribute("height",!0).value=s.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/a+","+1/l+")"}1!=s.opts.ignoreClear&&e.clearRect(0,0,n,o),i.render(e),r&&(r=!1,"function"==typeof s.opts.renderCallback&&s.opts.renderCallback(t))},a=!0;s.ImagesLoaded()&&(a=!1,o()),s.intervalID=setInterval(function(){var e=!1;if(a&&s.ImagesLoaded()&&(a=!1,e=!0),1!=s.opts.ignoreMouse&&(e|=s.Mouse.hasEvents()),1!=s.opts.ignoreAnimation)for(var t=0;t<s.Animations.length;t++)e|=s.Animations[t].update(1e3/s.FRAMERATE);"function"==typeof s.opts.forceRedraw&&1==s.opts.forceRedraw()&&(e=!0),e&&(o(),s.Mouse.runEvents())},1e3/s.FRAMERATE)},s.stop=function(){s.intervalID&&clearInterval(s.intervalID)},s.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(e,t){this.events.push({type:"onclick",x:e,y:t,run:function(e){e.onclick&&e.onclick()}})},this.onmousemove=function(e,t){this.events.push({type:"onmousemove",x:e,y:t,run:function(e){e.onmousemove&&e.onmousemove()}})},this.eventElements=[],this.checkPath=function(e,t){for(var n=0;n<this.events.length;n++){var i=this.events[n];t.isPointInPath&&t.isPointInPath(i.x,i.y)&&(this.eventElements[n]=e)}},this.checkBoundingBox=function(e,t){for(var n=0;n<this.events.length;n++){var i=this.events[n];t.isPointInBox(i.x,i.y)&&(this.eventElements[n]=e)}},this.runEvents=function(){s.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var t=this.events[e],n=this.eventElements[e];n;)t.run(n),n=n.parent;this.events=[],this.eventElements=[]}},s}var o,s=function(e,t,n){if(null!=e||null!=t||null!=n){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var i=r(n||{});(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName)&&(e.svg=i);var o=e.getContext("2d");"undefined"!=typeof t.documentElement?i.loadXmlDoc(o,t):"<"==t.substr(0,1)?i.loadXml(o,t):i.load(o,t)}else for(var a=document.querySelectorAll("svg"),l=0;l<a.length;l++){var u=a[l],c=document.createElement("canvas");c.width=u.clientWidth,c.height=u.clientHeight,u.parentNode.insertBefore(c,u),u.parentNode.removeChild(u);var p=document.createElement("div");p.appendChild(u),s(c,p.innerHTML)}};"undefined"!=typeof Element.prototype.matches?o=function(e,t){return e.matches(t)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?o=function(e,t){return e.webkitMatchesSelector(t)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?o=function(e,t){return e.mozMatchesSelector(t)}:"undefined"!=typeof Element.prototype.msMatchesSelector?o=function(e,t){return e.msMatchesSelector(t)}:"undefined"!=typeof Element.prototype.oMatchesSelector?o=function(e,t){return e.oMatchesSelector(t)}:(("function"==typeof jQuery||"function"==typeof Zepto)&&(o=function(e,t){return $(e).is(t)}),"undefined"==typeof o&&(o=Sizzle.matchesSelector));var a=/(\[[^\]]+\])/g,l=/(#[^\s\+>~\.\[:]+)/g,u=/(\.[^\s\+>~\.\[:]+)/g,c=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,p=/(:[\w-]+\([^\)]*\))/gi,h=/(:[^\s\+>~\.\[:]+)/g,d=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(e,t,n,i,r,o){var a={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:n,scaleWidth:i,scaleHeight:r};for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);s(this.canvas,e,a)}),s})},{rgbcolor:"/home/ubuntu/staging/apps/node_modules/rgbcolor/index.js",stackblur:"/home/ubuntu/staging/apps/node_modules/stackblur/index.js"}],"/home/ubuntu/staging/apps/node_modules/stackblur/index.js":[function(e,t){function n(e,t,n,s){if(!(isNaN(s)||1>s)){s|=0;var a,l,u,c,p,h,d,f,m,g,b,v,y,_,w,E,x,k,T,S,C,B,R,P,j=s+s+1,I=t-1,A=n-1,M=s+1,N=M*(M+1)/2,O=new i,L=O;for(u=1;j>u;u++)if(L=L.next=new i,u==M)var D=L;L.next=O;var F=null,U=null;d=h=0;var V=r[s],z=o[s];for(l=0;n>l;l++){for(E=x=k=T=f=m=g=b=0,v=M*(S=e[h]),y=M*(C=e[h+1]),_=M*(B=e[h+2]),w=M*(R=e[h+3]),f+=N*S,m+=N*C,g+=N*B,b+=N*R,L=O,u=0;M>u;u++)L.r=S,L.g=C,L.b=B,L.a=R,L=L.next;for(u=1;M>u;u++)c=h+((u>I?I:u)<<2),f+=(L.r=S=e[c])*(P=M-u),m+=(L.g=C=e[c+1])*P,g+=(L.b=B=e[c+2])*P,b+=(L.a=R=e[c+3])*P,E+=S,x+=C,k+=B,T+=R,L=L.next;for(F=O,U=D,a=0;t>a;a++)e[h+3]=R=b*V>>z,0!=R?(R=255/R,e[h]=(f*V>>z)*R,e[h+1]=(m*V>>z)*R,e[h+2]=(g*V>>z)*R):e[h]=e[h+1]=e[h+2]=0,f-=v,m-=y,g-=_,b-=w,v-=F.r,y-=F.g,_-=F.b,w-=F.a,c=d+((c=a+s+1)<I?c:I)<<2,E+=F.r=e[c],x+=F.g=e[c+1],k+=F.b=e[c+2],T+=F.a=e[c+3],f+=E,m+=x,g+=k,b+=T,F=F.next,v+=S=U.r,y+=C=U.g,_+=B=U.b,w+=R=U.a,E-=S,x-=C,k-=B,T-=R,U=U.next,h+=4;d+=t}for(a=0;t>a;a++){for(x=k=T=E=m=g=b=f=0,h=a<<2,v=M*(S=e[h]),y=M*(C=e[h+1]),_=M*(B=e[h+2]),w=M*(R=e[h+3]),f+=N*S,m+=N*C,g+=N*B,b+=N*R,L=O,u=0;M>u;u++)L.r=S,L.g=C,L.b=B,L.a=R,L=L.next;for(p=t,u=1;s>=u;u++)h=p+a<<2,f+=(L.r=S=e[h])*(P=M-u),m+=(L.g=C=e[h+1])*P,g+=(L.b=B=e[h+2])*P,b+=(L.a=R=e[h+3])*P,E+=S,x+=C,k+=B,T+=R,L=L.next,A>u&&(p+=t);for(h=a,F=O,U=D,l=0;n>l;l++)c=h<<2,e[c+3]=R=b*V>>z,R>0?(R=255/R,e[c]=(f*V>>z)*R,e[c+1]=(m*V>>z)*R,e[c+2]=(g*V>>z)*R):e[c]=e[c+1]=e[c+2]=0,f-=v,m-=y,g-=_,b-=w,v-=F.r,y-=F.g,_-=F.b,w-=F.a,c=a+((c=l+M)<A?c:A)*t<<2,f+=E+=F.r=e[c],m+=x+=F.g=e[c+1],g+=k+=F.b=e[c+2],b+=T+=F.a=e[c+3],F=F.next,v+=S=U.r,y+=C=U.g,_+=B=U.b,w+=R=U.a,E-=S,x-=C,k-=B,T-=R,U=U.next,h+=t
}}}function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports=n},{}],"/home/ubuntu/staging/apps/node_modules/rgbcolor/index.js":[function(e,t){t.exports=function(e){this.ok=!1,this.alpha=1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e=t[e]||e;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,s=r.exec(e);if(s){var a=o(s);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n},this.getHelpXML=function(){for(var e=new Array,i=0;i<n.length;i++)for(var r=n[i].example,o=0;o<r.length;o++)e[e.length]=r[o];for(var s in t)e[e.length]=s;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(var i=0;i<e.length;i++)try{var l=document.createElement("li"),u=new RGBColor(e[i]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var p=document.createTextNode(" "+e[i]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(c),l.appendChild(p),a.appendChild(l)}catch(h){}return a}}},{}],"/home/ubuntu/staging/apps/build/js/canvg/svg_todataurl.js":[function(){"use strict";SVGElement.prototype.toDataURL=function(e,t){function n(){}function i(){var i=r(l),s=o(i);return n(e+" length: "+s.length),t.callback&&t.callback(s),s}function r(e){function t(e){var n="";n+="<"+e.nodeName;for(var i=0;i<e.attributes.length;i++)n+=" "+e.attributes[i].name+"='"+e.attributes[i].value+"'";if(e.hasChildNodes()){n+=">\n";for(var i=0;i<e.childNodes.length;i++)n+=t(e.childNodes[i]);n+="</"+e.nodeName+">\n"}else n+=" />\n";return n}return window.XMLSerializer?(n("using standard XMLSerializer.serializeToString"),(new XMLSerializer).serializeToString(e)):(n("using custom XMLSerializerForIE"),t(e))}function o(e){var t="data:image/svg+xml;base64,";return window.btoa?(n("using window.btoa for base64 encoding"),t+=btoa(e)):(n("using custom base64 encoder"),t+=Base64.encode(e)),t}function s(e){var i=document.createElement("canvas"),s=i.getContext("2d"),a=new Image,u=r(l);a.src=o(u),a.onload=function(){n("exported image size: "+[a.width,a.height]),i.width=a.width,i.height=a.height,s.drawImage(a,0,0);var r=i.toDataURL(e);n(e+" length: "+r.length),t.callback?t.callback(r):n("WARNING: no callback set, so nothing happens.")},a.onerror=function(){console.log("Can't export! Maybe your browser doesn't support SVG in img element or SVG input for Canvas drawImage?\nhttp://en.wikipedia.org/wiki/SVG#Native_support")}}function a(e){var i=document.createElement("canvas"),o=(i.getContext("2d"),r(l)),s=t.keepOutsideViewport;if(s)var a=l.getBBox();return canvg(i,o,{ignoreMouse:!0,ignoreAnimation:!0,offsetX:s?-a.x:void 0,offsetY:s?-a.y:void 0,scaleWidth:s?a.width+a.x:void 0,scaleHeight:s?a.height+a.y:void 0,renderCallback:function(){n("exported image dimensions "+[i.width,i.height]);var r=i.toDataURL(e);n(e+" length: "+r.length),t.callback&&t.callback(r)}}),i.toDataURL(e)}var l=this;switch(e||(e="image/svg+xml"),t||(t={}),t.keepNonSafe&&n("NOTE: keepNonSafe is NOT supported and will be ignored!"),t.keepOutsideViewport&&n("NOTE: keepOutsideViewport is only supported with canvg exporter."),e){case"image/svg+xml":return i();case"image/png":case"image/jpeg":switch(t.renderer||(t.renderer=window.canvg?"canvg":"native"),t.renderer){case"canvg":return n("using canvg renderer for png export"),a(e);case"native":return n("using native renderer for png export. THIS MIGHT FAIL."),s(e);default:n("unknown png renderer given, doing noting ("+t.renderer+")")}break;default:n("Sorry! Exporting as '"+e+"' is not supported!")}}},{}],"/home/ubuntu/staging/apps/build/js/sharedFunctionalBlocks.js":[function(e,t,n){"use strict";function i(e,t){e.Blocks.functional_plus={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"+",e.BlockValueType.NUMBER,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}],{titleFontSize:T})}},t.functional_plus=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" + "+t+")"}}function r(e,t){e.Blocks.functional_minus={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"-",e.BlockValueType.NUMBER,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}],{titleFontSize:T})}},t.functional_minus=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" - "+t+")"}}function o(e,t){e.Blocks.functional_times={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"*",e.BlockValueType.NUMBER,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}],{titleFontSize:T})}},t.functional_times=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" * "+t+")"}}function s(e,t){e.Blocks.functional_dividedby={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"/",e.BlockValueType.NUMBER,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}],{titleFontSize:T})}},t.functional_dividedby=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" / "+t+")"}}function a(e,t){e.Blocks.functional_greater_than={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,">",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}])}},t.functional_greater_than=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" > "+t+")"}}function l(e,t){e.Blocks.functional_less_than={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"<",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}])}},t.functional_less_than=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" < "+t+")"}}function u(e,t){e.Blocks.functional_number_equals={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"=",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.NUMBER},{name:"ARG2",type:e.BlockValueType.NUMBER}])}},t.functional_number_equals=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" == "+t+")"}}function c(e,t){e.Blocks.functional_string_equals={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,k.stringEquals(),e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.STRING},{name:"ARG2",type:e.BlockValueType.STRING}])}},t.functional_string_equals=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||"",t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||"";return"("+e+" == "+t+")"}}function p(e,t){e.Blocks.functional_logical_and={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"and",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.BOOLEAN},{name:"ARG2",type:e.BlockValueType.BOOLEAN}])}},t.functional_logical_and=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" && "+t+")"}}function h(e,t){e.Blocks.functional_logical_or={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"or",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.BOOLEAN},{name:"ARG2",type:e.BlockValueType.BOOLEAN}])}},t.functional_logical_or=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"("+e+" || "+t+")"}}function d(e,t){e.Blocks.functional_logical_not={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"not",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:e.BlockValueType.BOOLEAN}])}},t.functional_logical_not=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0;return"!("+e+")"}}function f(e,t){e.Blocks.functional_boolean={init:function(){this.setFunctional(!0,{headerHeight:0,rowBuffer:3}),this.setHSV.apply(this,e.FunctionalTypeColors[e.BlockValueType.BOOLEAN]);var t=e.Blocks.functional_boolean.VALUES;this.appendDummyInput().appendTitle(new e.FieldDropdown(t),"VAL").setAlign(Blockly.ALIGN_CENTRE),this.setFunctionalOutput(!0,e.BlockValueType.BOOLEAN)}},e.Blocks.functional_boolean.VALUES=[[k.booleanTrue(),"true"],[k.booleanFalse(),"false"]],t.functional_boolean=function(){return this.getTitleValue("VAL")}}function m(e,t){e.Blocks.functional_math_number={init:function(){this.setFunctional(!0,{headerHeight:0,rowBuffer:3}),this.setHSV.apply(this,e.FunctionalTypeColors[e.BlockValueType.NUMBER]),this.appendDummyInput().appendTitle(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM").setAlign(Blockly.ALIGN_CENTRE),this.setFunctionalOutput(!0,e.BlockValueType.NUMBER)}},t.functional_math_number=function(){return this.getTitleValue("NUM")},e.Blocks.functional_math_number_dropdown={init:function(){this.setFunctional(!0,{headerHeight:0,rowBuffer:3}),this.setHSV.apply(this,e.FunctionalTypeColors[e.BlockValueType.NUMBER]),this.appendDummyInput().appendTitle(new Blockly.FieldDropdown,"NUM").setAlign(Blockly.ALIGN_CENTRE),this.setFunctionalOutput(!0,e.BlockValueType.NUMBER)}},t.functional_math_number_dropdown=t.functional_math_number}function g(e,t){e.Blocks.functional_string={init:function(){this.setFunctional(!0,{headerHeight:0,rowBuffer:3}),this.setHSV.apply(this,e.FunctionalTypeColors[e.BlockValueType.STRING]),this.appendDummyInput().appendTitle(new Blockly.FieldLabel('"')).appendTitle(new Blockly.FieldTextInput(""),"VAL").appendTitle(new Blockly.FieldLabel('"')).setAlign(Blockly.ALIGN_CENTRE),this.setFunctionalOutput(!0,e.BlockValueType.STRING)}},t.functional_string=function(){return e.JavaScript.quote_(this.getTitleValue("VAL"))}}function b(e,t){e.Blocks.functional_sqrt={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"sqrt","Number",[{name:"ARG1",type:"Number"}])}},t.functional_sqrt=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0;return"Math.sqrt("+e+")"}}function v(e,t){e.Blocks.functional_pow={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"pow","Number",[{name:"ARG1",type:"Number"},{name:"ARG2",type:"Number"}])}},t.functional_pow=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0,t=Blockly.JavaScript.statementToCode(this,"ARG2",!1)||0;return"Math.pow("+e+", "+t+")"}}function y(e,t){e.Blocks.functional_squared={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"sqr","Number",[{name:"ARG1",type:"Number"}])}},t.functional_squared=function(){var e=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0;return e+" * "+e}}function _(e,t){var n=[Blockly.BlockValueType.NONE,Blockly.BlockValueType.NUMBER,Blockly.BlockValueType.STRING,Blockly.BlockValueType.IMAGE,Blockly.BlockValueType.BOOLEAN];n.forEach(function(n){w(e,t,n)})}function w(e,t,n){var i="functional_cond";n!==Blockly.BlockValueType.NONE&&(i+="_"+n.toLowerCase()),e.Blocks[i]={helpUrl:"",init:function(){this.pairs_=[],this.setFunctional(!0,{headerHeight:30});var e={fixedSize:{height:35}};this.setHSV.apply(this,Blockly.FunctionalTypeColors[n]);var t=new Blockly.FieldIcon("+");Blockly.bindEvent_(t.getRootElement(),"mousedown",this,this.addConditionalRow),this.appendDummyInput().appendTitle(new Blockly.FieldLabel("cond",e)).setAlign(Blockly.ALIGN_CENTRE),this.appendDummyInput("ELSE").appendTitle(new Blockly.FieldLabel("else",e));var i=this.appendFunctionalInput("DEFAULT").setInline(!0);i.setHSV.apply(i,Blockly.FunctionalTypeColors[n]),this.appendDummyInput("PLUS").appendTitle(t).setInline(!0),this.setFunctionalOutput(!0,n===Blockly.BlockValueType.NONE?void 0:n),this.addConditionalRow()},addConditionalRow:function(){var t=this.pairs_.length>0?1*x(this.pairs_).last()+1:0;this.pairs_.push(t);var i=this.appendFunctionalInput("COND"+t);i.setHSV.apply(i,e.FunctionalTypeColors[e.BlockValueType.BOOLEAN]),i.setCheck(e.BlockValueType.BOOLEAN),this.moveInputBefore("COND"+t,"ELSE");var r=this.appendFunctionalInput("VALUE"+t).setInline(!0);r.setHSV.apply(r,Blockly.FunctionalTypeColors[n]),this.moveInputBefore("VALUE"+t,"ELSE");var o=this.appendDummyInput("MINUS"+t).setInline(!0);if(this.pairs_.length>1){var s=new Blockly.FieldIcon("-");Blockly.bindEvent_(s.getRootElement(),"mousedown",this,x.bind(this.removeConditionalRow,this,t)),o.appendTitle(s)}this.moveInputBefore("MINUS"+t,"ELSE")},removeConditionalRow:function(e){var t=this.pairs_.indexOf(e);if(x(this.pairs_).contains(e)&&1!==this.pairs_.length){this.pairs_.splice(t,1);var n=this.getInput("COND"+e),i=n.connection.targetBlock();i&&i.dispose(),this.removeInput("COND"+e);var r=this.getInput("VALUE"+e);i=r.connection.targetBlock(),i&&i.dispose(),this.removeInput("VALUE"+e),this.removeInput("MINUS"+e)}},mutationToDom:function(){if(this.pairs_.length<=1)return null;var e=document.createElement("mutation");return e.setAttribute("pairs",this.pairs_.join(",")),e},domToMutation:function(e){var t,n=e.getAttribute("pairs");if(n){n=n.split(",").map(function(e){return parseInt(e,10)});var i=x(n).last();for(t=1;i>=t;t++)this.addConditionalRow();for(t=0;i>t;t++)x(n).contains(t)||this.removeConditionalRow(t)}}},t[i]=function(){for(var e,t,n,i="(function () {\n  ",r=0;r<this.pairs_.length;r++){r>0&&(i+="else ");var o=this.pairs_[r];e=Blockly.JavaScript.statementToCode(this,"COND"+o,!1)||!1,t=Blockly.JavaScript.statementToCode(this,"VALUE"+o,!1)||"",i+="if ("+e+") { return "+t+"; }\n  "}return n=Blockly.JavaScript.statementToCode(this,"DEFAULT",!1)||"",i+="else { return "+n+"; }\n",i+="})()"}}var E=e("./utils"),x=E.getLodash(),k=e("./locale"),T=25;n.install=function(e,t,n){i(e,t,n),r(e,t,n),o(e,t,n),s(e,t,n),a(e,t,n),l(e,t,n),u(e,t,n),c(e,t,n),p(e,t,n),h(e,t,n),d(e,t,n),f(e,t,n),m(e,t,n),g(e,t,n),_(e,t),b(e,t),v(e,t),y(e,t)}},{"./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/templates/AppView.jsx":[function(e,t){"use strict";var n=(e("../lodash"),e("./ProtectedStatefulDiv")),i=e("./StudioAppWrapper"),r=e("./CodeWorkspaceContainer"),o=React.createClass({displayName:"AppView",propTypes:{assetUrl:React.PropTypes.func.isRequired,isEmbedView:React.PropTypes.bool.isRequired,isShareView:React.PropTypes.bool.isRequired,hideSource:React.PropTypes.bool.isRequired,noVisualization:React.PropTypes.bool.isRequired,isRtl:React.PropTypes.bool.isRequired,generateCodeWorkspaceHtml:React.PropTypes.func.isRequired,generateVisualizationColumnHtml:React.PropTypes.func.isRequired,onMount:React.PropTypes.func.isRequired},componentDidMount:function(){this.props.onMount()},render:function(){return React.createElement(i,{assetUrl:this.props.assetUrl,isEmbedView:this.props.isEmbedView,isShareView:this.props.isShareView},React.createElement("div",{id:"visualizationColumn"},React.createElement(n,{contentFunction:this.props.generateVisualizationColumnHtml})),React.createElement(n,{id:"visualizationResizeBar",className:"fa fa-ellipsis-v"}),React.createElement(r,{topMargin:0,hidden:this.props.hideSource,noVisualization:this.props.noVisualization,isRtl:this.props.isRtl,generateCodeWorkspaceHtml:this.props.generateCodeWorkspaceHtml}))}});t.exports=o},{"../lodash":"/home/ubuntu/staging/apps/build/js/lodash.js","./CodeWorkspaceContainer":"/home/ubuntu/staging/apps/build/js/templates/CodeWorkspaceContainer.jsx","./ProtectedStatefulDiv":"/home/ubuntu/staging/apps/build/js/templates/ProtectedStatefulDiv.jsx","./StudioAppWrapper":"/home/ubuntu/staging/apps/build/js/templates/StudioAppWrapper.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/visualizationColumn.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var e=require("../locale"),t=locals.hideRunButton||!1;buf.push("\n\n");var n=function(){buf.push('<div id="gameButtons">\n  <button id="runButton" class="launch blocklyLaunch ',escape(t?"invisible":""),'">\n    <div>',escape(e.runProgram()),'</div>\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="run26"/>\n  </button>\n  <button id="resetButton" class="launch blocklyLaunch" style="display: none">\n    <div>',escape(e.resetProgram()),'</div>\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="reset26"/>\n  </button>\n  '),data.controls&&buf.push("\n    ",data.controls,"\n  "),buf.push("\n  "),!data.pinWorkspaceToBottom&&data.extraControlRows&&buf.push("\n    ",data.extraControlRows,"\n  "),buf.push("\n</div>\n")};if(buf.push('\n<div id="visualization">\n  ',data.visualization,"\n</div>\n\n"),n(),buf.push('\n\n<div id="belowVisualization">\n\n  <div id="bubble" class="clearfix">\n    <table id="prompt-table">\n      <tr>\n        <td id="prompt-icon-cell" style="display: none">\n          <img id="prompt-icon"/>\n        </td>\n        <td id="prompt-cell">\n          <p id="prompt">\n          <p id="prompt2" style="display:none">\n          </p>\n        </td>\n      </tr>\n    </table>\n    '),data.inputOutputTable){buf.push('\n      <div id="input-table">\n        <table>\n          <tr>\n            <th>Input</th>\n            <th>Output</th>\n          </tr>\n          ');for(var i=0;i<data.inputOutputTable.length;i++)buf.push("\n          <tr>\n            <td>",data.inputOutputTable[i][0],"</td>\n            <td>",data.inputOutputTable[i][1],"</td>\n          </tr>\n          ");buf.push("\n        </table>\n      </div>\n    ")}buf.push('\n    <div id="ani-gif-preview-wrapper">\n      <div id="ani-gif-preview">\n      </div>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/codeWorkspace.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var e=require("../locale");buf.push('\n<div id="headers" dir="',escape(data.localeDirection),'">\n  <div id="codeModeHeaders">\n    <div id="toolbox-header" class="workspace-header">\n      <i id="hide-toolbox-icon" style="display:none;" class="fa fa-chevron-circle-right"></i>\n      <span>',escape(data.editCode?e.toolboxHeaderDroplet():e.toolboxHeader()),'</span>\n    </div>\n    <div id="show-toolbox-header" class="workspace-header" style="display:none;">\n      <i id="show-toolbox-icon" class="fa fa-chevron-circle-right"></i>\n      <span>',escape(e.showToolbox()),'</span>\n    </div>\n    <div id="show-code-header" class="workspace-header workspace-header-button"><span><img src="',escape(assetUrl("media/applab/blocks_glyph.gif")),'" class="blocks-glyph" />',escape(e.showCodeHeader()),"</span></div>\n    "),data.readonlyWorkspace||buf.push('\n      <div id="clear-puzzle-header" class="workspace-header workspace-header-button"><span><i class="fa fa-undo"></i>',escape(e.clearPuzzle()),"</span></div>\n    "),buf.push('\n    <div id="versions-header" class="workspace-header workspace-header-button"><span><i class="fa fa-clock-o"></i>',escape(e.showVersionsHeader()),'</span></div>\n    <div id="workspace-header" class="workspace-header">\n      <span id="workspace-header-span">\n        ',escape(data.readonlyWorkspace?e.readonlyWorkspaceHeader():e.workspaceHeaderShort()),'\n      </span>\n      <div id="blockCounter">\n        <div id="blockUsed" class=',escape(data.blockCounterClass),">\n          ",escape(data.blockUsed),'\n        </div>\n        <span>/</span>\n        <span id="idealBlockNumber">',escape(data.idealBlockNumber),"</span>\n        <span> ",escape(e.blocks()),"</span>\n      </div>\n    </div>\n  </div>\n</div>\n"),data.editCode&&buf.push('\n  <div id="codeTextbox"></div>\n'),buf.push("\n"),data.pinWorkspaceToBottom&&data.extraControlRows&&buf.push("\n  ",data.extraControlRows,"\n"),buf.push("\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/skins.js":[function(e,t,n){"use strict";n.load=function(e,t){var n=function(n){return void 0!==n?e("media/skins/"+t+"/"+n):null},i={id:t,assetUrl:n,avatar:n("avatar.png"),avatar_2x:n("avatar_2x.png"),goal:n("goal.png"),obstacle:n("obstacle.png"),smallStaticAvatar:n("small_static_avatar.png"),staticAvatar:n("static_avatar.png"),winAvatar:n("win_avatar.png"),failureAvatar:n("failure_avatar.png"),decorationAnimation:n("decoration_animation.png"),decorationAnimation_2x:n("decoration_animation_2x.png"),repeatImage:e("media/common_images/repeat-arrows.png"),leftArrow:e("media/common_images/moveleft.png"),downArrow:e("media/common_images/movedown.png"),upArrow:e("media/common_images/moveup.png"),rightArrow:e("media/common_images/moveright.png"),leftJumpArrow:e("media/common_images/jumpleft.png"),downJumpArrow:e("media/common_images/jumpdown.png"),upJumpArrow:e("media/common_images/jumpup.png"),rightJumpArrow:e("media/common_images/jumpright.png"),northLineDraw:e("media/common_images/draw-north.png"),southLineDraw:e("media/common_images/draw-south.png"),eastLineDraw:e("media/common_images/draw-east.png"),westLineDraw:e("media/common_images/draw-west.png"),shortLineDraw:e("media/common_images/draw-short.png"),longLineDraw:e("media/common_images/draw-long.png"),shortLineDrawRight:e("media/common_images/draw-short-right.png"),longLineDrawRight:e("media/common_images/draw-long-right.png"),longLine:e("media/common_images/move-long.png"),shortLine:e("media/common_images/move-short.png"),soundIcon:e("media/common_images/play-sound.png"),clickIcon:e("media/common_images/when-click-hand.png"),startIcon:e("media/common_images/when-run.png"),runArrow:e("media/common_images/run-arrow.png"),endIcon:e("media/common_images/end-icon.png"),speedFast:e("media/common_images/speed-fast.png"),speedMedium:e("media/common_images/speed-medium.png"),speedSlow:e("media/common_images/speed-slow.png"),scoreCard:e("media/common_images/increment-score-75percent.png"),rainbowMenu:e("media/common_images/rainbow-menuicon.png"),ropeMenu:e("media/common_images/rope-menuicon.png"),squigglyMenu:e("media/common_images/squiggly-menuicon.png"),swirlyMenu:e("media/common_images/swirlyline-menuicon.png"),patternDefault:e("media/common_images/defaultline-menuicon.png"),rainbowLine:e("media/common_images/rainbow.png"),ropeLine:e("media/common_images/rope.png"),squigglyLine:e("media/common_images/squiggly.png"),swirlyLine:e("media/common_images/swirlyline.png"),randomPurpleIcon:e("media/common_images/random-purple.png"),startSound:[n("start.mp3"),n("start.ogg")],winSound:[n("win.mp3"),n("win.ogg")],failureSound:[n("failure.mp3"),n("failure.ogg")]};return i}},{}],"/home/ubuntu/staging/apps/build/js/redux.js":[function(e,t){"use strict";var n=e("redux");t.exports=function(e,t){return n.createStore(e,t)}},{redux:"/home/ubuntu/staging/apps/node_modules/redux/lib/index.js","redux-logger":"/home/ubuntu/staging/apps/node_modules/redux-logger/lib/index.js"}],"/home/ubuntu/staging/apps/node_modules/redux-logger/lib/index.js":[function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function r(e,t,r,o){switch("undefined"==typeof e?"undefined":i(e)){case"object":return"function"==typeof e[o]?e[o].apply(e,n(r)):e[o];case"function":return e(t);default:return e}}function o(){function e(){S.forEach(function(e,t){var n=e.started,o=e.startedTime,a=e.action,u=e.prevState,c=e.error,h=e.took,d=e.nextState,m=S[t+1];m&&(d=m.prevState,h=m.started-n);var b=w(a),v="function"==typeof p?p(function(){return d},a):p,y=l(o),_=T.title?"color: "+T.title(b)+";":null,E="action "+(g?y:"")+" "+b.type+" "+(f?"(in "+h.toFixed(2)+" ms)":"");try{v?T.title?s.groupCollapsed("%c "+E,_):s.groupCollapsed(E):T.title?s.group("%c "+E,_):s.group(E)}catch(x){s.log(E)}var k=r(i,b,[u],"prevState"),C=r(i,b,[b],"action"),B=r(i,b,[c,u],"error"),R=r(i,b,[d],"nextState");k&&(T.prevState?s[k]("%c prev state","color: "+T.prevState(u)+"; font-weight: bold",u):s[k]("prev state",u)),C&&(T.action?s[C]("%c action","color: "+T.action(b)+"; font-weight: bold",b):s[C]("action",b)),c&&B&&(T.error?s[B]("%c error","color: "+T.error(c,u)+"; font-weight: bold",c):s[B]("error",c)),R&&(T.nextState?s[R]("%c next state","color: "+T.nextState(d)+"; font-weight: bold",d):s[R]("next state",d));try{s.groupEnd()}catch(x){s.log("\u2014\u2014 log end \u2014\u2014")}}),S.length=0}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.level,i=void 0===n?"log":n,o=t.logger,s=void 0===o?console:o,a=t.logErrors,c=void 0===a?!0:a,p=t.collapsed,h=t.predicate,d=t.duration,f=void 0===d?!1:d,m=t.timestamp,g=void 0===m?!0:m,b=t.transformer,v=t.stateTransformer,y=void 0===v?function(e){return e}:v,_=t.actionTransformer,w=void 0===_?function(e){return e}:_,E=t.errorTransformer,x=void 0===E?function(e){return e}:E,k=t.colors,T=void 0===k?{title:function(){return"#000000"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}}:k;if("undefined"==typeof s)return function(){return function(e){return function(t){return e(t)}}};b&&console.error("Option 'transformer' is deprecated, use stateTransformer instead");var S=[];return function(t){var n=t.getState;return function(t){return function(i){if("function"==typeof h&&!h(n,i))return t(i);var r={};S.push(r),r.started=u.now(),r.startedTime=new Date,r.prevState=y(n()),r.action=i;var o=void 0;if(c)try{o=t(i)}catch(s){r.error=x(s)}else o=t(i);if(r.took=u.now()-r.started,r.nextState=y(n()),e(),r.error)throw r.error;return o}}}}var s=function(e,t){return new Array(t+1).join(e)},a=function(e,t){return s("0",t-e.toString().length)+e},l=function(e){return"@ "+a(e.getHours(),2)+":"+a(e.getMinutes(),2)+":"+a(e.getSeconds(),2)+"."+a(e.getMilliseconds(),3)
},u="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date;t.exports=o},{}],"/home/ubuntu/staging/apps/build/js/consoleApi.js":[function(e,t){"use strict";var n=(e("./codegen"),e("sprintf-js").vsprintf),i=t.exports,r=function(){};i.setLogMethod=function(e){r=e},i.log=function(){var e=arguments,t="",i=e[0];if(1===e.length)t=i;else if("string"==typeof i||i instanceof String)t=n(i,Array.prototype.slice.call(e,1));else for(var o=0;o<e.length;o++)t+=JSON.stringify(e[o]),o<e.length-1&&(t+="\n");r(t)}},{"./codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","sprintf-js":"/home/ubuntu/staging/apps/node_modules/sprintf-js/src/sprintf.js"}],"/home/ubuntu/staging/apps/node_modules/sprintf-js/src/sprintf.js":[function(e,t,n){!function(e){function t(){var e=arguments[0],n=t.cache;return n[e]&&n.hasOwnProperty(e)||(n[e]=t.parse(e)),t.format.call(null,n[e],arguments)}function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,t){return Array(t+1).join(e)}var o={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};t.format=function(e,n){var s,a,l,u,c,p,h,d=1,f=e.length,m="",g=[],b=!0,v="";for(a=0;f>a;a++)if(m=i(e[a]),"string"===m)g[g.length]=e[a];else if("array"===m){if(u=e[a],u[2])for(s=n[d],l=0;l<u[2].length;l++){if(!s.hasOwnProperty(u[2][l]))throw new Error(t("[sprintf] property '%s' does not exist",u[2][l]));s=s[u[2][l]]}else s=u[1]?n[u[1]]:n[d++];if("function"==i(s)&&(s=s()),o.not_string.test(u[8])&&o.not_json.test(u[8])&&"number"!=i(s)&&isNaN(s))throw new TypeError(t("[sprintf] expecting number but found %s",i(s)));switch(o.number.test(u[8])&&(b=s>=0),u[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,u[6]?parseInt(u[6]):0);break;case"e":s=u[7]?s.toExponential(u[7]):s.toExponential();break;case"f":s=u[7]?parseFloat(s).toFixed(u[7]):parseFloat(s);break;case"g":s=u[7]?parseFloat(s).toPrecision(u[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&u[7]?s.substring(0,u[7]):s;break;case"u":s>>>=0;break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}o.json.test(u[8])?g[g.length]=s:(!o.number.test(u[8])||b&&!u[3]?v="":(v=b?"+":"-",s=s.toString().replace(o.sign,"")),p=u[4]?"0"===u[4]?"0":u[4].charAt(1):" ",h=u[6]-(v+s).length,c=u[6]&&h>0?r(p,h):"",g[g.length]=u[5]?v+s+c:"0"===p?v+c+s:c+v+s)}return g.join("")},t.cache={},t.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=o.text.exec(t)))i[i.length]=n[0];else if(null!==(n=o.modulo.exec(t)))i[i.length]="%";else{if(null===(n=o.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){r|=1;var s=[],a=n[2],l=[];if(null===(l=o.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s[s.length]=l[1];""!==(a=a.substring(l[0].length));)if(null!==(l=o.key_access.exec(a)))s[s.length]=l[1];else{if(null===(l=o.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s[s.length]=l[1]}n[2]=s}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=n}t=t.substring(n[0].length)}return i};var s=function(e,n,i){return i=(n||[]).slice(0),i.splice(0,0,e),t.apply(null,i)};"undefined"!=typeof n?(n.sprintf=t,n.vsprintf=s):(e.sprintf=t,e.vsprintf=s,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:s}}))}("undefined"==typeof window?this:window)},{}],"/home/ubuntu/staging/apps/build/js/assetManagement/getAssetDropdown.js":[function(e,t){"use strict";var n=e("./assetListStore"),i=e("./show"),r=e("../locale"),o=e("../utils");t.exports=function(e){var t=n.list(e).map(function(e){return{text:o.quote(e.filename),display:o.quote(e.filename)}}),s=function(t){i(function(e){t(o.quote(e))},e)};return t.push({text:r.choosePrefix(),display:'<span class="chooseAssetDropdownOption">'+r.choosePrefix()+"</a>",click:s}),t}},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./assetListStore":"/home/ubuntu/staging/apps/build/js/assetManagement/assetListStore.js","./show":"/home/ubuntu/staging/apps/build/js/assetManagement/show.js"}],"/home/ubuntu/staging/apps/build/js/timeoutList.js":[function(e,t,n){"use strict";var i=[];n.setTimeout=function(){var e=window.setTimeout.apply(window,arguments);return i.push(e),e},n.clearTimeouts=function(){i.forEach(window.clearTimeout,window),i=[]},n.clearTimeout=function(e){window.clearTimeout(e);var t=i.indexOf(e);t>-1&&i.splice(t,1)};var r=[];n.setInterval=function(){var e=window.setInterval.apply(window,arguments);return r.push(e),e},n.clearIntervals=function(){r.forEach(window.clearInterval,window),r=[]},n.clearInterval=function(e){window.clearInterval(e);var t=r.indexOf(e);t>-1&&r.splice(t,1)}},{}],"/home/ubuntu/staging/apps/build/js/errorHandler.js":[function(e,t){"use strict";function n(e){l=e}function i(e,t,n){var i=t+": ";void 0!==n&&(i+="Line: "+n+": "),i+=e,l(i),void 0!==n&&o.addRuntimeAnnotation(t,n,e),t===a.ERROR&&s.addPageAction(s.PageAction.UserJavaScriptError,{error:e},.05)}function r(e,t,n){e.onError?e.onError.call(null,t,n):l(t)}var o=e("./acemode/annotationList"),s=e("./logToCloud"),a={WARNING:"WARNING",ERROR:"ERROR"},l=function(){};t.exports={ErrorLevel:a,outputError:i,handleError:r,setLogMethod:n}},{"./acemode/annotationList":"/home/ubuntu/staging/apps/build/js/acemode/annotationList.js","./logToCloud":"/home/ubuntu/staging/apps/build/js/logToCloud.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/stream-browserify/index.js":[function(e,t){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,r=e("inherits");r(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function s(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",s));var c=!1;return u.on("error",a),e.on("error",a),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},{events:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/events/events.js",inherits:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js","readable-stream/duplex.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/duplex.js","readable-stream/passthrough.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/passthrough.js","readable-stream/readable.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/readable.js","readable-stream/transform.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/transform.js","readable-stream/writable.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/writable.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/writable.js":[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_writable.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/transform.js":[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_transform.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/readable.js":[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_duplex.js","./lib/_stream_passthrough.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_passthrough.js","./lib/_stream_readable.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_readable.js","./lib/_stream_transform.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_transform.js","./lib/_stream_writable.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_writable.js",stream:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/stream-browserify/index.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/passthrough.js":[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_passthrough.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_passthrough.js":[function(e,t){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),r=e("core-util-is");r.inherits=e("inherits"),r.inherits(n,i),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_transform.js","core-util-is":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/node_modules/core-util-is/lib/util.js",inherits:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_transform.js":[function(e,t){function n(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,a.isNullOrUndefined(n)||e.push(n),r&&r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);s.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){a.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=r;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(r,s),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},r.prototype._transform=function(){throw new Error("not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;a.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_duplex.js","core-util-is":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/node_modules/core-util-is/lib/util.js",inherits:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/duplex.js":[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_duplex.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_duplex.js":[function(e,t){(function(n){function i(e){return this instanceof i?(l.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}t.exports=i;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=e("core-util-is");a.inherits=e("inherits");var l=e("./_stream_readable"),u=e("./_stream_writable");a.inherits(i,l),o(s(u.prototype),function(e){i.prototype[e]||(i.prototype[e]=u.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_readable.js","./_stream_writable":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_writable.js",_process:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/process/browser.js","core-util-is":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/node_modules/core-util-is/lib/util.js",inherits:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_writable.js":[function(e,t){(function(n){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(t,n){var i=e("./_stream_duplex");t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!t.objectMode,n instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new r(t,this),this.writable=!0,void x.call(this)):new o(t)}function s(e,t,i){var r=new Error("write after end");e.emit("error",r),n.nextTick(function(){i(r)})}function a(e,t,i,r){var o=!0;if(!(E.isBuffer(i)||E.isString(i)||E.isNullOrUndefined(i)||t.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),n.nextTick(function(){r(s)}),o=!1}return o}function l(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&E.isString(t)&&(t=new w(t,n)),t}function u(e,t,n,r,o){n=l(t,n,r),E.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new i(n,r,o)):c(e,t,!1,s,n,r,o),a}function c(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function p(e,t,i,r,o){i?n.nextTick(function(){t.pendingcb--,o(r)}):(t.pendingcb--,o(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if(h(i),t)p(e,i,r,t,o);else{var s=b(e,i);s||i.corked||i.bufferProcessing||!i.buffer.length||g(e,i),r?n.nextTick(function(){f(e,i,s,o)}):f(e,i,s,o)}}function f(e,t,n,i){n||m(e,t),t.pendingcb--,i(),y(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],i=0;i<t.buffer.length;i++)n.push(t.buffer[i].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var i=0;i<n.length;i++)t.pendingcb--,n[i](e)}),t.buffer=[]}else{for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,l=t.objectMode?1:o.length;if(c(e,t,!1,l,o,s,a),t.writing){i++;break}}i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}t.bufferProcessing=!1}function b(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function y(e,t){var n=b(e,t);return n&&(0===t.pendingcb?(v(e,t),t.finished=!0,e.emit("finish")):v(e,t)),n}function _(e,t,i){t.ending=!0,y(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=r;var E=e("core-util-is");E.inherits=e("inherits");var x=e("stream");E.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return E.isFunction(t)&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),E.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,e,n)&&(i.pendingcb++,r=u(this,i,e,t,n)),r},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||g(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var i=this._writableState;E.isFunction(e)?(n=e,e=null,t=null):E.isFunction(t)&&(n=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||_(this,i,n)}}).call(this,e("_process"))},{"./_stream_duplex":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_duplex.js",_process:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/process/browser.js",buffer:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/index.js","core-util-is":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/node_modules/core-util-is/lib/util.js",inherits:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js",stream:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/stream-browserify/index.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_readable.js":[function(e,t){(function(n){function i(t,n){var i=e("./_stream_duplex");t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(B||(B=e("string_decoder/").StringDecoder),this.decoder=new B(t.encoding),this.encoding=t.encoding)}function r(t){return e("./_stream_duplex"),this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void S.call(this)):new r(t)}function o(e,t,n,i,r){var o=u(t,n);if(o)e.emit("error",o);else if(C.isNullOrUndefined(n))t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||r||i||(n=t.decoder.write(n)),r||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&p(e)),d(e,t);else r||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=P)e=P;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||C.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return C.isBuffer(t)||C.isString(t)||C.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,p(e)}function p(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){h(e)}):h(e))}function h(e){R("emit readable"),e.emit("readable"),v(e)}function d(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){f(e,t)}))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}function g(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){b(e,t)}))}function b(e,t){t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;if(R("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function y(e,t){var n,i=t.buffer,r=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!e||e>=r)n=o?i.join(""):k.concat(i,r),i.length=0;else if(e<i[0].length){var a=i[0];n=a.slice(0,e),i[0]=a.slice(e)}else if(e===i[0].length)n=i.shift();else{n=o?"":new k(e);for(var l=0,u=0,c=i.length;c>u&&e>l;u++){var a=i[0],p=Math.min(e-l,a.length);o?n+=a.slice(0,p):a.copy(n,l,0,p),p<a.length?i[0]=a.slice(p):i.shift(),l+=p}}return n}function _(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function E(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}t.exports=r;var x=e("isarray"),k=e("buffer").Buffer;r.ReadableState=i;var T=e("events").EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var S=e("stream"),C=e("core-util-is");C.inherits=e("inherits");var B,R=e("util");R=R&&R.debuglog?R.debuglog("stream"):function(){},C.inherits(r,S),r.prototype.push=function(e,t){var n=this._readableState;return C.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new k(e,t),t="")),o(this,n,e,t,!1)},r.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},r.prototype.setEncoding=function(t){return B||(B=e("string_decoder/").StringDecoder),this._readableState.decoder=new B(t),this._readableState.encoding=t,this};var P=8388608;r.prototype.read=function(e){R("read",e);var t=this._readableState,n=e;if((!C.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?_(this):p(this),null;if(e=l(e,t),0===e&&t.ended)return 0===t.length&&_(this),null;var i=t.needReadable;R("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,R("length less than watermark",i)),(t.ended||t.reading)&&(i=!1,R("reading or ended",i)),i&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=l(n,t));var r;return r=e>0?y(e,t):null,C.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&_(this),C.isNull(r)||this.emit("data",r),r},r.prototype._read=function(){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(e,t){function i(e){R("onunpipe"),e===p&&o()}function r(){R("onend"),e.end()}function o(){R("cleanup"),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",g),e.removeListener("error",a),e.removeListener("unpipe",i),p.removeListener("end",r),p.removeListener("end",o),p.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){R("ondata");var n=e.write(t);!1===n&&(R("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,p.pause())}function a(t){R("onerror",t),c(),e.removeListener("error",a),0===T.listenerCount(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",u),c()}function u(){R("onfinish"),e.removeListener("close",l),c()}function c(){R("unpipe"),p.unpipe(e)}var p=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,R("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,f=d?r:o;h.endEmitted?n.nextTick(f):p.once("end",f),e.on("unpipe",i);var g=m(p);return e.on("drain",g),p.on("data",s),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",l),e.once("finish",u),e.emit("pipe",p),h.flowing||(R("pipe resume"),p.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=E(t.pipes,e);return-1===r?this:(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},r.prototype.on=function(e,t){var i=S.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&p(this,r);else{var o=this;n.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,e.reading||(R("resume read 0"),this.read(0)),g(this,e)),this},r.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(R("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(R("wrapped data"),t.decoder&&(r=t.decoder.write(r)),r&&(t.objectMode||r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)C.isFunction(e[r])&&C.isUndefined(this[r])&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){R("wrapped _read",t),n&&(n=!1,e.resume())},i},r._fromList=y}).call(this,e("_process"))},{"./_stream_duplex":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/lib/_stream_duplex.js",_process:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/process/browser.js",buffer:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/index.js","core-util-is":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/node_modules/core-util-is/lib/util.js",events:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/events/events.js",inherits:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js",isarray:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/isarray/index.js",stream:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/stream-browserify/index.js","string_decoder/":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/string_decoder/index.js",util:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/browser-resolve/empty.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/string_decoder/index.js":[function(e,t,n){function i(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,l=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},{buffer:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/index.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/readable-stream/node_modules/core-util-is/lib/util.js":[function(e,t,n){(function(e){function t(e){return Array.isArray(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function c(e){return p(e)&&"[object RegExp]"===b(e)}function p(e){return"object"==typeof e&&null!==e}function h(e){return p(e)&&"[object Date]"===b(e)}function d(e){return p(e)&&("[object Error]"===b(e)||e instanceof Error)
}function f(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(t){return e.isBuffer(t)}function b(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=i,n.isNull=r,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=l,n.isUndefined=u,n.isRegExp=c,n.isObject=p,n.isDate=h,n.isError=d,n.isFunction=f,n.isPrimitive=m,n.isBuffer=g}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":[function(e,t){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/isarray/index.js":[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/index.js":[function(e,t,n){(function(t){function i(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):l(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function s(e,t){if(e=m(e,0>t?0:0|g(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|v(t,n);return e=m(e,i),e.write(t,n),e}function l(e,t){if(o.isBuffer(t))return u(e,t);if(K(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return p(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?d(e,t):f(e,t)}function u(e,t){var n=0|g(t.length);return e=m(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|g(t.length);e=m(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function p(e,t){var n=0|g(t.length);e=m(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function h(e,t){return o.TYPED_ARRAY_SUPPORT?(t.byteLength,e=o._augment(new Uint8Array(t))):e=p(e,new Uint8Array(t)),e}function d(e,t){var n=0|g(t.length);e=m(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function f(e,t){var n,i=0;"Buffer"===t.type&&K(t.data)&&(n=t.data,i=0|g(n.length)),e=m(e,i);for(var r=0;i>r;r+=1)e[r]=255&n[r];return e}function m(e,t){o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t)),e.__proto__=o.prototype):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=o.poolSize>>>1;return n&&(e.parent=J),e}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function b(e,t){if(!(this instanceof b))return new b(e,t);var n=new o(e,t);return delete n.parent,n}function v(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return H(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){var i=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return R(this,t,n);case"binary":return P(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function _(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function w(e,t,n,i){return $(H(t,e.length-n),e,n,i)}function E(e,t,n,i){return $(q(t),e,n,i)}function x(e,t,n,i){return E(e,t,n,i)}function k(e,t,n,i){return $(G(t),e,n,i)}function T(e,t,n,i){return $(W(t,e.length-n),e,n,i)}function S(e,t,n){return Y.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var l,u,c,p;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[r+1],128===(192&l)&&(p=(31&o)<<6|63&l,p>127&&(s=p));break;case 3:l=e[r+1],u=e[r+2],128===(192&l)&&128===(192&u)&&(p=(15&o)<<12|(63&l)<<6|63&u,p>2047&&(55296>p||p>57343)&&(s=p));break;case 4:l=e[r+1],u=e[r+2],c=e[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(p=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,p>65535&&1114112>p&&(s=p))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return B(i)}function B(e){var t=e.length;if(Q>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Q));return n}function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(127&e[r]);return i}function P(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(e[r]);return i}function j(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;o++)r+=z(e[o]);return r}function I(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function A(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,i,r,s){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>r||s>t)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function N(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function L(e,t,n,i,r,o){if(t>r||o>t)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function D(e,t,n,i,r){return r||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,r){return r||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,i,52,8),n+8}function U(e){if(e=V(e).replace(et,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;i>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function G(e){return Y.toByteArray(U(e))}function $(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}var Y=e("base64-js"),X=e("ieee754"),K=e("is-array");n.Buffer=o,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var J={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,s=Math.min(n,i);s>r&&e[r]===t[r];)++r;return r!==s&&(n=e[r],i=t[r]),i>n?-1:n>i?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new o(t),r=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(i,r),r+=s.length}return i},o.byteLength=v,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var i=-1,r=0;n+r<e.length;r++)if(e[n+r]===t[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===t.length)return n+i}else i=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=t,t=0|n,n=r}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var i;if(o.TYPED_ARRAY_SUPPORT)i=o._augment(this.subarray(e,t));else{var r=t-e;i=new o(r,void 0);for(var s=0;r>s;s++)i[s]=this[s+e]}return i.length&&(i.parent=this.parent||this),i},o.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},o.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},o.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),X.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),X.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),X.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),X.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,i){e=+e,t=0|t,n=0|n,i||M(this,e,t,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,i){e=+e,t=0|t,n=0|n,i||M(this,e,t,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||M(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,s=i-n;if(this===e&&t>n&&i>t)for(r=s-1;r>=0;r--)e[r+t]=this[r+n];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(r=0;s>r;r++)e[r+t]=this[r+n];else e._set(this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;n>i;i++)this[i]=e;else{var r=H(e.toString()),o=r.length;for(i=t;n>i;i++)this[i]=r[i%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=Z.get,e.set=Z.set,e.write=Z.write,e.toString=Z.toString,e.toLocaleString=Z.toString,e.toJSON=Z.toJSON,e.equals=Z.equals,e.compare=Z.compare,e.indexOf=Z.indexOf,e.copy=Z.copy,e.slice=Z.slice,e.readUIntLE=Z.readUIntLE,e.readUIntBE=Z.readUIntBE,e.readUInt8=Z.readUInt8,e.readUInt16LE=Z.readUInt16LE,e.readUInt16BE=Z.readUInt16BE,e.readUInt32LE=Z.readUInt32LE,e.readUInt32BE=Z.readUInt32BE,e.readIntLE=Z.readIntLE,e.readIntBE=Z.readIntBE,e.readInt8=Z.readInt8,e.readInt16LE=Z.readInt16LE,e.readInt16BE=Z.readInt16BE,e.readInt32LE=Z.readInt32LE,e.readInt32BE=Z.readInt32BE,e.readFloatLE=Z.readFloatLE,e.readFloatBE=Z.readFloatBE,e.readDoubleLE=Z.readDoubleLE,e.readDoubleBE=Z.readDoubleBE,e.writeUInt8=Z.writeUInt8,e.writeUIntLE=Z.writeUIntLE,e.writeUIntBE=Z.writeUIntBE,e.writeUInt16LE=Z.writeUInt16LE,e.writeUInt16BE=Z.writeUInt16BE,e.writeUInt32LE=Z.writeUInt32LE,e.writeUInt32BE=Z.writeUInt32BE,e.writeIntLE=Z.writeIntLE,e.writeIntBE=Z.writeIntBE,e.writeInt8=Z.writeInt8,e.writeInt16LE=Z.writeInt16LE,e.writeInt16BE=Z.writeInt16BE,e.writeInt32LE=Z.writeInt32LE,e.writeInt32BE=Z.writeInt32BE,e.writeFloatLE=Z.writeFloatLE,e.writeFloatBE=Z.writeFloatBE,e.writeDoubleLE=Z.writeDoubleLE,e.writeDoubleBE=Z.writeDoubleBE,e.fill=Z.fill,e.inspect=Z.inspect,e.toArrayBuffer=Z.toArrayBuffer,e};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js",ieee754:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","is-array":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js":[function(e,t){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js":[function(e,t,n){n.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,p=n?r-1:0,h=n?-1:1,d=e[t+p];for(p+=h,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+e[t+p],p+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?0/0:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=u}return(d?-1:1)*s*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,p=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+p>=1?h/l:h*Math.pow(2,1-p),t*l>=2&&(s++,l/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(t*l-1)*Math.pow(2,r),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,r),s=0));r>=8;e[n+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*m}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js":[function(e,t,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===p?62:t===a||t===h?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(e){function n(e){u[p++]=e}var i,r,s,a,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new o(3*e.length/4-l),s=l>0?e.length-4:e.length;var p=0;for(i=0,r=0;s>i;i+=4,r+=3)a=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===l?(a=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4,n(255&a)):1===l&&(a=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2,n(a>>8&255),n(255&a)),u}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,o,s,a=e.length%3,l="";for(r=0,s=e.length-a;s>r;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],l+=n(o);switch(a){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),p="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/browser-resolve/empty.js":[function(e,t,n){arguments[4]["/home/ubuntu/staging/apps/node_modules/browserify/lib/_empty.js"][0].apply(n,arguments)},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/events/events.js":[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),l=1;r>l;l++)a[l-1]=arguments[l];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),l=1;r>l;l++)a[l-1]=arguments[l];for(u=n.slice(),r=u.length,l=0;r>l;l++)u[l].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/inherits/inherits_browser.js":[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],"/home/ubuntu/staging/apps/build/js/assetManagement/show.js":[function(e,t){"use strict";var n=e("./ImagePicker"),i=e("../StudioApp").singleton;t.exports=function(e,t){var r=document.createElement("div"),o=e&&"function"==typeof e,s=i.createModalDialog({contentDiv:r,defaultBtnSelector:"again-button",id:"manageAssetsModal"});ReactDOM.render(React.createElement(n,{typeFilter:t,channelId:dashboard.project.getCurrentId(),uploadsEnabled:!dashboard.project.exceedsAbuseThreshold(),assetChosen:o?function(t){s.hide(),e(t)}:null}),r),s.show()}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./ImagePicker":"/home/ubuntu/staging/apps/build/js/assetManagement/ImagePicker.jsx"}],"/home/ubuntu/staging/apps/build/js/assetManagement/ImagePicker.jsx":[function(e,t){"use strict";var n=e("./AssetManager"),i=e("../color"),r=window.dashboard.IconLibrary,o=e("../applab/constants").ICON_PREFIX,s=React.createClass({displayName:"ImagePicker",propTypes:{assetChosen:React.PropTypes.func,typeFilter:React.PropTypes.string,channelId:React.PropTypes.string.isRequired,uploadsEnabled:React.PropTypes.bool.isRequired},getInitialState:function(){return{mode:"files"}},getAssetNameWithPrefix:function(e){this.props.assetChosen(o+e)},setIconMode:function(){this.setState({mode:"icons"})},setFileMode:function(){this.setState({mode:"files"})},render:function(){var e,t="files"===this.state.mode,o={root:{margin:"0 0 0 -10px"},fileModeToggle:{"float":"left",margin:"0 20px 0 0",fontFamily:t?'"Gotham 5r"':null,color:t?null:"#999",fontSize:"16px",cursor:"pointer"},iconModeToggle:{margin:"0",fontSize:"16px",fontFamily:t?null:'"Gotham 5r"',color:t?"#999":null,cursor:"pointer"},divider:{borderColor:i.purple,margin:"5px 0"}},s=this.props.assetChosen?React.createElement("p",{className:"dialog-title"},"Choose Assets"):React.createElement("p",{className:"dialog-title"},"Manage Assets");this.props.assetChosen&&(e=React.createElement("div",null,React.createElement("p",{onClick:this.setFileMode,style:o.fileModeToggle},"My Files"),React.createElement("p",{onClick:this.setIconMode,style:o.iconModeToggle},"Icons"),React.createElement("hr",{style:o.divider})));var a=this.props.assetChosen&&"files"!==this.state.mode?React.createElement(r,{assetChosen:this.getAssetNameWithPrefix}):React.createElement(n,{assetChosen:this.props.assetChosen,typeFilter:this.props.typeFilter,channelId:this.props.channelId,uploadsEnabled:this.props.uploadsEnabled});return React.createElement("div",{className:"modal-content",style:o.root},s,e,a)}});t.exports=s},{"../applab/constants":"/home/ubuntu/staging/apps/build/js/applab/constants.js","../color":"/home/ubuntu/staging/apps/build/js/color.js","./AssetManager":"/home/ubuntu/staging/apps/build/js/assetManagement/AssetManager.jsx"}],"/home/ubuntu/staging/apps/build/js/assetManagement/AssetManager.jsx":[function(e,t){"use strict";function n(e){return a[e]||a.unknown}var i=e("../clientApi").assets,r=e("./AssetRow"),o=e("./AssetUploader"),s=e("./assetListStore"),a={403:"Quota exceeded. Please delete some files and try again.",413:"The file is too large.",415:"This type of file is not supported.",500:"The server responded with an error.",unknown:"An unknown error occurred."},l="This project has been reported for abusive content, so uploading new assets is disabled.",u=React.createClass({displayName:"AssetManager",propTypes:{assetChosen:React.PropTypes.func,typeFilter:React.PropTypes.string,channelId:React.PropTypes.string.isRequired,uploadsEnabled:React.PropTypes.bool.isRequired},getInitialState:function(){return{assets:null,statusMessage:this.props.uploadsEnabled?"":l}},componentWillMount:function(){i.ajax("GET","",this.onAssetListReceived,this.onAssetListFailure)},onAssetListReceived:function(e){s.reset(JSON.parse(e.responseText)),this.isMounted()&&this.setState({assets:s.list(this.props.typeFilter)})},onAssetListFailure:function(e){this.isMounted()&&this.setState({statusMessage:"Error loading asset list: "+n(e.status)})},onUploadStart:function(){this.setState({statusMessage:"Uploading..."})},onUploadDone:function(e){s.add(e),this.setState({assets:s.list(this.props.typeFilter),statusMessage:'File "'+e.filename+'" successfully uploaded!'})},onUploadError:function(e){this.setState({statusMessage:"Error uploading file: "+n(e)})},deleteAssetRow:function(e){this.setState({assets:s.remove(e),statusMessage:'File "'+e+'" successfully deleted!'})},render:function(){var e,t=React.createElement("div",null,React.createElement(o,{uploadsEnabled:this.props.uploadsEnabled,typeFilter:this.props.typeFilter,channelId:this.props.channelId,onUploadStart:this.onUploadStart,onUploadDone:this.onUploadDone,onUploadError:this.onUploadError}),React.createElement("span",{style:{margin:"0 10px"},id:"manage-asset-status"},this.state.statusMessage));if(null===this.state.assets)e=React.createElement("div",{style:{margin:"1em 0",textAlign:"center"}},React.createElement("i",{className:"fa fa-spinner fa-spin",style:{fontSize:"32px"}}));else if(0===this.state.assets.length)e=React.createElement("div",null,React.createElement("div",{style:{margin:"1em 0"}},'Your assets will appear here. Click "Upload File" to add a new asset for this project.'),t);else{var n=this.state.assets.map(function(e){var t=this.props.assetChosen&&this.props.assetChosen.bind(this,e.filename);return React.createElement(r,{key:e.filename,name:e.filename,type:e.category,size:e.size,onChoose:t,onDelete:this.deleteAssetRow.bind(this,e.filename)})
}.bind(this));e=React.createElement("div",null,React.createElement("div",{style:{maxHeight:"330px",overflowY:"scroll",margin:"1em 0"}},React.createElement("table",{style:{width:"100%"}},React.createElement("tbody",null,n))),t)}return e}});t.exports=u},{"../clientApi":"/home/ubuntu/staging/apps/build/js/clientApi.js","./AssetRow":"/home/ubuntu/staging/apps/build/js/assetManagement/AssetRow.jsx","./AssetUploader":"/home/ubuntu/staging/apps/build/js/assetManagement/AssetUploader.jsx","./assetListStore":"/home/ubuntu/staging/apps/build/js/assetManagement/assetListStore.js"}],"/home/ubuntu/staging/apps/build/js/assetManagement/AssetUploader.jsx":[function(e,t){"use strict";var n=React.createClass({displayName:"AssetUploader",propTypes:{onUploadStart:React.PropTypes.func.isRequired,onUploadDone:React.PropTypes.func.isRequired,channelId:React.PropTypes.string.isRequired,typeFilter:React.PropTypes.string,uploadsEnabled:React.PropTypes.bool.isRequired},componentDidMount:function(){var e=this.props;$(this.refs.uploader).fileupload({dataType:"json",url:"/v3/assets/"+e.channelId+"/",replaceFileInput:!1,add:function(t,n){e.onUploadStart(),n.submit()},done:function(t,n){e.onUploadDone(n.result)},error:function(t){e.onUploadError(t.status)}})},componentWillUnmount:function(){$(this.refs.uploader).fileupload("destroy")},fileUploadClicked:function(){this.refs.uploader.click()},render:function(){return React.createElement("span",null,React.createElement("input",{ref:"uploader",type:"file",style:{display:"none"},accept:(this.props.typeFilter||"*")+"/*"}),React.createElement("button",{onClick:this.fileUploadClicked,className:"share",id:"upload-asset",disabled:!this.props.uploadsEnabled},React.createElement("i",{className:"fa fa-upload"}),"\xa0Upload File"))}});t.exports=n},{}],"/home/ubuntu/staging/apps/build/js/assetManagement/AssetRow.jsx":[function(e,t){"use strict";var n=e("../clientApi").assets,i=e("./AssetThumbnail"),r=React.createClass({displayName:"AssetRow",propTypes:{name:React.PropTypes.string.isRequired,type:React.PropTypes.oneOf(["image","audio","video"]).isRequired,size:React.PropTypes.number,onChoose:React.PropTypes.func,onDelete:React.PropTypes.func.isRequired},getInitialState:function(){return{action:"normal",actionText:""}},confirmDelete:function(){this.setState({action:"confirming delete",actionText:""})},cancelDelete:function(){this.setState({action:"normal",actionText:""})},handleDelete:function(){this.setState({action:"deleting",actionText:""}),n.ajax("DELETE",this.props.name,this.props.onDelete,function(){this.setState({action:"confirming delete",actionText:"Error deleting file."})}.bind(this))},render:function(){var e,t;if(this.props.onChoose)t=React.createElement("button",{onClick:this.props.onChoose},"Choose");else{var r=(this.props.size/1e3).toFixed(2);t=r+" kb"}switch(this.state.action){case"normal":var o=n.basePath(this.props.name);e=React.createElement("td",{width:"250",style:{textAlign:"right"}},t,React.createElement("a",{href:o,target:"_blank",style:{backgroundColor:"transparent"}},React.createElement("button",null,React.createElement("i",{className:"fa fa-eye"}))),React.createElement("button",{className:"btn-danger",onClick:this.confirmDelete},React.createElement("i",{className:"fa fa-trash-o"})),this.state.actionText);break;case"confirming delete":e=React.createElement("td",{width:"250",style:{textAlign:"right"}},React.createElement("button",{className:"btn-danger",onClick:this.handleDelete},"Delete File"),React.createElement("button",{onClick:this.cancelDelete},"Cancel"),this.state.actionText);break;case"deleting":e=React.createElement("td",{width:"250",style:{textAlign:"right"}},React.createElement("i",{className:"fa fa-spinner fa-spin",style:{fontSize:"32px",marginRight:"15px"}}))}return React.createElement("tr",{className:"assetRow",onDoubleClick:this.props.onChoose},React.createElement(i,{type:this.props.type,name:this.props.name}),React.createElement("td",null,this.props.name),e)}});t.exports=r},{"../clientApi":"/home/ubuntu/staging/apps/build/js/clientApi.js","./AssetThumbnail":"/home/ubuntu/staging/apps/build/js/assetManagement/AssetThumbnail.jsx"}],"/home/ubuntu/staging/apps/build/js/assetManagement/AssetThumbnail.jsx":[function(e,t){"use strict";var n=e("../clientApi").assets,i={image:"fa fa-picture-o",audio:"fa fa-music",video:"fa fa-video-camera",unknown:"fa fa-question"},r={width:"auto",maxWidth:"100%",height:"auto",maxHeight:"100%",marginTop:"50%",transform:"translateY(-50%)",msTransform:"translateY(-50%)",WebkitTransform:"translateY(-50%)"},o={margin:"15px 0",fontSize:"32px"},s=React.createClass({displayName:"AssetThumbnail",propTypes:{name:React.PropTypes.string.isRequired,type:React.PropTypes.oneOf(["image","audio","video"]).isRequired},render:function(){var e=this.props.type,t=this.props.name;return React.createElement("td",{width:"80"},React.createElement("div",{className:"assetThumbnail",style:{width:"60px",height:"60px",margin:"10px auto",background:"#eee",border:"1px solid #ccc",textAlign:"center"}},"image"===e?React.createElement("img",{src:n.basePath(t),style:r}):React.createElement("i",{className:i[e]||i.unknown,style:o})))}});t.exports=s},{"../clientApi":"/home/ubuntu/staging/apps/build/js/clientApi.js"}],"/home/ubuntu/staging/apps/build/js/templates/ConnectedStudioAppWrapper.jsx":[function(e,t){"use strict";var n=e("react-redux").connect,i=e("./StudioAppWrapper");t.exports=n(function(e){return{assetUrl:e.level.assetUrl,isEmbedView:e.level.isEmbedView,isShareView:e.level.isShareView}})(i)},{"./StudioAppWrapper":"/home/ubuntu/staging/apps/build/js/templates/StudioAppWrapper.jsx","react-redux":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/index.js"}],"/home/ubuntu/staging/apps/build/js/templates/StudioAppWrapper.jsx":[function(e,t){"use strict";var n=e("../templates/RotateContainer"),i=React.createClass({displayName:"StudioAppWrapper",propTypes:{assetUrl:React.PropTypes.func.isRequired,isEmbedView:React.PropTypes.bool.isRequired,isShareView:React.PropTypes.bool.isRequired},requiresLandscape:function(){return!(this.props.isEmbedView||this.props.isShareView)},render:function(){return React.createElement("div",null,this.requiresLandscape()&&React.createElement(n,{assetUrl:this.props.assetUrl}),this.props.children,React.createElement("div",{className:"clear"}))}});t.exports=i},{"../templates/RotateContainer":"/home/ubuntu/staging/apps/build/js/templates/RotateContainer.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/RotateContainer.jsx":[function(e,t){"use strict";var n=e("../locale"),i=React.createClass({displayName:"RotateContainer",propTypes:{assetUrl:React.PropTypes.func.isRequired},render:function(){return React.createElement("div",{id:"rotateContainer",style:this.getStyle()},React.createElement("div",{id:"rotateText"},React.createElement("p",null,n.rotateText(),React.createElement("br",null),n.orientationLock())))},getStyle:function(){return{backgroundImage:"url("+this.props.assetUrl("media/turnphone_horizontal.png")+")"}}});t.exports=i},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js"}],"/home/ubuntu/staging/apps/build/js/templates/CodeWorkspaceContainer.jsx":[function(e,t){(function(n){"use strict";var i="undefined"!=typeof window?window.Radium:"undefined"!=typeof n?n.Radium:null,r=e("./ProtectedStatefulDiv"),o=(e("../utils"),{main:{position:"absolute",right:0,bottom:0,marginLeft:15},mainRtl:{right:void 0,left:0,marginRight:15},hidden:{display:"none"},codeWorkspace:{position:"absolute",left:0,right:0,bottom:0,top:0,border:"none",borderTop:"1px solid #ddd",overflow:"hidden",zIndex:0},noVisualization:{left:0,marginLeft:0},noVisualizationRtl:{right:0}}),s=React.createClass({displayName:"CodeWorkspaceContainer",propTypes:{topMargin:React.PropTypes.number.isRequired,hidden:React.PropTypes.bool,isRtl:React.PropTypes.bool.isRequired,noVisualization:React.PropTypes.bool.isRequired,generateCodeWorkspaceHtml:React.PropTypes.func.isRequired,onSizeChange:React.PropTypes.func},componentDidUpdate:function(e){this.props.onSizeChange&&this.props.topMargin!==e.topMargin&&this.props.onSizeChange()},render:function(){var e=[o.main,{top:this.props.topMargin},this.props.noVisualization&&o.noVisualization,this.props.isRtl&&o.mainRtl,this.props.noVisualization&&this.props.isRtl&&o.noVisualizationRtl,this.props.hidden&&o.hidden];return React.createElement("div",{style:e,className:"editor-column"},React.createElement(r,{id:"codeWorkspace",style:o.codeWorkspace},React.createElement(r,{id:"codeWorkspaceWrapper",contentFunction:this.props.generateCodeWorkspaceHtml}),React.createElement(r,{id:"designWorkspace",style:o.hidden})))}});t.exports=i(s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./ProtectedStatefulDiv":"/home/ubuntu/staging/apps/build/js/templates/ProtectedStatefulDiv.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/ProtectedStatefulDiv.jsx":[function(e,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i=React.createClass({displayName:"ProtectedStatefulDiv",propTypes:{contentFunction:React.PropTypes.func},shouldComponentUpdate:function(){return!1},componentDidMount:function(){"function"==typeof this.props.contentFunction&&(this.refs.root.innerHTML=this.props.contentFunction())},componentWillUnmount:function(){throw new Error("Unmounting a ProtectedStatefulDiv is not allowed.")},render:function(){return React.createElement("div",n({},this.props,{ref:"root"}))}});t.exports=i},{}],"/home/ubuntu/staging/apps/build/js/templates/ToggleGroup.jsx":[function(e,t){"use strict";var n=e("./ToggleButton"),i=React.createClass({displayName:"ToggleGroup",propTypes:{selected:React.PropTypes.string.isRequired,onChange:React.PropTypes.func.isRequired,children:function(e,t,n){var i,r=e[t];return React.Children.count(r)<1&&(i=new Error(n+" must have at least one child button.")),React.Children.forEach(r,function(e){"button"!==e.type&&(i=new Error(n+" should only have buttons as child elements."))}),i}},setSelected:function(e){this.props.onChange(e)},render:function(){return React.createElement("span",null,this.renderChildren())},renderChildren:function(){var e=React.Children.count(this.props.children);return React.Children.map(this.props.children,function(t,i){return React.createElement(n,{id:t.props.id,active:t.props.value===this.props.selected,first:0===i,last:i===e-1,onClick:this.setSelected.bind(this,t.props.value)},t.props.children)},this)}});t.exports=i},{"./ToggleButton":"/home/ubuntu/staging/apps/build/js/templates/ToggleButton.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/ToggleButton.jsx":[function(e,t){"use strict";var n=e("./ToggleButtonStyles"),i=React.createClass({displayName:"ToggleButton",propTypes:{id:React.PropTypes.string,active:React.PropTypes.bool.isRequired,first:React.PropTypes.bool,last:React.PropTypes.bool,onClick:React.PropTypes.func.isRequired},render:function(){return React.createElement("button",{id:this.props.id,style:this.getStyle(),className:"no-outline",onClick:this.props.onClick},this.props.children)},getStyle:function(){return $.extend({},n.buttonStyle,n.toggleButtonStyle,this.props.active?n.activeStyle:n.inactiveStyle,this.props.first?n.firstButtonStyle:null,this.props.last?n.lastButtonStyle:null)}});t.exports=i},{"./ToggleButtonStyles":"/home/ubuntu/staging/apps/build/js/templates/ToggleButtonStyles.js"}],"/home/ubuntu/staging/apps/build/js/templates/ToggleButtonStyles.js":[function(e,t){"use strict";var n=e("../color");t.exports={buttonStyle:{display:"inline-block",verticalAlign:"top",border:"1px solid "+n.light_gray,margin:"0 0 8px 0",padding:"2px 6px",fontSize:14},toggleButtonStyle:{borderRightWidth:"0 !important",borderRadius:0},firstButtonStyle:{borderBottomLeftRadius:4,borderTopLeftRadius:4},lastButtonStyle:{borderRightWidth:"1px !important",borderBottomRightRadius:4,borderTopRightRadius:4},activeStyle:{backgroundColor:"#ffa000",color:"#fff",boxShadow:"2px 2px 5px "+n.shadow+" inset"},inactiveStyle:{backgroundColor:"#fff",color:n.light_gray,boxShadow:"0px 1px 5px "+n.shadow},hiddenStyle:{display:"none"},iconStyle:{margin:"0 0.3em"}}},{"../color":"/home/ubuntu/staging/apps/build/js/color.js"}],"/home/ubuntu/staging/apps/node_modules/react-redux/lib/index.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0,n.connect=n.Provider=void 0;var r=e("./components/Provider"),o=i(r),s=e("./components/connect"),a=i(s);n.Provider=o["default"],n.connect=a["default"]},{"./components/Provider":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/components/Provider.js","./components/connect":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/components/connect.js"}],"/home/ubuntu/staging/apps/node_modules/react-redux/lib/components/connect.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e.displayName||e.name||"Component"}function l(e,t){return x["default"](y["default"](e),"`%sToProps` must return an object. Instead received %s.",t?"mapDispatch":"mapState",e),e}function u(e,t,n){function i(e,t,n){var i=v(e,t,n);return x["default"](y["default"](i),"`mergeProps` must return an object. Instead received %s.",i),i}var u=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],h=Boolean(e),f=e||k,g=y["default"](t)?b["default"](t):t||T,v=n||S,_=v!==S,E=u.pure,B=void 0===E?!0:E,R=u.withRef,P=void 0===R?!1:R,j=C++;return function(e){var t=function(t){function n(e,i){r(this,n);var s=o(this,t.call(this,e,i));s.version=j,s.store=e.store||i.store,x["default"](s.store,'Could not find "store" in either the context or '+('props of "'+s.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+s.constructor.displayName+'".'));var a=s.store.getState();return s.state={storeState:a},s.clearCache(),s}return s(n,t),n.prototype.shouldComponentUpdate=function(){return!B||this.haveOwnPropsChanged||this.hasStoreStateChanged},n.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),i=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return l(i)},n.prototype.configureFinalMapState=function(e,t){var n=f(e.getState(),t),i="function"==typeof n;return this.finalMapStateToProps=i?n:f,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,i?this.computeStateProps(e,t):l(n)},n.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,i=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return l(i,!0)},n.prototype.configureFinalMapDispatch=function(e,t){var n=g(e.dispatch,t),i="function"==typeof n;return this.finalMapDispatchToProps=i?n:g,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,i?this.computeDispatchProps(e,t):l(n,!0)},n.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return this.stateProps&&m["default"](e,this.stateProps)?!1:(this.stateProps=e,!0)},n.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&m["default"](e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},n.prototype.updateMergedPropsIfNeeded=function(){var e=i(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&_&&m["default"](e,this.mergedProps)?!1:(this.mergedProps=e,!0)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){h&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillReceiveProps=function(e){B&&m["default"](e,this.props)||(this.haveOwnPropsChanged=!0)},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},n.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},n.prototype.handleChange=function(){if(this.unsubscribe){var e=this.state.storeState,t=this.store.getState();B&&e===t||(this.hasStoreStateChanged=!0,this.setState({storeState:t}))}},n.prototype.getWrappedInstance=function(){return x["default"](P,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,i=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var r=!0,o=!0;B&&i&&(r=n||t&&this.doStatePropsDependOnOwnProps,o=t&&this.doDispatchPropsDependOnOwnProps);var s=!1,a=!1;r&&(s=this.updateStatePropsIfNeeded()),o&&(a=this.updateDispatchPropsIfNeeded());var l=!0;return l=s||a||t?this.updateMergedPropsIfNeeded():!1,!l&&i?i:(this.renderedElement=P?p.createElement(e,c({},this.mergedProps,{ref:"wrappedInstance"})):p.createElement(e,this.mergedProps),this.renderedElement)},n}(p.Component);return t.displayName="Connect("+a(e)+")",t.WrappedComponent=e,t.contextTypes={store:d["default"]},t.propTypes={store:d["default"]},w["default"](t,e)}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};n.__esModule=!0,n["default"]=u;var p=window.React,h=e("../utils/storeShape"),d=i(h),f=e("../utils/shallowEqual"),m=i(f),g=e("../utils/wrapActionCreators"),b=i(g),v=e("lodash/isPlainObject"),y=i(v),_=e("hoist-non-react-statics"),w=i(_),E=e("invariant"),x=i(E),k=function(){return{}},T=function(e){return{dispatch:e}},S=function(e,t,n){return c({},n,e,t)},C=0},{"../utils/shallowEqual":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/shallowEqual.js","../utils/storeShape":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/storeShape.js","../utils/wrapActionCreators":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/wrapActionCreators.js","hoist-non-react-statics":"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/hoist-non-react-statics/index.js",invariant:"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/invariant/browser.js","lodash/isPlainObject":"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/isPlainObject.js"}],"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/isPlainObject.js":[function(e,t){function n(e){if(!r(e)||u.call(e)!=o||i(e))return!1;var t=c(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&a.call(n)==l}var i=e("./_isHostObject"),r=e("./isObjectLike"),o="[object Object]",s=Object.prototype,a=Function.prototype.toString,l=a.call(Object),u=s.toString,c=Object.getPrototypeOf;t.exports=n},{"./_isHostObject":"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/_isHostObject.js","./isObjectLike":"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/isObjectLike.js"}],"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/isObjectLike.js":[function(e,t){function n(e){return!!e&&"object"==typeof e}t.exports=n},{}],"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/_isHostObject.js":[function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}t.exports=n},{}],"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/invariant/browser.js":[function(e,t){"use strict";var n=function(e,t,n,i,r,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,s,a],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=n},{}],"/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/hoist-non-react-statics/index.js":[function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};t.exports=function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;++o)if(!n[r[o]]&&!i[r[o]])try{e[r[o]]=t[r[o]]}catch(s){}return e}},{}],"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/wrapActionCreators.js":[function(e,t,n){"use strict";function i(e){return function(t){return r.bindActionCreators(e,t)}}n.__esModule=!0,n["default"]=i;var r=e("redux")},{redux:"/home/ubuntu/staging/apps/node_modules/redux/lib/index.js"}],"/home/ubuntu/staging/apps/node_modules/redux/lib/index.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0,n.compose=n.applyMiddleware=n.bindActionCreators=n.combineReducers=n.createStore=void 0;var r=e("./createStore"),o=i(r),s=e("./combineReducers"),a=i(s),l=e("./bindActionCreators"),u=i(l),c=e("./applyMiddleware"),p=i(c),h=e("./compose"),d=i(h),f=e("./utils/warning");i(f),n.createStore=o["default"],n.combineReducers=a["default"],n.bindActionCreators=u["default"],n.applyMiddleware=p["default"],n.compose=d["default"]},{"./applyMiddleware":"/home/ubuntu/staging/apps/node_modules/redux/lib/applyMiddleware.js","./bindActionCreators":"/home/ubuntu/staging/apps/node_modules/redux/lib/bindActionCreators.js","./combineReducers":"/home/ubuntu/staging/apps/node_modules/redux/lib/combineReducers.js","./compose":"/home/ubuntu/staging/apps/node_modules/redux/lib/compose.js","./createStore":"/home/ubuntu/staging/apps/node_modules/redux/lib/createStore.js","./utils/warning":"/home/ubuntu/staging/apps/node_modules/redux/lib/utils/warning.js"}],"/home/ubuntu/staging/apps/node_modules/redux/lib/combineReducers.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=t&&t.type,i=n&&'"'+n.toString()+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+i+". To ignore an action, you must explicitly return the previous state."}function o(e){Object.keys(e).forEach(function(t){var n=e[t],i=n(void 0,{type:a.ActionTypes.INIT});if("undefined"==typeof i)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var r="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:r}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+a.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function s(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var s=t[i];"function"==typeof e[s]&&(n[s]=e[s])}var a,l=Object.keys(n);try{o(n)}catch(u){a=u}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(a)throw a;for(var i=!1,o={},s=0;s<l.length;s++){var u=l[s],c=n[u],p=e[u],h=c(p,t);if("undefined"==typeof h){var d=r(u,t);throw new Error(d)}o[u]=h,i=i||h!==p}return i?o:e}}n.__esModule=!0,n["default"]=s;var a=e("./createStore"),l=e("lodash/isPlainObject"),u=(i(l),e("./utils/warning"));i(u)},{"./createStore":"/home/ubuntu/staging/apps/node_modules/redux/lib/createStore.js","./utils/warning":"/home/ubuntu/staging/apps/node_modules/redux/lib/utils/warning.js","lodash/isPlainObject":"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/isPlainObject.js"}],"/home/ubuntu/staging/apps/node_modules/redux/lib/utils/warning.js":[function(e,t,n){"use strict";function i(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}n.__esModule=!0,n["default"]=i},{}],"/home/ubuntu/staging/apps/node_modules/redux/lib/createStore.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){function i(){f===d&&(f=d.slice())}function o(){return h}function l(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return i(),f.push(e),function(){if(t){t=!1,i();var n=f.indexOf(e);f.splice(n,1)}}}function u(e){if(!s["default"](e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw new Error("Reducers may not dispatch actions.");try{m=!0,h=p(h,e)}finally{m=!1}for(var t=d=f,n=0;n<t.length;n++)t[n]();return e}function c(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");p=e,u({type:a.INIT})}if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var p=e,h=t,d=[],f=d,m=!1;return u({type:a.INIT}),{dispatch:u,subscribe:l,getState:o,replaceReducer:c}}n.__esModule=!0,n.ActionTypes=void 0,n["default"]=r;var o=e("lodash/isPlainObject"),s=i(o),a=n.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/isPlainObject.js"}],"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/isPlainObject.js":[function(e,t,n){arguments[4]["/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/isPlainObject.js"][0].apply(n,arguments)},{"./_isHostObject":"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/_isHostObject.js","./isObjectLike":"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/isObjectLike.js"}],"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/isObjectLike.js":[function(e,t,n){arguments[4]["/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/isObjectLike.js"][0].apply(n,arguments)},{}],"/home/ubuntu/staging/apps/node_modules/redux/node_modules/lodash/_isHostObject.js":[function(e,t,n){arguments[4]["/home/ubuntu/staging/apps/node_modules/react-redux/node_modules/lodash/_isHostObject.js"][0].apply(n,arguments)},{}],"/home/ubuntu/staging/apps/node_modules/redux/lib/bindActionCreators.js":[function(e,t,n){"use strict";function i(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return i(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;o<n.length;o++){var s=n[o],a=e[s];"function"==typeof a&&(r[s]=i(a,t))}return r}n.__esModule=!0,n["default"]=r},{}],"/home/ubuntu/staging/apps/node_modules/redux/lib/applyMiddleware.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,i,r){var s=e(n,i,r),l=s.dispatch,u=[],c={getState:s.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=a["default"].apply(void 0,u)(s.dispatch),o({},s,{dispatch:l})}}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};n.__esModule=!0,n["default"]=r;var s=e("./compose"),a=i(s)},{"./compose":"/home/ubuntu/staging/apps/node_modules/redux/lib/compose.js"}],"/home/ubuntu/staging/apps/node_modules/redux/lib/compose.js":[function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length<=0?void 0:arguments[0];var e=t[t.length-1],n=t.slice(0,-1);return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}n.__esModule=!0,n["default"]=i},{}],"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/shallowEqual.js":[function(e,t,n){"use strict";function i(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!r.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}n.__esModule=!0,n["default"]=i},{}],"/home/ubuntu/staging/apps/node_modules/react-redux/lib/components/Provider.js":[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0,n["default"]=void 0;var a=window.React,l=e("../utils/storeShape"),u=i(l),c=function(e){function t(n,i){r(this,t);var s=o(this,e.call(this,n,i));return s.store=n.store,s}return s(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return a.Children.only(e)},t}(a.Component);n["default"]=c,c.propTypes={store:u["default"].isRequired,children:a.PropTypes.element.isRequired},c.childContextTypes={store:u["default"].isRequired}},{"../utils/storeShape":"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/storeShape.js"}],"/home/ubuntu/staging/apps/node_modules/react-redux/lib/utils/storeShape.js":[function(e,t,n){"use strict";n.__esModule=!0;var i=window.React;n["default"]=i.PropTypes.shape({subscribe:i.PropTypes.func.isRequired,dispatch:i.PropTypes.func.isRequired,getState:i.PropTypes.func.isRequired})},{}],"/home/ubuntu/staging/apps/build/js/applab/constants.js":[function(e,t){"use strict";t.exports={FOOTER_HEIGHT:30,APP_WIDTH:320,APP_HEIGHT:480,DESIGN_ELEMENT_ID_PREFIX:"design_",ICON_PREFIX:"icon://",ICON_PREFIX_REGEX:new RegExp("^icon://"),NEW_SCREEN:"New screen...",ApplabInterfaceMode:{CODE:"CODE",DESIGN:"DESIGN"}}},{}],"/home/ubuntu/staging/apps/build/js/appMain.js":[function(e,t){"use strict";var n=e("./utils"),i=n.getLodash(),r=e("./required_block_utils"),o=e("./StudioApp").singleton,s=e("./authoredHintUtils");window.__TestInterface={loadBlocks:i.bind(o.loadBlocks,o),arrangeBlockPosition:i.bind(o.arrangeBlockPosition,o),getDropletContents:function(){return i.bind(o.editor.getValue,o.editor)()},getDroplet:function(){return o.editor},ignoreOnBeforeUnload:!1};var a=e("./dom").addReadyListener,l=e("./blocksCommon");t.exports=function(e,t,i){if(i.levelId){var u=t[i.levelId];i.level=i.level||{},i.level.id=i.levelId;for(var c in i.level)u[c]=i.level[c];i.level.levelBuilderRequiredBlocks&&(u.requiredBlocks=r.makeTestsFromBuilderRequiredBlocks(i.level.levelBuilderRequiredBlocks)),i.level.levelBuilderRecommendedBlocks&&(u.recommendedBlocks=r.makeTestsFromBuilderRequiredBlocks(i.level.levelBuilderRecommendedBlocks)),i.level.authoredHints&&(u.authoredHints=s.generateAuthoredHints(i.level.authoredHints)),i.level=u
}if(o.configure(i),i.skin=i.skinsModule.load(o.assetUrl,i.skinId),o.isUsingBlockly()){var p={skin:i.skin,isK1:i.level&&i.level.isK1,level:i.level};i.level&&i.level.edit_blocks&&n.wrapNumberValidatorsForLevelBuilder(),l.install(Blockly,p),i.blocksModule.install(Blockly,p)}a(function(){i.readonly?e.initReadonly?e.initReadonly(i):o.initReadonly(i):(e.init(i),i.onInitialize&&i.onInitialize())})}},{"./StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./authoredHintUtils":"/home/ubuntu/staging/apps/build/js/authoredHintUtils.js","./blocksCommon":"/home/ubuntu/staging/apps/build/js/blocksCommon.js","./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./required_block_utils":"/home/ubuntu/staging/apps/build/js/required_block_utils.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/required_block_utils.js":[function(e,t,n){"use strict";function i(e){return{test:function(t){var n=Blockly.Xml.blockToDom(t,!0);return a(e,n)},blockDisplayXML:c.serialize(e)}}function r(e){var t,n=[],r=e.getElementsByTagName("statement")[0],o=r.getElementsByTagName("block")[0];do t=o.getElementsByTagName("next")[0],t&&o.removeChild(t),n.push(i(o)),t&&(o=t.getElementsByTagName("block")[0]);while(t);return n}function o(e){var t=e.querySelectorAll("mutation > arg").length,n=e.cloneNode(!0);return n.removeChild(n.lastChild),[{test:function(n){return n.type===e.getAttribute("type")?t===n.parameterNames_.length:!1},message:h.errorRequiredParamsMissing(),blockDisplayXML:"<xml></xml>"}]}function s(e,t){for(var n=e.querySelector("mutation").getAttribute("name"),i=e.querySelectorAll("arg"),r=[],o=0;o<i.length;o++)r.push(i[o].getAttribute("type"));var s=d.find(t.childNodes,function(e){if("functional_definition"!==e.getAttribute("type"))return!1;var t=e.querySelector('title[name="NAME"]');return t?t.textContent===n:!1});if(!s)throw new Error("No matching definition for functional_call");return[{test:function(e){if("functional_call"!==e.type||e.getCallName()!==n)return!1;var t=e.getParamTypes();return d.isEqual(t,r)},blockDisplayXML:c.serialize(s)+c.serialize(e)}]}function a(e,t){return e instanceof Element&&t instanceof Element?e.tagName.toLowerCase()!==t.tagName.toLowerCase()?!1:l(e,t)&&u(e,t)?!0:!1:e instanceof Text&&"???"===e.textContent?!0:e.isEqualNode(t)}function l(e,t){var n=d.reject(e.attributes,f.contains),i=d.reject(t.attributes,f.contains);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r],s=i[r];if(o.name!==s.name)return!1;if(o.value!==s.value)return!1}return!0}function u(e,t){var n=e.childNodes,i=t.childNodes;if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!a(n[r],i[r]))return!1;return!0}var c=e("./xml"),p=(e("./block_utils"),e("./utils")),h=e("./locale"),d=p.getLodash();n.makeMathNumber=function(e){return'<block type="math_number"><title name="NUM">'+e+"</title></block>"},n.simpleBlock=function(e){return{test:function(t){return t.type==e},type:e}},n.repeat=function(e){return{test:function(e){return"controls_repeat"==e.type},type:"controls_repeat",titles:{TIMES:e}}},n.repeatSimpleBlock=function(e){return{test:function(e){return"controls_repeat_simplified"==e.type},type:"controls_repeat_simplified",titles:{TIMES:e}}},n.makeTestsFromBuilderRequiredBlocks=function(e){var t=c.parseElement(e),n=[];return Array.prototype.forEach.call(t.childNodes,function(e){if(1===e.nodeType)switch(e.getAttribute("type")){case"pick_one":n.push(r(e));break;case"procedures_defnoreturn":case"procedures_defreturn":n.push(o(e));break;case"functional_definition":break;case"functional_call":n.push(s(e,t));break;default:n.push([i(e)])}}),n};var f=["deletable","movable","editable","inline","uservisible","usercreated","id"];f.contains=function(e){return-1!==f.indexOf(e.name)},n.blocksMatch=function(e,t){var i=e.type===t.type,r=n.blockTitlesMatch(e,t);return i&&r},n.blockTitlesMatch=function(e,t){var n=e.getTitles(),i=t.getTitles(),r=function(e,t){return e.name<t.name};n.sort(r),i.sort(r);for(var o=0;o<n.length||o<i.length;o++){var s=n[o],a=i[o];if(!s||!a||!m(s,a))return!1}return!0};var m=function(e,t){return t.name===e.name&&t.getValue()===e.getValue()}},{"./block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js","./xml":"/home/ubuntu/staging/apps/build/js/xml.js"}],"/home/ubuntu/staging/apps/build/js/blocksCommon.js":[function(e,t,n){"use strict";function i(e,t){e.JavaScript.controls_repeat_simplified=e.JavaScript.controls_repeat,e.JavaScript.controls_repeat_simplified_dropdown=e.JavaScript.controls_repeat,e.Blocks.controls_repeat_simplified={init:function(){this.setHelpUrl(e.Msg.CONTROLS_REPEAT_HELPURL),this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(e.Msg.CONTROLS_REPEAT_TITLE_REPEAT).appendTitle(new e.FieldTextInput("10",e.FieldTextInput.nonnegativeIntegerValidator),"TIMES"),this.appendStatementInput("DO").appendTitle(new e.FieldImage(t.repeatImage)),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.CONTROLS_REPEAT_TOOLTIP)}},e.Blocks.controls_repeat_simplified_dropdown={init:function(){this.setHelpUrl(e.Msg.CONTROLS_REPEAT_HELPURL),this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(e.Msg.CONTROLS_REPEAT_TITLE_REPEAT).appendTitle(new e.FieldDropdown,"TIMES"),this.appendStatementInput("DO").appendTitle(new e.FieldImage(t.repeatImage)),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.CONTROLS_REPEAT_TOOLTIP)}}}function r(e){e.JavaScript.controls_repeat_dropdown=e.JavaScript.controls_repeat,e.Blocks.controls_repeat_dropdown={init:function(){this.setHelpUrl(e.Msg.CONTROLS_REPEAT_HELPURL),this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(e.Msg.CONTROLS_REPEAT_TITLE_REPEAT).appendTitle(new e.FieldDropdown,"TIMES").appendTitle(e.Msg.CONTROLS_REPEAT_TITLE_TIMES),this.appendStatementInput("DO").appendTitle(e.Msg.CONTROLS_REPEAT_INPUT_DO),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.CONTROLS_REPEAT_TOOLTIP)}}}function o(e){e.JavaScript.math_number_dropdown=e.JavaScript.math_number,e.Blocks.math_number_dropdown={init:function(){this.setHelpUrl(e.Msg.MATH_NUMBER_HELPURL),this.setHSV(258,.35,.62),this.appendDummyInput().appendTitle(new e.FieldDropdown,"NUM"),this.setOutput(!0,Blockly.BlockValueType.NUMBER),this.setTooltip(e.Msg.MATH_NUMBER_TOOLTIP)}}}function s(e){e.Blocks.pick_one={init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle("Pick one (Use only in required blocks)"),this.appendStatementInput("PICK")}},e.JavaScript.pick_one=function(){return"\n"}}function a(e){e.Blocks.category={init:function(){this.setHSV(322,.9,.95),this.setInputsInline(!0),this.appendDummyInput().appendTitle("Category").appendTitle(new e.FieldTextInput("Name"),"CATEGORY"),this.setPreviousStatement(!1),this.setNextStatement(!1)}},e.JavaScript.category=function(){return"\n"}}function l(e,t,n){e.Blocks.when_run={helpUrl:"",init:function(){this.setHSV(39,1,.99),n?this.appendDummyInput().appendTitle(u.whenRun()).appendTitle(new e.FieldImage(t.runArrow)):this.appendDummyInput().appendTitle(u.whenRun()),this.setPreviousStatement(!1),this.setNextStatement(!0)},shouldBeGrayedOut:function(){return!1}},e.JavaScript.when_run=function(){return"\n"}}var u=e("./locale");n.install=function(e,t){var n=t.skin,u=t.isK1;i(e,n),r(e),o(e),s(e),a(e),l(e,n,u)}},{"./locale":"/home/ubuntu/staging/apps/build/js/locale.js"}],"/home/ubuntu/staging/apps/build/js/StudioApp.js":[function(e,t){(function(n){"use strict";function i(){var e=document.querySelector("#visualizationColumn.pin_bottom #belowVisualization");if(e){var t=document.getElementById("playSpaceHeader"),n=document.getElementById("visualization"),i=document.getElementById("gameButtons"),r=document.querySelector("#page-small-footer .small-footer-base"),o=0;t&&(o+=$(t).outerHeight(!0)),n&&(o+=$(n).outerHeight(!0)),i&&(o+=$(i).outerHeight(!0));var s=0;if(r){var a=$("#codeApp");s+=$(r).outerHeight(!0),s-=parseInt(a.css("bottom"),10)}e.style.top=o+"px",e.style.bottom=s+"px"}}function r(e,t){for(var n=0;n<e.children.length;n++)o(e.children[n],t)}function o(e,t){e.style.transform=t,e.style.msTransform=t,e.style.webkitTransform=t}function s(e,t){e.style.transformOrigin=t,e.style.msTransformOrigin=t,e.style.webkitTransformOrigin=t}function a(e){var t=e.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("x",t.x),n.setAttribute("y",t.y),n.setAttribute("width",t.width),n.setAttribute("height",t.height),n}var l,u=e("./acemode/mode-javascript_codeorg"),c=e("./color"),p=e("./xml").parseElement,h=e("./utils"),d=e("./dropletUtils"),f=h.getLodash(),m=e("./dom"),g=e("./constants.js"),b=e("./locale"),v=e("./block_utils"),y=e("./blockTooltips/DropletTooltipManager"),_=e("url"),w=e("./feedback"),E=e("./templates/VersionHistory"),x=e("./templates/alert"),k=e("./codegen"),T=e("./puzzleRatingUtils"),S=e("./logToCloud"),C=e("./authoredHints"),B=e("./templates/instructions/Instructions"),R=e("./templates/DialogButtons"),P=e("./templates/WireframeSendToPhone"),j=e("./clientApi").assets,I=e("./assetManagement/assetPrefix"),A=e("./assetManagement/assetListStore"),M=e("./acemode/annotationList"),N="undefined"!=typeof window?window.marked:"undefined"!=typeof n?n.marked:null,O=900,L=320,D=400,F=200,U="en_us",V=500,z=function(){this.feedback_=new w(this),this.authoredHintsController_=new C(this),this.BASE_URL=void 0,this.LOCALE=U,this.enableShowCode=!0,this.editCode=!1,this.usingBlockly_=!0,this.cdoSounds=null,this.Dialog=null,this.editor=null,this.dropletTooltipManager=null,this.icon=void 0,this.smallIcon=void 0,this.winIcon=void 0,this.failureIcon=void 0,this.checkForEmptyBlocks_=!1,this.IDEAL_BLOCK_NUM=void 0,this.requiredBlocks_=[],this.maxRequiredBlocksToFlag_=1,this.recommendedBlocks_=[],this.maxRecommendedBlocksToFlag_=1,this.attempts=0,this.initTime=void 0,this.ResultType=g.ResultType,this.TestResults=g.TestResults,this.hideSource=!1,this.share=!1,this.centerEmbedded=!0,this.wireframeShare=!1,this.onAttempt=void 0,this.onContinue=void 0,this.onResetPressed=void 0,this.backToPreviousLevel=void 0,this.sendToPhone=void 0,this.enableShowBlockCount=!0,this.disableSocialShare=!1,this.noPadding=!1,this.MIN_WORKSPACE_HEIGHT=void 0};t.exports=z,z.singleton=new z,z.prototype.configure=function(e){this.BASE_URL=e.baseUrl,this.LOCALE=e.locale||this.LOCALE,this.editCode=e.level&&e.level.editCode,this.usingBlockly_=!this.editCode,e.isEditorless&&(this.editCode=!1,this.usingBlockly_=!1),this.cdoSounds=e.cdoSounds,this.Dialog=e.Dialog,this.assetUrl=f.bind(this.assetUrl_,this),this.maxVisualizationWidth=e.maxVisualizationWidth||D,this.minVisualizationWidth=e.minVisualizationWidth||F},z.prototype.hasInstructionsToShow=function(e){return!(!e.level.instructions&&!e.level.aniGifURL)},z.prototype.localeIsEnglish=function(){return this.LOCALE===U},z.prototype.init=function(t){t||(t={}),t.getCode=this.getCode.bind(this),l=t.copyrightStrings,t.isLegacyShare&&t.hideSource&&($("body").addClass("legacy-share-view"),m.isMobile()&&$("#main-logo").hide(),m.isIOS()&&!window.navigator.standalone&&addToHome.show(!0)),this.setConfigValues_(t),this.configureDom(t),t.usesAssets&&(I.init(t),j.ajax("GET","",function(e){A.reset(JSON.parse(e.responseText))},function(){})),t.hideSource&&this.handleHideSource_({containerId:t.containerId,embed:t.embed,level:t.level,level_source_id:t.level_source_id,phone_share_url:t.send_to_phone_url,sendToPhone:t.sendToPhone,twitter:t.twitter,app:t.app,isLegacyShare:t.isLegacyShare}),t.share&&this.handleSharing_({makeUrl:t.makeUrl,makeString:t.makeString,makeImage:t.makeImage,makeYourOwn:t.makeYourOwn}),this.authoredHintsController_.init(t.level.authoredHints,t.scriptId,t.serverLevelId),t.authoredHintViewRequestsUrl&&this.authoredHintsController_.submitHints(t.authoredHintViewRequestsUrl),t.puzzleRatingsUrl&&T.submitCachedPuzzleRatings(t.puzzleRatingsUrl),this.initTime=(new Date).getTime();var n=document.querySelector('meta[name="viewport"]');n&&this.fixViewportForSmallScreens_(n,t);var i=document.getElementById("show-code-header");i&&this.enableShowCode&&m.addClickTouchEvent(i,f.bind(function(){if(this.editCode){var e,n=!1,i=this.editor.currentlyUsingBlocks;try{e=this.editor.toggleBlocks()}catch(r){n=!0,e={error:r}}e&&e.error&&(S.addPageAction(S.PageAction.DropletTransitionError,{dropletError:!n,fromBlocks:i}),this.feedback_.showToggleBlocksError(this.Dialog)),this.onDropletToggle_()}else this.feedback_.showGeneratedCode(this.Dialog,t.appStrings)},this));var r=document.getElementById("blockCounter");if(r&&!this.enableShowBlockCount&&(r.style.display="none"),this.setIconsFromSkin(t.skin),t.level.instructionsIcon&&(this.icon=t.skin[t.level.instructionsIcon],this.winIcon=t.skin[t.level.instructionsIcon]),t.showInstructionsWrapper&&t.showInstructionsWrapper(function(){if(!t.showInstructionsInTopPane){var e=!!t.level.aniGifURL;this.showInstructionsDialog_(t.level,e,!1)}}.bind(this)),t.embed&&t.centerEmbedded){var o=!1,s=function y(){var e=document.getElementById("visualizationColumn"),t=e.offsetWidth,n=e.offsetHeight,i=L,r=Math.min(t/i,n/i),s=document.getElementById("visualization");s.style["transform-origin"]="left top",s.style["-webkit-transform"]="scale("+r+")",s.style["max-height"]=i*r+"px",s.style.display="block",e.style.width="",e.style.maxWidth=i+"px",o||(o=!0,y())},a=e("./ResizeSensor");a(document.getElementById("visualizationColumn"),s)}var u=function(){window.scrollTo(0,0)};window.addEventListener("orientationchange",u),u(),t.loadAudio&&t.loadAudio(),t.showInstructionsInTopPane||this.configureAndShowInstructions_(t),this.editCode&&this.handleEditCode_(t),this.isUsingBlockly()?this.handleUsingBlockly_(t):this.onResize();var c=document.getElementById("visualizationResizeBar");if(c){m.addMouseDownTouchEvent(c,f.bind(this.onMouseDownVizResizeBar,this)),document.body.addEventListener("mouseup",f.bind(this.onMouseUpVizResizeBar,this));var p=m.getTouchEventName("mouseup");p&&document.body.addEventListener(p,f.bind(this.onMouseUpVizResizeBar,this))}window.addEventListener("resize",f.bind(this.onResize,this)),this.reset(!0),this.setIdealBlockNumber_(),this.isUsingBlockly()&&(Blockly.mainBlockSpaceEditor.addChangeListener(f.bind(function(){this.updateBlockCount()},this)),t.level.openFunctionDefinition&&this.openFunctionDefinition_(t));var d=h.valueOr(t.skin.hideIconInClearPuzzle,!1),g=document.getElementById("clear-puzzle-header");g&&m.addClickTouchEvent(g,function(){this.feedback_.showClearPuzzleConfirmation(this.Dialog,d,function(){this.handleClearPuzzle(t)}.bind(this))}.bind(this));var v=document.getElementById("versions-header");v&&m.addClickTouchEvent(v,function(){var e=document.createElement("div"),n=this.createModalDialog({Dialog:this.Dialog,contentDiv:e,defaultBtnSelector:"again-button",id:"showVersionsModal"});ReactDOM.render(React.createElement(E,{handleClearPuzzle:this.handleClearPuzzle.bind(this,t)}),e),n.show()}.bind(this)),this.isUsingBlockly()&&Blockly.contractEditor&&Blockly.contractEditor.registerTestsFailedOnCloseHandler(function(){return this.feedback_.showSimpleDialog(this.Dialog,{headerText:void 0,bodyText:b.examplesFailedOnClose(),cancelText:b.ignore(),confirmText:b.tryAgain(),onConfirm:null,onCancel:function(){Blockly.contractEditor.hideIfOpen()}}),!0}.bind(this)),t.isLegacyShare&&t.hideSource&&this.setupLegacyShareView()},z.prototype.configureAndShowInstructions_=function(e){var t=document.getElementById("prompt"),n=document.getElementById("prompt2");if(e.level.instructions){var i=this.substituteInstructionImages(e.level.instructions,this.skin.instructions2ImageSubstitutions);$(t).html(i)}if(e.level.instructions2){var r=this.substituteInstructionImages(e.level.instructions2,this.skin.instructions2ImageSubstitutions);$(n).html(r),$(n).show()}if(this.hasInstructionsToShow(e)){var o=document.getElementById("prompt-icon");this.smallIcon&&(o.src=this.smallIcon,$("#prompt-icon-cell").show());var s=document.getElementById("bubble");this.authoredHintsController_.display(o,s,function(){this.showInstructionsDialog_(e.level,!1,!0)}.bind(this))}var a=document.getElementById("ani-gif-preview");if(e.level.aniGifURL){a.style.backgroundImage="url('"+e.level.aniGifURL+"')";var l=document.getElementById("prompt-table");l.className+=" with-ani-gif"}else{var u=document.getElementById("ani-gif-preview-wrapper");u.style.display="none"}},z.prototype.setupLegacyShareView=function(){var e=document.createElement("div");e.id="visualizationContainer";var t=document.getElementById("visualizationColumn");m.isMobile()&&$(e).width($(t).width()),$(e).append(t.children);var n=document.createElement("div");n.id="phoneFrameScreen",$(n).append(e),$(t).append(n),this.renderShareFooter_(n),m.isMobile&&$(window).resize(this.scaleLegacyShare),this.scaleLegacyShare()},z.prototype.scaleLegacyShare=function(){var e=document.getElementById("visualizationContainer"),t=document.getElementById("visualizationColumn"),n=document.getElementById("phoneFrameScreen"),i=$(e).width();if(m.isMobile()){var r=Math.min(window.innerWidth,window.innerHeight),a=Math.max(window.innerWidth,window.innerHeight);$(n).width(r),$(n).height(a),$(t).width(r)}var l=$(n).width(),u=l/i;s(e,"left top"),o(e,"scale("+u+")")},z.prototype.substituteInstructionImages=function(e,t){if(e)for(var n in t){var i=t[n],r='<span class="instructionsImageContainer"><img src="'+i+'" class="instructionsImage"/></span>',o=new RegExp("\\["+n+"\\]","g");e=e.replace(o,r)}return e},z.prototype.getCode=function(){if(!this.editCode)throw"getCode() requires editCode";return this.hideSource?this.startBlocks_:this.editor.getValue()},z.prototype.setIconsFromSkin=function(e){this.icon=e.staticAvatar,this.smallIcon=e.smallStaticAvatar,this.winIcon=e.winAvatar,this.failureIcon=e.failureAvatar},z.prototype.handleClearPuzzle=function(e){if(this.isUsingBlockly())Blockly.functionEditor&&Blockly.functionEditor.hideIfOpen(),Blockly.mainBlockSpace.clear(),this.setStartBlocks_(e,!1),e.level.openFunctionDefinition&&this.openFunctionDefinition_(e);else{var t="";e.level.startBlocks&&(t=e.level.startBlocks.replace(/\r\n/g,"\n")),this.editor.getValue(),this.editor.setValue(t),M.clearRuntimeAnnotations()}e.afterClearPuzzle&&e.afterClearPuzzle()},z.prototype.isUsingBlockly=function(){return this.usingBlockly_},z.prototype.handleSharing_=function(t){var n=document.getElementById("belowVisualization");if(m.isMobile()){var i=document.getElementById("slider-cell");if(i&&(i.style.display="none"),n){var r=document.getElementById("visualization");n.style.display="none",r.style.marginBottom="0px"}}var o=document.createElement("div");t.makeYourOwn?(o.innerHTML=e("./templates/makeYourOwn.html.ejs")({data:{makeUrl:t.makeUrl,makeString:t.makeString,makeImage:t.makeImage}}),this.noPadding&&(o.style.marginLeft="10px"),n.appendChild(o)):"undefined"==typeof t.makeYourOwn&&(o.innerHTML=e("./templates/learn.html.ejs")({assetUrl:this.assetUrl}),n.appendChild(o))},z.prototype.renderShareFooter_=function(e){var t=document.createElement("div");t.setAttribute("id","footerDiv"),e.appendChild(t);var n={i18nDropdown:"",copyrightInBase:!1,copyrightStrings:l,baseMoreMenuString:window.dashboard.i18n.t("footer.built_on_code_studio"),baseStyle:{paddingLeft:0,width:$("#visualization").width()},className:"dark",menuItems:[{text:window.dashboard.i18n.t("footer.try_hour_of_code"),link:"https://code.org/learn",newWindow:!0},{text:window.dashboard.i18n.t("footer.how_it_works"),link:location.href+"/edit",newWindow:!1},{text:window.dashboard.i18n.t("footer.copyright"),link:"#",copyright:!0},{text:window.dashboard.i18n.t("footer.tos"),link:"https://code.org/tos",newWindow:!0},{text:window.dashboard.i18n.t("footer.privacy"),link:"https://code.org/privacy",newWindow:!0}],phoneFooter:!0};ReactDOM.render(React.createElement(window.dashboard.SmallFooter,n),t)},z.prototype.assetUrl_=function(e){if(void 0===this.BASE_URL)throw new Error("StudioApp BASE_URL has not been set. Call configure() first");return this.BASE_URL+e},z.prototype.reset=function(){},z.prototype.runButtonClick=function(){},z.prototype.toggleRunReset=function(e){var t="run"===e;if("run"!==e&&"reset"!==e)throw"Unexpected input";var n=document.getElementById("runButton"),i=document.getElementById("resetButton");n.style.display=t?"inline-block":"none",n.disabled=!t,i.style.display=t?"none":"inline-block",i.disabled=t,$(".arrow").prop("disabled",t)},z.prototype.registerAudio=function(e){this.cdoSounds&&this.cdoSounds.register(e)},z.prototype.loadAudio=function(e,t){this.cdoSounds&&this.cdoSounds.registerByFilenamesAndID(e,t)},z.prototype.playAudio=function(e,t){if(this.cdoSounds){t=t||{};var n={volume:.5},i=h.extend(n,t);this.cdoSounds.play(e,i)}},z.prototype.stopLoopingAudio=function(e){this.cdoSounds&&this.cdoSounds.stopLoopingAudio(e)},z.prototype.inject=function(e,t){var n={assetUrl:this.assetUrl,rtl:this.isRtl(),toolbox:document.getElementById("toolbox"),trashcan:!0,customSimpleDialog:this.feedback_.showSimpleDialog.bind(this.feedback_,this.Dialog)};Blockly.inject(e,h.extend(n,t),this.cdoSounds)},z.prototype.isRtl=function(){var e=document.getElementsByTagName("head")[0];if(e&&e.parentElement){var t=e.parentElement.getAttribute("dir");return!(!t||"rtl"!==t.toLowerCase())}return!1},z.prototype.localeDirection=function(){return this.isRtl()?"rtl":"ltr"},z.prototype.initReadonly=function(e){Blockly.inject(document.getElementById("codeWorkspace"),{assetUrl:this.assetUrl,readOnly:!0,rtl:this.isRtl(),scrollbars:!1}),this.loadBlocks(e.blocks)},z.prototype.loadBlocks=function(e){var t=p(e);Blockly.Xml.domToBlockSpace(Blockly.mainBlockSpace,t)},z.prototype.arrangeBlockPosition=function(e,t){var n,i,r=p(e),o=r.childNodes||[];t=t||{};for(var s=0;s<o.length;s++)i=o[s],1===i.nodeType&&(n=i.getAttribute("type"),t[n]&&(t[n].x&&!i.hasAttribute("x")&&i.setAttribute("x",t[n].x),t[n].y&&!i.hasAttribute("y")&&i.setAttribute("y",t[n].y)));return Blockly.Xml.domToText(r)},z.prototype.createModalDialog=function(e){return e.Dialog=h.valueOr(e.Dialog,this.Dialog),this.feedback_.createModalDialog(e)},z.prototype.displayMissingBlockHints=function(e){this.authoredHintsController_.displayMissingBlockHints(e)},z.prototype.onReportComplete=function(e){this.authoredHintsController_.finishHints(e)},z.prototype.isMarkdownMode=function(e){return e.markdownInstructions&&this.localeIsEnglish()},z.prototype.getInstructionsContent_=function(e,t,n){var i;if(this.isMarkdownMode(t)){var r=this.substituteInstructionImages(t.markdownInstructions,this.skin.instructions2ImageSubstitutions);i=N(r)}var o;return n&&(o=this.authoredHintsController_.getHintsDisplay()),React.createElement(B,{puzzleTitle:e,instructions:this.substituteInstructionImages(t.instructions,this.skin.instructions2ImageSubstitutions),instructions2:this.substituteInstructionImages(t.instructions2,this.skin.instructions2ImageSubstitutions),renderedMarkdown:i,markdownClassicMargins:t.markdownInstructionsWithClassicMargins,aniGifURL:t.aniGifURL,authoredHints:o})},z.prototype.showInstructionsDialog_=function(e,t,n){var i=this.isMarkdownMode(e),r=document.createElement("div");r.className=i?"markdown-instructions-container":"instructions-container";var o,s=b.puzzleTitle({stage_total:e.stage_total,puzzle_number:e.puzzle_number});i&&(o=document.createElement("h1"),o.className="markdown-level-header-text dialog-title",o.innerHTML=s,this.icon||(o.className+=" no-modal-icon"));var a=this.getInstructionsContent_(s,e,n),l=document.createElement("div");l.className="instructions-content",r.appendChild(l);var u=document.createElement("div");r.appendChild(u),ReactDOM.render(React.createElement(R,{ok:!0}),u);var c=null,p="#bubble";$(p).length&&(c={},c.endTarget=p);var h=f.bind(function(){$(p).length&&$(p).css({"background-color":"rgba(255,255,255,1)"}).delay(500).animate({"background-color":"rgba(0,0,0,0)"},1e3),this.editCode&&this.editor&&!this.editor.currentlyUsingBlocks&&this.editor.aceEditor.focus();var e=document.createEvent("Event");e.initEvent("instructionsHidden",!0,!0),document.dispatchEvent(e)},this);this.instructionsDialog=this.createModalDialog({markdownMode:i,contentDiv:r,icon:this.icon,defaultBtnSelector:"#ok-button",onHidden:h,scrollContent:!0,scrollableSelector:".instructions-content",header:o}),$(this.instructionsDialog.div).on("show.bs.modal",function(){ReactDOM.render(a,l)}),t&&setTimeout(f.bind(function(){this.instructionsDialog.hide()},this),32e3);var d=u.querySelector("#ok-button");d&&m.addClickTouchEvent(d,f.bind(function(){this.instructionsDialog&&this.instructionsDialog.hide()},this)),this.instructionsDialog.show({hideOptions:c}),i&&$("details").details();var g=document.createEvent("Event");g.initEvent("instructionsShown",!0,!0),document.dispatchEvent(g)},z.prototype.onResize=function(){var e=document.getElementById("codeWorkspace").clientWidth;if(this.isUsingBlockly()&&Blockly.RTL&&this.lastWorkspaceWidth&&this.lastWorkspaceWidth!==e){var t=e-this.lastWorkspaceWidth;Blockly.mainBlockSpace.getTopBlocks().forEach(function(e){e.moveBy(t,0)})}this.lastWorkspaceWidth=e,this.resizeToolboxHeader(),H()};var H=f.debounce(function(){i()},10);z.prototype.onMouseDownVizResizeBar=function(e){this.onMouseMoveBoundHandler||(this.onMouseMoveBoundHandler=f.bind(this.onMouseMoveVizResizeBar,this),document.body.addEventListener("mousemove",this.onMouseMoveBoundHandler),this.mouseMoveTouchEventName=m.getTouchEventName("mousemove"),this.mouseMoveTouchEventName&&document.body.addEventListener(this.mouseMoveTouchEventName,this.onMouseMoveBoundHandler),e.preventDefault())},z.prototype.onMouseMoveVizResizeBar=function(e){var t,n,i=document.getElementById("visualizationResizeBar"),r=i.getBoundingClientRect();this.isRtl()?(t=window.innerWidth-(window.pageXOffset+r.left+r.width/2)-parseInt(window.getComputedStyle(i).right,10),n=window.innerWidth-e.pageX-t):(t=window.pageXOffset+r.left+r.width/2-parseInt(window.getComputedStyle(i).left,10),n=e.pageX-t),this.resizeVisualization(n)},z.prototype.resizeVisualization=function(e){var t=$(".editor-column"),n=document.getElementById("visualization"),i=document.getElementById("visualizationResizeBar"),o=document.getElementById("visualizationColumn"),s=document.getElementById("visualizationEditor"),a=$(o).width(),l=Math.max(this.minVisualizationWidth,Math.min(this.maxVisualizationWidth,e)),u=l+"px",c=l/this.vizAspectRatio+"px",p=n.offsetWidth-n.clientWidth;this.isRtl()?(i.style.right=u,t.css("right",u)):(i.style.left=u,t.css("left",u)),i.style.lineHeight=c,o.style.maxWidth=l+p+"px",n.style.maxWidth=u,n.style.maxHeight=c,h.browserSupportsCssMedia()||(n.style.height=c,n.style.width=u);var d=l/this.nativeVizWidth;r(n,"scale("+d+")"),s&&(s.style.marginLeft=u),230>a&&l>=230?$("#soft-buttons").removeClass("soft-buttons-compact"):a>230&&230>=l&&$("#soft-buttons").addClass("soft-buttons-compact");var f=document.querySelector("#page-small-footer .small-footer-base");if(f){f.style.maxWidth=u;var m=f.querySelector("form"),g=f.querySelector("small");g.style["float"]=m&&g.offsetTop===m.offsetTop?"right":"left"}h.fireResizeEvent()},z.prototype.onMouseUpVizResizeBar=function(){this.onMouseMoveBoundHandler&&(document.body.removeEventListener("mousemove",this.onMouseMoveBoundHandler),this.mouseMoveTouchEventName&&document.body.removeEventListener(this.mouseMoveTouchEventName,this.onMouseMoveBoundHandler),this.onMouseMoveBoundHandler=null)},z.prototype.resizeToolboxHeader=function(){var e=0;if(this.editCode&&this.editor&&this.editor.paletteEnabled){var t=document.querySelector(".droplet-palette-wrapper");e=t.getBoundingClientRect().width}else this.isUsingBlockly()&&(e=Blockly.mainBlockSpaceEditor.getToolboxWidth());document.getElementById("toolbox-header").style.width=e+"px"},z.prototype.highlight=function(e,t){if(this.isUsingBlockly()){if(e){var n=e.match(/^block_id_(\d+)$/);n&&(e=n[1])}Blockly.mainBlockSpace.highlightBlock(e,t)}},z.prototype.clearHighlighting=function(){this.isUsingBlockly()?this.highlight(null):this.editCode&&this.editor&&k.clearDropletAceHighlighting(this.editor,!0)},z.prototype.displayFeedback=function(e){e.Dialog=this.Dialog,e.onContinue=this.onContinue,e.backToPreviousLevel=this.backToPreviousLevel,e.sendToPhone=this.sendToPhone,e.level.edit_blocks&&(e.feedbackType=this.TestResults.EDIT_BLOCKS),this.feedback_.displayFeedback(e,this.requiredBlocks_,this.maxRequiredBlocksToFlag_,this.recommendedBlocks_,this.maxRecommendedBlocksToFlag_)},z.prototype.getTestResults=function(e,t){return this.feedback_.getTestResults(e,this.requiredBlocks_,this.recommendedBlocks_,this.checkForEmptyBlocks_,t)},z.prototype.builderForm_=function(t){var n=document.createElement("div");n.innerHTML=e("./templates/builder.html.ejs")();var i=this.createModalDialog({contentDiv:n,icon:this.icon}),r=document.getElementById("create-level-button");m.addClickTouchEvent(r,function(){var e=n.querySelector('[name="instructions"]').value,i=n.querySelector('[name="level_name"]').value,r=_.parse(window.location.href,!0).query;t(h.extend({instructions:e,name:i},r))}),i.show({backdrop:"static"})},z.prototype.report=function(e){var t=$.extend({},e,{pass:this.feedback_.canContinueToNextLevel(e.testResult),time:(new Date).getTime()-this.initTime,attempt:this.attempts,lines:this.feedback_.getNumBlocksUsed()});this.lastTestResult=e.testResult;var n=this;if(!this.hideSource||!this.share){var i=function(){return function(e){for(var i in e)t[i]=e[i];n.onAttempt(t)}}();e.builder?this.builderForm_(i):i()}},z.prototype.clearAndAttachRuntimeAnnotations=function(){if(this.editCode&&!this.hideSource){var e=this.editor.aceEditor.getSession();M.attachToSession(e,this.editor),M.clearRuntimeAnnotations(),this.editor.aceEditor.session.on("change",function(){M.clearRuntimeAnnotations()})}},z.prototype.resetButtonClick=function(){this.onResetPressed(),this.toggleRunReset("run"),this.clearHighlighting(),this.isUsingBlockly()&&(Blockly.mainBlockSpaceEditor.setEnableToolbox(!0),Blockly.mainBlockSpace.traceOn(!1)),this.reset(!1)},z.prototype.updateBlockCount=function(){var e=document.getElementById("blockUsed");e.className=this.IDEAL_BLOCK_NUM<this.feedback_.getNumCountableBlocks()?"block-counter-overflow":"block-counter-default",e&&(e.innerHTML="",e.appendChild(document.createTextNode(this.feedback_.getNumCountableBlocks())))},z.prototype.setIdealBlockNumber_=function(){var e=document.getElementById("idealBlockNumber");if(e){var t=this.IDEAL_BLOCK_NUM===1/0?b.infinity():this.IDEAL_BLOCK_NUM;e.innerHTML="",e.appendChild(document.createTextNode(t))}},z.prototype.fixViewportForSmallScreens_=function(e,t){var n,i,r;if(this.share&&m.isMobile()){var o=t.mobileNoPaddingShareWidth||L;n=i=Math.min(screen.width,screen.height),this.noPadding&&V>n&&(i=Math.min(i,o)),r=o}else n=i=Math.max(screen.width,screen.height),r=O;var s=Math.max(r,i),a=n/s,l=["width="+s,"minimal-ui","initial-scale="+a,"maximum-scale="+a,"minimum-scale="+a,"target-densityDpi=device-dpi","user-scalable=no"];e.setAttribute("content",l.join(", "))},z.prototype.setConfigValues_=function(e){this.share=e.share,this.centerEmbedded=h.valueOr(e.centerEmbedded,this.centerEmbedded),this.wireframeShare=h.valueOr(e.wireframeShare,this.wireframeShare),this.disableSocialShare=e.disableSocialShare,this.sendToPhone=e.sendToPhone,this.noPadding=e.noPadding,e.level.useContractEditor&&(e.level.minWorkspaceHeight=e.level.minWorkspaceHeight||1250),this.appMsg=e.appMsg,this.IDEAL_BLOCK_NUM=e.level.ideal||1/0,this.MIN_WORKSPACE_HEIGHT=e.level.minWorkspaceHeight||800,this.requiredBlocks_=e.level.requiredBlocks||[],this.recommendedBlocks_=e.level.recommendedBlocks||[],this.startBlocks_=e.level.lastAttempt||e.level.startBlocks||"",this.vizAspectRatio=e.vizAspectRatio||1,this.nativeVizWidth=e.nativeVizWidth||this.maxVisualizationWidth,this.enableShowCode=e.enableShowCode!==!1,this.enableShowLinesCount=e.enableShowLinesCount!==!1,this.enableShowBlockCount=!e.level||void 0!==e.level.ideal&&e.level.ideal!==1/0?e.enableShowBlockCount!==!1:!1,this.onAttempt=e.onAttempt||function(){},this.onContinue=e.onContinue||function(){},this.onInitialize=e.onInitialize?e.onInitialize.bind(e):function(){},this.onResetPressed=e.onResetPressed||function(){},this.backToPreviousLevel=e.backToPreviousLevel||function(){},this.skin=e.skin,this.showInstructions=this.showInstructionsDialog_.bind(this,e.level,!1),this.polishCodeHook=e.polishCodeHook},z.prototype.runButtonClickWrapper=function(e){window.$&&($(window).trigger("run_button_pressed"),$(window).trigger("appModeChanged")),e()},z.prototype.configureDom=function(e){var t=document.getElementById(e.containerId);this.enableShowCode||(document.getElementById("show-code-header").style.display="none");var n=t.querySelector("#codeWorkspace"),i=t.querySelector("#runButton"),r=t.querySelector("#resetButton"),o=this.runButtonClick.bind(this),s=f.debounce(this.runButtonClickWrapper.bind(this,o),250,!0);
m.addClickTouchEvent(i,f.bind(s,this)),m.addClickTouchEvent(r,f.bind(this.resetButtonClick,this));var a=document.getElementById("belowVisualization"),l=document.getElementById("reference_area");l&&a.appendChild(l);var u=document.getElementById("visualizationColumn"),c=document.getElementById("visualization");if(!e.hideSource||e.embed){var p=this.MIN_WORKSPACE_HEIGHT;if(this.isUsingBlockly()&&e.level.edit_blocks&&($(n).addClass("edit"),p=3e3,"toolbox_blocks"==e.level.edit_blocks&&(this.blockYCoordinateInterval=80,e.blockArrangement={category:{x:20}}),e.level.disableParamEditing=!1,e.level.disableVariableEditing=!1),e.pinWorkspaceToBottom){var h=document.body;if(h.style.overflow="hidden",h.className=h.className+" pin_bottom",t.className=t.className+" pin_bottom",u.className=u.className+" pin_bottom",n.className=n.className+" pin_bottom",this.editCode){var d=document.getElementById("codeTextbox");d.className=d.className+" pin_bottom"}}else u.style.minHeight=p+"px",t.style.minHeight=p+"px"}if(e.readonlyWorkspace&&$(n).addClass("readonly"),e.embed&&e.hideSource&&this.centerEmbedded&&(t.className=t.className+" centered_embed",u.className=u.className+" centered_embed"),!e.embed&&!e.hideSource){c.className+=" responsive",u.className+=" responsive";var g=document.querySelector("#page-small-footer .small-footer-base");g&&(g.className+=" responsive")}},z.prototype.handleHideSource_=function(e){var t=document.getElementById(e.containerId);this.hideSource=!0;var n=document.getElementById("codeWorkspace");if((!e.embed||e.level.skipInstructionsPopup)&&(t.className="hide-source"),n.style.display="none",document.getElementById("visualizationResizeBar").style.display="none",this.share&&(e.isLegacyShare||this.wireframeShare)){document.body.style.backgroundColor="#202B34",$(".header-wrapper").hide();var i=document.getElementById("visualizationColumn");if(!m.isMobile()||!e.isLegacyShare&&m.isIPad()){$(i).addClass("wireframeShare");var r=document.createElement("div");document.body.appendChild(r),ReactDOM.render(React.createElement(P,{channelId:dashboard.project.getCurrentId(),appType:dashboard.project.getStandaloneApp()}),r)}else $(i).addClass("chromelessShare");if(!e.embed){var o=document.getElementById("runButton"),s=o.parentElement,a=document.createElement("button");a.setAttribute("id","open-workspace"),a.appendChild(document.createTextNode(b.openWorkspace())),m.addClickTouchEvent(a,function(){location.href+=/^\/c\//.test(location.pathname)?"/edit":"/view"}),s.appendChild(a)}}},z.prototype.handleEditCode_=function(e){if(this.hideSource)return void(e.afterInject&&e.afterInject());ace=window.ace;var t=d.generateDropletPalette(e.level.codeFunctions,e.dropletConfig);this.editor=new droplet.Editor(document.getElementById("codeTextbox"),{mode:"javascript",modeOptions:d.generateDropletModeOptions(e),palette:t,showPaletteInTextMode:!0,showDropdownInPalette:e.showDropdownInPalette,allowFloatingBlocks:!1,dropIntoAceAtLineStart:e.dropIntoAceAtLineStart,enablePaletteAtStart:!e.readonlyWorkspace,textModeAtStart:e.level.textModeAtStart}),this.editor.aceEditor.setShowPrintMargin(!1),u.defineForAce(e.dropletConfig,e.unusedConfig,this.editor);var n=this.editor.aceEditor;n.session.setMode("ace/mode/javascript_codeorg");var i=window.ace.require("ace/autocomplete").Autocomplete;i.prototype.commands["."]=function(e){e.insert("."),e.completer.updateCompletions(!0);for(var t=e.completer.completions&&e.completer.completions.filtered,n=0;n<(t&&t.length);n++)if(t[n].exactMatch)return;e.completer.detach()};var r=window.ace.require("ace/ext/language_tools");if(n.completers=[r.snippetCompleter,r.keyWordCompleter],r.setCompleters=function(){throw new Error("setCompleters disabled. set aceEditor.completers directly")},e.dropletConfig){var o=null;e.level.autocompletePaletteApisOnly&&(o=e.level.codeFunctions),n.completers.push(d.generateAceApiCompleter(o,e.dropletConfig))}this.editor.aceEditor.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),this.dropletTooltipManager=new y(this.appMsg,e.dropletConfig,e.level.codeFunctions,e.level.autocompletePaletteApisOnly,this.Dialog),e.level.dropletTooltipsDisabled&&this.dropletTooltipManager.setTooltipsEnabled(!1),this.dropletTooltipManager.registerBlocks();var s=document.getElementById("toolbox-header"),a=document.getElementById("hide-toolbox-icon"),l=document.getElementById("show-toolbox-header");if(s&&a&&l){s.className+=" toggleable",a.style.display="inline-block";var c=function(){this.editor&&(this.editor.enablePalette(!this.editor.paletteEnabled),l.style.display=this.editor.paletteEnabled?"none":"inline-block",a.style.display=this.editor.paletteEnabled?"inline-block":"none",this.resizeToolboxHeader())}.bind(this);m.addClickTouchEvent(s,c),m.addClickTouchEvent(l,c)}this.resizeToolboxHeader();var p=e.level.lastAttempt||e.level.startBlocks;if(p){try{this.editor.setValue(p.replace(/\r\n/g,"\n"))}catch(h){console.error(h.message)}this.editor.clearUndoStack();var f=window.ace.require("ace/undomanager").UndoManager;this.editor.aceEditor.getSession().setUndoManager(new f)}e.readonlyWorkspace&&(this.editor.setReadOnly(!0),l.style.display="none"),this.onDropletToggle_(!this.instructionsDialog),this.dropletTooltipManager.registerDropletBlockModeHandlers(this.editor),this.editor.on("palettetoggledone",function(){$(".cdo-qtips").qtip("reposition",null,!1)}),this.instructionsDialog&&this.instructionsDialog.focus(),e.afterEditorReady&&e.afterEditorReady(),e.afterInject&&e.afterInject()},z.prototype.enableBreakpoints=function(){if(!this.editor)throw new Error("Droplet editor must be in use to enable breakpoints.");this.editor.on("guttermousedown",function(e){var t=this.editor.getBreakpoints();t[e.line]?this.editor.clearBreakpoint(e.line):this.editor.setBreakpoint(e.line)}.bind(this))},z.prototype.setCheckForEmptyBlocks=function(e){this.checkForEmptyBlocks_=e},z.prototype.setStartBlocks_=function(e,t){e.level.edit_blocks&&(t=!1);var n=e.level.startBlocks||"";t&&"Jigsaw"!==e.levelGameName&&(n=e.level.lastAttempt||n),e.forceInsertTopBlock&&(n=v.forceInsertTopBlock(n,e.forceInsertTopBlock)),n=this.arrangeBlockPosition(n,e.blockArrangement);try{this.loadBlocks(n)}catch(i){if(!t)throw i;Blockly.mainBlockSpace.clear(),this.setStartBlocks_(e,!1)}},z.prototype.openFunctionDefinition_=function(e){Blockly.contractEditor?Blockly.contractEditor.autoOpenWithLevelConfiguration({autoOpenFunction:e.level.openFunctionDefinition,contractCollapse:e.level.contractCollapse,contractHighlight:e.level.contractHighlight,examplesCollapse:e.level.examplesCollapse,examplesHighlight:e.level.examplesHighlight,definitionCollapse:e.level.definitionCollapse,definitionHighlight:e.level.definitionHighlight}):Blockly.functionEditor.autoOpenFunction(e.level.openFunctionDefinition)},z.prototype.handleUsingBlockly_=function(e){if(e.level.edit_blocks&&(this.checkForEmptyBlocks_=!1,("required_blocks"===e.level.edit_blocks||"toolbox_blocks"===e.level.edit_blocks||"recommended_blocks"===e.level.edit_blocks)&&(e.forceInsertTopBlock=null)),e.level.toolbox){var t=e.level.toolbox.replace(/\s/g,"");("<xml></xml>"===t||"<xml/>"===t)&&(e.level.toolbox=void 0)}var n=document.getElementById("codeWorkspace"),i={toolbox:e.level.toolbox,disableParamEditing:h.valueOr(e.level.disableParamEditing,!0),disableVariableEditing:h.valueOr(e.level.disableVariableEditing,!1),useModalFunctionEditor:h.valueOr(e.level.useModalFunctionEditor,!1),useContractEditor:h.valueOr(e.level.useContractEditor,!1),disableExamples:h.valueOr(e.level.disableExamples,!1),defaultNumExampleBlocks:h.valueOr(e.level.defaultNumExampleBlocks,2),scrollbars:e.level.scrollbars,hasVerticalScrollbars:e.hasVerticalScrollbars,hasHorizontalScrollbars:e.hasHorizontalScrollbars,editBlocks:h.valueOr(e.level.edit_blocks,!1),readOnly:h.valueOr(e.readonlyWorkspace,!1),showExampleTestButtons:h.valueOr(e.showExampleTestButtons,!1)};["trashcan","varsInGlobals","grayOutUndeletableBlocks","disableParamEditing"].forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),this.inject(n,i),this.onResize(),e.afterInject&&e.afterInject(),this.setStartBlocks_(e,!0)},z.prototype.updateHeadersAfterDropletToggle_=function(e){var t=document.getElementById("show-code-header"),n=t.firstChild,i=f.find(n.childNodes,function(e){return/\bfa\b/.test(e.className)}),r=f.find(n.childNodes,function(e){return/\bblocks-glyph\b/.test(e.className)});e?(i&&r&&(i.style.display="inline-block",r.style.display="none"),n.lastChild.textContent=b.showTextHeader()):(i&&r&&(i.style.display="none",r.style.display="inline-block"),n.lastChild.textContent=b.showBlocksHeader());var o=document.getElementById("blockCounter");o&&(o.style.display=e&&this.enableShowBlockCount?"inline-block":"none")},z.prototype.onDropletToggle_=function(e){e=h.valueOr(e,!0),this.updateHeadersAfterDropletToggle_(this.editor.currentlyUsingBlocks),this.editor.currentlyUsingBlocks||(e&&this.editor.aceEditor.focus(),this.dropletTooltipManager.registerDropletTextModeHandlers(this.editor))},z.prototype.hasExtraTopBlocks=function(){return this.feedback_.hasExtraTopBlocks()},z.prototype.hasQuestionMarksInNumberField=function(){return this.feedback_.hasQuestionMarksInNumberField()},z.prototype.hasUnfilledFunctionalBlock=function(){return!!this.getUnfilledFunctionalBlock()},z.prototype.getUnfilledFunctionalBlock=function(){return this.getFilteredUnfilledFunctionalBlock_(function(e){return"functional_example"!==e.type})},z.prototype.getUnfilledFunctionalExample=function(){return this.getFilteredUnfilledFunctionalBlock_(function(e){if("functional_example"!==e.type)return!1;var t=e.getInputTargetBlock("ACTUAL");return t&&t.getTitleValue("NAME")})},z.prototype.getFilteredUnfilledFunctionalBlock_=function(e){var t;return Blockly.mainBlockSpace.getAllBlocks().some(function(n){var i=n.getRootBlock();return e(i)?n.hasUnfilledFunctionalInput()?(t=n,!0):void 0:!1}),t},z.prototype.getFunctionWithoutTwoExamples=function(){var e,t=Blockly.mainBlockSpace.getTopBlocks().filter(function(e){return"functional_definition"===e.type&&!e.isVariable()}).map(function(e){return e.getProcedureInfo().name}),n=Blockly.mainBlockSpace.getTopBlocks().filter(function(e){if("functional_example"!==e.type)return!1;var t=e.getInputTargetBlock("ACTUAL");return t&&t.getTitleValue("NAME")}).map(function(e){return e.getInputTargetBlock("ACTUAL").getTitleValue("NAME")});return t.forEach(function(t){var i=n.filter(function(e){return t===e});i.length<2&&(e=t)}),e},z.prototype.getUnfilledFunctionalBlockError=function(e){var t=this.getUnfilledFunctionalBlock();if(!t)return null;for(var n=t;n.getParent();)n=n.getParent();if(t.type===e)return b.emptyTopLevelBlock({topLevelBlockName:t.getTitleValue()});if("functional_definition"!==n.type)return b.emptyFunctionalBlock();var i=n.getProcedureInfo();return n.isVariable()?b.emptyBlockInVariable({name:i.name}):b.emptyBlockInFunction({name:i.name})},z.prototype.checkForFailingExamples=function(e){var t="";return Blockly.mainBlockSpace.findFunctionExamples().forEach(function(n){var i=e(n,!1);Blockly.contractEditor.updateExampleResult(n,i),i&&(t=n.getInputTargetBlock("ACTUAL").getTitleValue("NAME"))}),t},z.prototype.hasEmptyFunctionOrVariableName=function(){return Blockly.mainBlockSpace.getTopBlocks().some(function(e){return"functional_definition"!==e.type?!1:!e.getProcedureInfo().name})},z.prototype.createCoordinateGridBackground=function(e){for(var t,n,i,r=e.svg,o=e.origin,s=e.firstLabel,l=e.lastLabel,u=e.increment,p=400,h=document.getElementById(r),d=s;l>=d;d+=u)n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.appendChild(document.createTextNode(d)),h.appendChild(n),t=n.getBBox(),n.setAttribute("x",d-o-t.width/2),n.setAttribute("y",p),n.setAttribute("font-weight","bold"),i=a(n),i.setAttribute("fill",c.white),h.insertBefore(i,n),n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.appendChild(document.createTextNode(d)),h.appendChild(n),t=n.getBBox(),n.setAttribute("x",0),n.setAttribute("y",p-(d-o)),n.setAttribute("dominant-baseline","central"),n.setAttribute("font-weight","bold"),i=a(n),i.setAttribute("fill",c.white),h.insertBefore(i,n)},z.prototype.displayWorkspaceAlert=function(e,t){var n,i=this.displayAlert("#codeWorkspace",{type:e},t);n=this.usingBlockly_?$(".blocklyToolboxDiv").width():$(".droplet-palette-element").width()+$(".droplet-gutter").width(),$(i).css({left:n,top:$("#headers").height()})},z.prototype.displayPlayspaceAlert=function(e,t){z.prototype.displayAlert("#visualization",{type:e,sideMargin:20},t)},z.prototype.displayAlert=function(e,t,n){var i=$(e),r=i.children(".react-alert");0===r.length&&(r=$("<div class='react-alert'/>").css({position:"absolute",left:0,right:0,top:0,zIndex:1e3}),i.append(r));var o=r[0],s=function(){ReactDOM.unmountComponentAtNode(o)};return ReactDOM.render(React.createElement(x,{onClose:s,type:t.type,sideMargin:t.sideMargin},n),o),o},z.prototype.alertIfAbusiveProject=function(){if(window.dashboard&&dashboard.project.exceedsAbuseThreshold()){var e={tos:window.dashboard.i18n.t("project.abuse.tos"),contact_us:window.dashboard.i18n.t("project.abuse.contact_us")};this.displayWorkspaceAlert("error",React.createElement(dashboard.AbuseError,{i18n:e}))}},z.prototype.hasDuplicateVariablesInForLoops=function(){return this.editCode?!1:Blockly.mainBlockSpace.getAllBlocks().some(this.forLoopHasDuplicatedNestedVariables_)},z.prototype.forLoopHasDuplicatedNestedVariables_=function(e){if(e&&("controls_for"===e.type||"controls_for_counter"===e.type)){var t=e.getInput("DO").connection.targetBlock();return e.getVars().some(function(e){return t.getDescendants().some(function(t){return"controls_for"!==t.type&&"controls_for_counter"!==t.type?!1:-1!==t.getVars().indexOf(e)})})}},z.prototype.polishGeneratedCodeString=function(e){return this.polishCodeHook?this.polishCodeHook(e):e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ResizeSensor":"/home/ubuntu/staging/apps/build/js/ResizeSensor.js","./acemode/annotationList":"/home/ubuntu/staging/apps/build/js/acemode/annotationList.js","./acemode/mode-javascript_codeorg":"/home/ubuntu/staging/apps/build/js/acemode/mode-javascript_codeorg.js","./assetManagement/assetListStore":"/home/ubuntu/staging/apps/build/js/assetManagement/assetListStore.js","./assetManagement/assetPrefix":"/home/ubuntu/staging/apps/build/js/assetManagement/assetPrefix.js","./authoredHints":"/home/ubuntu/staging/apps/build/js/authoredHints.js","./blockTooltips/DropletTooltipManager":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletTooltipManager.js","./block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./clientApi":"/home/ubuntu/staging/apps/build/js/clientApi.js","./codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./color":"/home/ubuntu/staging/apps/build/js/color.js","./constants.js":"/home/ubuntu/staging/apps/build/js/constants.js","./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","./feedback":"/home/ubuntu/staging/apps/build/js/feedback.js","./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./logToCloud":"/home/ubuntu/staging/apps/build/js/logToCloud.js","./puzzleRatingUtils":"/home/ubuntu/staging/apps/build/js/puzzleRatingUtils.js","./templates/DialogButtons":"/home/ubuntu/staging/apps/build/js/templates/DialogButtons.jsx","./templates/VersionHistory":"/home/ubuntu/staging/apps/build/js/templates/VersionHistory.jsx","./templates/WireframeSendToPhone":"/home/ubuntu/staging/apps/build/js/templates/WireframeSendToPhone.jsx","./templates/alert":"/home/ubuntu/staging/apps/build/js/templates/alert.jsx","./templates/builder.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/builder.html.ejs","./templates/instructions/Instructions":"/home/ubuntu/staging/apps/build/js/templates/instructions/Instructions.jsx","./templates/learn.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/learn.html.ejs","./templates/makeYourOwn.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/makeYourOwn.html.ejs","./utils":"/home/ubuntu/staging/apps/build/js/utils.js","./xml":"/home/ubuntu/staging/apps/build/js/xml.js",url:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/url/url.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/url/url.js":[function(e,t,n){function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&u(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}function o(e){return l(e)&&(e=r(e)),e instanceof i?e.format():i.prototype.format.call(e)}function s(e,t){return r(e,!1,!0).resolve(t)}function a(e,t){return e?r(e,!1,!0).resolveObject(t):t}function l(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function p(e){return null==e}var h=e("punycode");n.parse=r,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=i;var d=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),b=["'"].concat(g),v=["%","/","?",";","#"].concat(b),y=["/","?","#"],_=255,w=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");i.prototype.parse=function(e,t,n){if(!l(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e;i=i.trim();var r=d.exec(i);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,i=i.substr(r.length)}if(n||r||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===i.substr(0,2);!s||r&&k[r]||(i=i.substr(2),this.slashes=!0)}if(!k[r]&&(s||r&&!T[r])){for(var a=-1,u=0;u<y.length;u++){var c=i.indexOf(y[u]);-1!==c&&(-1===a||a>c)&&(a=c)}var p,f;f=-1===a?i.lastIndexOf("@"):i.lastIndexOf("@",a),-1!==f&&(p=i.slice(0,f),i=i.slice(f+1),this.auth=decodeURIComponent(p)),a=-1;for(var u=0;u<v.length;u++){var c=i.indexOf(v[u]);-1!==c&&(-1===a||a>c)&&(a=c)}-1===a&&(a=i.length),this.host=i.slice(0,a),i=i.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),u=0,C=g.length;C>u;u++){var B=g[u];if(B&&!B.match(w)){for(var R="",P=0,j=B.length;j>P;P++)R+=B.charCodeAt(P)>127?"x":B[P];if(!R.match(w)){var I=g.slice(0,u),A=g.slice(u+1),M=B.match(E);M&&(I.push(M[1]),A.unshift(M[2])),A.length&&(i="/"+A.join(".")+i),this.hostname=I.join(".");break}}}if(this.hostname=this.hostname.length>_?"":this.hostname.toLowerCase(),!m){for(var N=this.hostname.split("."),O=[],u=0;u<N.length;++u){var L=N[u];O.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(L):L)}this.hostname=O.join(".")}var D=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+D,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!x[o])for(var u=0,C=b.length;C>u;u++){var U=b[u],V=encodeURIComponent(U);V===U&&(V=escape(U)),i=i.split(U).join(V)}var z=i.indexOf("#");-1!==z&&(this.hash=i.substr(z),i=i.slice(0,z));var H=i.indexOf("?");if(-1!==H?(this.search=i.substr(H),this.query=i.substr(H+1),t&&(this.query=S.parse(this.query)),i=i.slice(0,H)):t&&(this.search="",this.query={}),i&&(this.pathname=i),T[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",L=this.search||"";this.path=D+L}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||T[t])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+r+n+s+i},i.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(l(e)){var t=new i;t.parse(e,!1,!0),e=t}var n=new i;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!T[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var o=n.pathname||"",s=n.search||"";n.path=o+s}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=u||a||n.host&&e.pathname,d=h,f=n.pathname&&n.pathname.split("/")||[],r=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!T[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===f[0]?f[0]=n.host:f.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),h=h&&(""===r[0]||""===f[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,f=r;else if(r.length)f||(f=[]),f.pop(),f=f.concat(r),n.search=e.search,n.query=e.query;else if(!p(e.search)){if(m){n.hostname=n.host=f.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=e.search,n.query=e.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!f.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var b=f.slice(-1)[0],v=(n.host||e.host)&&("."===b||".."===b)||""===b,y=0,_=f.length;_>=0;_--)b=f[_],"."==b?f.splice(_,1):".."===b?(f.splice(_,1),y++):y&&(f.splice(_,1),y--);if(!h&&!d)for(;y--;y)f.unshift("..");!h||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),v&&"/"!==f.join("/").substr(-1)&&f.push("");var w=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(m){n.hostname=n.host=w?"":f.length?f.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return h=h||n.host&&f.length,h&&!w&&f.unshift(""),f.length?n.pathname=f.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/punycode/punycode.js",querystring:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/querystring-es3/index.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/querystring-es3/index.js":[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/querystring-es3/decode.js","./encode":"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/querystring-es3/encode.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/querystring-es3/encode.js":[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?n(o(e),function(o){var a=encodeURIComponent(i(o))+s;return r(e[o])?n(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[o]))}).join(t):a?encodeURIComponent(i(a))+s+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/querystring-es3/decode.js":[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;u>c;++c){var p,h,d,f,m=e[c].replace(a,"%20"),g=m.indexOf(r);g>=0?(p=m.substr(0,g),h=m.substr(g+1)):(p=m,h=""),d=decodeURIComponent(p),f=decodeURIComponent(h),n(s,d)?i(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/punycode/punycode.js":[function(e,t,n){(function(e){!function(i){function r(e){throw RangeError(A[e])}function o(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function s(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(I,".");var r=e.split("."),s=o(r,t).join(".");return i+s}function a(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function l(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=O(e>>>10&1023|55296),e=56320|1023&e),t+=O(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,n){var i=0;for(e=n?N(e/S):e>>1,e+=N(e/t);e>M*k>>1;i+=E)e=N(e/M);return N(i+(M+1)*e/(e+T))}function h(e){var t,n,i,o,s,a,c,h,d,f,m=[],g=e.length,b=0,v=B,y=C;for(n=e.lastIndexOf(R),0>n&&(n=0),i=0;n>i;++i)e.charCodeAt(i)>=128&&r("not-basic"),m.push(e.charCodeAt(i));for(o=n>0?n+1:0;g>o;){for(s=b,a=1,c=E;o>=g&&r("invalid-input"),h=u(e.charCodeAt(o++)),(h>=E||h>N((w-b)/a))&&r("overflow"),b+=h*a,d=y>=c?x:c>=y+k?k:c-y,!(d>h);c+=E)f=E-d,a>N(w/f)&&r("overflow"),a*=f;t=m.length+1,y=p(b-s,t,0==s),N(b/t)>w-v&&r("overflow"),v+=N(b/t),b%=t,m.splice(b++,0,v)}return l(m)}function d(e){var t,n,i,o,s,l,u,h,d,f,m,g,b,v,y,_=[];for(e=a(e),g=e.length,t=B,n=0,s=C,l=0;g>l;++l)m=e[l],128>m&&_.push(O(m));for(i=o=_.length,o&&_.push(R);g>i;){for(u=w,l=0;g>l;++l)m=e[l],m>=t&&u>m&&(u=m);for(b=i+1,u-t>N((w-n)/b)&&r("overflow"),n+=(u-t)*b,t=u,l=0;g>l;++l)if(m=e[l],t>m&&++n>w&&r("overflow"),m==t){for(h=n,d=E;f=s>=d?x:d>=s+k?k:d-s,!(f>h);d+=E)y=h-f,v=E-f,_.push(O(c(f+y%v,0))),h=N(y/v);_.push(O(c(h,0))),s=p(n,b,i==o),n=0,++i}++n,++t}return _.join("")}function f(e){return s(e,function(e){return P.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return s(e,function(e){return j.test(e)?"xn--"+d(e):e})}var g="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;(v.global===v||v.window===v||v.self===v)&&(i=v);var y,_,w=2147483647,E=36,x=1,k=26,T=38,S=700,C=72,B=128,R="-",P=/^xn--/,j=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=E-x,N=Math.floor,O=String.fromCharCode;if(y={version:"1.3.2",ucs2:{decode:a,encode:l},decode:h,encode:d,toASCII:m,toUnicode:f},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(g&&b)if(t.exports==g)b.exports=y;else for(_ in y)y.hasOwnProperty(_)&&(g[_]=y[_]);else i.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/ubuntu/staging/apps/build/js/templates/makeYourOwn.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push(""),require("../locale"),buf.push('\n\n<div id="make-your-own">\n\n  <h1><a href=',escape(data.makeUrl),">",escape(data.makeString),"</a></h1>\n  <a href=",escape(data.makeUrl),"><img src=",escape(data.makeImage),"></a>\n\n</div>\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/learn.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var e=require("../locale");buf.push("\n\n");var t=location.protocol+"//"+location.host.replace("learn.","").replace("studio.","");buf.push('\n\n<div id="learn">\n\n  <h1><a href="',escape(t),'">',escape(e.wantToLearn()),'</a></h1>\n  <a href="',escape(t),'"><img id="learn-to-code" src="',escape(assetUrl("media/promo.png")),'"></a>\n  <a href="',escape(t),'">',escape(e.watchVideo()),'</a>\n  <a href="',escape(t),'">',escape(e.tryHOC()),'</a>\n  <a href="',escape(location.protocol+"//"+location.host),'">',escape(e.signup()),"</a>\n\n</div>\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/instructions/Instructions.jsx":[function(e,t){"use strict";var n=e("./MarkdownInstructions"),i=e("./NonMarkdownInstructions"),r=React.createClass({displayName:"Instructions",propTypes:{puzzleTitle:React.PropTypes.string,instructions:React.PropTypes.string,instructions2:React.PropTypes.string,renderedMarkdown:React.PropTypes.string,markdownClassicMargins:React.PropTypes.bool,aniGifURL:React.PropTypes.string,authoredHints:React.PropTypes.element},render:function(){var e;return e=this.props.renderedMarkdown?React.createElement(n,{renderedMarkdown:this.props.renderedMarkdown,markdownClassicMargins:this.props.markdownClassicMargins,inTopPane:this.props.inTopPane}):React.createElement(i,{puzzleTitle:this.props.puzzleTitle,instructions:this.props.instructions,instructions2:this.props.instructions2}),React.createElement("div",null,e,this.props.aniGifURL&&React.createElement("img",{className:"aniGif example-image",src:this.props.aniGifURL}),this.props.authoredHints)}});t.exports=r},{"./MarkdownInstructions":"/home/ubuntu/staging/apps/build/js/templates/instructions/MarkdownInstructions.jsx","./NonMarkdownInstructions":"/home/ubuntu/staging/apps/build/js/templates/instructions/NonMarkdownInstructions.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/instructions/NonMarkdownInstructions.jsx":[function(e,t){"use strict";var n={main:{marginBottom:35,marginLeft:80}},i=function(e){return React.createElement("div",{style:n.main},React.createElement("p",{className:"dialog-title"},e.puzzleTitle),e.instructions&&React.createElement("p",{className:"instructions",dangerouslySetInnerHTML:{__html:e.instructions}}),e.instructions2&&React.createElement("p",{className:"instructions2",dangerouslySetInnerHTML:{__html:e.instructions2}}))};i.propTypes={puzzleTitle:React.PropTypes.string.isRequired,instructions:React.PropTypes.string,instructions2:React.PropTypes.string},t.exports=i},{}],"/home/ubuntu/staging/apps/build/js/templates/instructions/MarkdownInstructions.jsx":[function(e,t){(function(e){"use strict";var n="undefined"!=typeof window?window.Radium:"undefined"!=typeof e?e.Radium:null,i={standard:{marginBottom:35,paddingTop:19},inTopPane:{marginBottom:35,paddingTop:0},classic:{marginBottom:35,paddingTop:0,marginLeft:90}},r=function(e){return React.createElement("div",{className:"instructions-markdown",style:[i.standard,e.inTopPane&&i.inTopPane,e.markdownClassicMargins&&i.classic],dangerouslySetInnerHTML:{__html:e.renderedMarkdown}})
};r.propTypes={renderedMarkdown:React.PropTypes.string.isRequired,markdownClassicMargins:React.PropTypes.bool,inTopPane:React.PropTypes.bool},t.exports=n(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/ubuntu/staging/apps/build/js/templates/builder.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div><span>Instructions: </span><textarea type="text" name="instructions"></textarea></div>\n<div><span>Level Name: </span><textarea type="text" name="level_name"></textarea></div>\n<button id="create-level-button" class="launch">\n  Create Level\n</button>\n<div id="builder-error"></div>\n')}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/alert.jsx":[function(e,t){"use strict";var n=e("../color"),i=React.createClass({displayName:"Alert",propTypes:{children:React.PropTypes.element.isRequired,type:React.PropTypes.oneOf(["error","warning"]).isRequired,onClose:React.PropTypes.func.isRequired,sideMargin:React.PropTypes.number},render:function(){var e={main:{position:"relative",zIndex:1e3,marginTop:20,marginLeft:this.props.sideMargin||50,marginRight:this.props.sideMargin||50},typeSpecific:{error:{borderColor:n.bootstrap_error_border,backgroundColor:n.bootstrap_error_background,color:n.bootstrap_error_text},warning:{borderColor:n.bootstrap_warning_border,backgroundColor:n.bootstrap_warning_background,color:n.black}},child:{padding:"8px 35px 8px 14px",marginBottom:20,textShadoow:"0 1px 0 rgba(255, 255, 255, 0.5)",border:"1px solid",borderRadius:4},closeButton:{margin:0,padding:0,cursor:"pointer",background:"transparent",border:0,WebkitAppearance:"none","float":"right",fontSize:20,fontWeight:"bold",lineHeight:"20px",color:n.black,textShadow:"0 1px 0 white",opacity:.2,position:"relative",top:-2,right:-21}},t=$.extend({},e.child,e.typeSpecific[this.props.type]);return React.createElement("div",{style:e.main},React.createElement("div",{style:t},React.createElement("button",{style:e.closeButton,onClick:this.props.onClose},React.createElement("span",null,"\xd7")),this.props.children))}});t.exports=i},{"../color":"/home/ubuntu/staging/apps/build/js/color.js"}],"/home/ubuntu/staging/apps/build/js/templates/WireframeSendToPhone.jsx":[function(e,t){"use strict";var n=window.dashboard?window.dashboard.SendToPhone:void 0,i={main:{position:"absolute",bottom:10,right:10,textAlign:"right",textShadow:"#000 -1px -1px 0",font:'12pt "Gotham 5r", sans-serif',color:"#8F9499"},icon:{fontSize:"1.5em"},sendToPhone:{label:{font:'12pt "Gotham 5r", sans-serif',color:"#8F9499"},div:{margin:0}}};t.exports=React.createClass({displayName:"exports",propTypes:{channelId:React.PropTypes.string.isRequired,appType:React.PropTypes.string.isRequired},getInitialState:function(){return{clicked:!1}},handleClick:function(){return this.setState({clicked:!this.state.clicked}),!1},render:function(){return React.createElement("div",{style:i.main},this.renderSendToPhone(),React.createElement("a",{className:"WireframeSendToPhone_send-to-phone-link",href:"#",onClick:this.handleClick},React.createElement("i",{style:i.icon,className:"fa fa-mobile"})," See this app on your phone"))},renderSendToPhone:function(){return this.state.clicked?React.createElement(n,{styles:i.sendToPhone,channelId:this.props.channelId,appType:this.props.appType}):void 0}})},{}],"/home/ubuntu/staging/apps/build/js/templates/VersionHistory.jsx":[function(e,t){"use strict";var n=e("./VersionRow"),i=e("../clientApi").sources,r=React.createClass({displayName:"VersionHistory",propTypes:{handleClearPuzzle:React.PropTypes.func.isRequired},getInitialState:function(){return{versions:null,statusMessage:"",showSpinner:!0,confirmingClearPuzzle:!1}},componentWillMount:function(){i.ajax("GET","main.json/versions",this.onVersionListReceived,this.onAjaxFailure)},onVersionListReceived:function(e){this.setState({versions:JSON.parse(e.responseText),showSpinner:!1})},onAjaxFailure:function(){this.setState({statusMessage:"An error occurred."})},onRestoreSuccess:function(){location.reload()},onChooseVersion:function(e){i.ajax("PUT","main.json/restore?version="+e,this.onRestoreSuccess,this.onAjaxFailure),this.setState({showSpinner:!0})},onConfirmClearPuzzle:function(){this.setState({confirmingClearPuzzle:!0})},onCancelClearPuzzle:function(){this.setState({confirmingClearPuzzle:!1})},onClearPuzzle:function(){this.setState({showSpinner:!0}),this.props.handleClearPuzzle(),dashboard.project.save(function(){location.reload()},!0)},render:function(){var e;if(this.state.showSpinner)e=React.createElement("div",{style:{margin:"1em 0",textAlign:"center"}},React.createElement("i",{className:"fa fa-spinner fa-spin",style:{fontSize:"32px"}}));else if(this.state.confirmingClearPuzzle)e=React.createElement("div",null,React.createElement("p",null,"Are you sure you want to clear all progress for this level?"),React.createElement("button",{id:"confirm-button",style:{"float":"right"},onClick:this.onClearPuzzle},"Start Over"),React.createElement("button",{id:"again-button",onClick:this.onCancelClearPuzzle},"Cancel"));else{var t=this.state.versions.map(function(e){return React.createElement(n,{key:e.versionId,lastModified:new Date(e.lastModified),isLatest:e.isLatest,onChoose:this.onChooseVersion.bind(this,e.versionId)})}.bind(this));e=React.createElement("div",null,React.createElement("div",{style:{maxHeight:"330px",overflowX:"scroll",margin:"1em 0"}},React.createElement("table",{style:{width:"100%"}},React.createElement("tbody",null,t,React.createElement("tr",null,React.createElement("td",null,React.createElement("p",{style:{margin:0}},"Initial version")),React.createElement("td",{width:"250",style:{textAlign:"right"}},React.createElement("button",{className:"btn-danger",onClick:this.onConfirmClearPuzzle,style:{"float":"right"}},"Delete Progress")))))))}return React.createElement("div",{className:"modal-content",style:{margin:0}},React.createElement("p",{className:"dialog-title"},"Version History"),e,this.state.statusMessage)}});t.exports=r},{"../clientApi":"/home/ubuntu/staging/apps/build/js/clientApi.js","./VersionRow":"/home/ubuntu/staging/apps/build/js/templates/VersionRow.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/VersionRow.jsx":[function(e,t){"use strict";var n=React.createClass({displayName:"VersionRow",propTypes:{lastModified:React.PropTypes.instanceOf(Date),isLatest:React.PropTypes.bool,onChoose:React.PropTypes.func},getLastModifiedTimestamp:function(){var e=this.props.lastModified;return e.toLocaleString?e.toLocaleString():e.toString()},render:function(){var e;return e=this.props.isLatest?React.createElement("button",{className:"btn-default",disabled:"disabled",style:{cursor:"default"}},"Current Version"):React.createElement("button",{className:"btn-info",onClick:this.props.onChoose},"Restore this Version"),React.createElement("tr",{className:"versionRow"},React.createElement("td",null,React.createElement("p",null,"Saved ",React.createElement("time",{className:"versionTimestamp",dateTime:this.props.lastModified.toISOString()},this.getLastModifiedTimestamp())),this.getLastModifiedTimestamp()),React.createElement("td",{width:"250",style:{textAlign:"right"}},e))},componentDidMount:function(){$(".versionTimestamp").timeago()}});t.exports=n},{}],"/home/ubuntu/staging/apps/build/js/logToCloud.js":[function(e,t){"use strict";var n={DropletTransitionError:"DropletTransitionError",SanitizedLevelHtml:"SanitizedLevelHtml",UserJavaScriptError:"UserJavaScriptError",RunButtonClick:"RunButtonClick"},i=4095;t.exports={PageAction:n,addPageAction:function(e,t,r){if(void 0===r&&(r=1),window.newrelic){if(!n[e])return void console.log("Unknown actionName: "+e);if("object"!=typeof t)return void console.log("Expected value to be an object");if(!(Math.random()>r)){for(var o in t)"string"==typeof t[o]&&(t[o]=t[o].substring(0,i));window.newrelic.addPageAction(e,t)}}},setCustomAttribute:function(e,t){window.newrelic&&window.newrelic.setCustomAttribute(e,t)}}},{}],"/home/ubuntu/staging/apps/build/js/feedback.js":[function(e,t){"use strict";var n=function(e){this.studioApp_=e};t.exports=n;var i=e("./templates/trophy.html.ejs"),r=e("./utils"),o=(r.getLodash(),e("./codegen")),s=e("./locale"),a=e("./dom"),l=(e("./xml"),e("./feedbackBlocks")),u=e("./constants"),c=u.TestResults,p=u.KeyCodes,h=e("./puzzleRatingUtils"),d=e("./templates/DialogButtons"),f=e("./templates/feedback/CodeWritten"),m=e("./templates/feedback/GeneratedCode");n.prototype.displayFeedback=function(e,t,n,i,r){function o(e){var t=$('<iframe id="print_frame" style="display: none"></iframe>');t.appendTo("body"),t[0].contentWindow.document.write("<img src='"+e+"'/>"),t[0].contentWindow.document.write("<script>if (document.execCommand('print', false, null)) {  } else { window.print();  } </script>"),$("#print_frame").remove()}e.level=e.level||{},e.numTrophies=this.numTrophiesEarned_(e),e.response&&e.response.new_level_completed&&trackEvent("Puzzle","Completed",e.response.level_path,e.response.level_attempts);var u=e.response&&e.response.share_failure,c=e.response&&e.response.level_source,p=e.showingSharing&&!u&&c,d=this.canContinueToNextLevel(e.feedbackType),f=this.studioApp_.enableShowCode&&this.studioApp_.enableShowLinesCount&&d&&!p,m=document.createElement("div"),g=d&&p?this.createSharingDiv(e):null,b=f?this.getShowCodeElement_(e):null,v=u?this.getShareFailure_(e):null;u&&trackEvent("Share","Failure",e.response.share_failure.type);var y;this.studioApp_.isUsingBlockly()&&(y=new l(e,this.getMissingBlocks_(t,n),this.getMissingBlocks_(i,r),this.studioApp_));var _=this.getFeedbackMessage_(e);if(_&&m.appendChild(_),e.numTrophies){if(e.numTrophies>0)for(var w=0;w<e.numTrophies;w++){var E=e.response.trophy_updates[w][0],x=e.response.trophy_updates[w][1];trackEvent("Trophy",E,x)}var k=this.getTrophiesElement_(e);m.appendChild(k)}if(y&&y.div&&(_&&this.useSpecialFeedbackDesign_(e)?_.appendChild(y.div):m.appendChild(y.div)),g&&m.appendChild(g),p){var T=document.createElement("div");T.className="share-code-spacer",m.appendChild(T)}v&&m.appendChild(v),b&&m.appendChild(b),e.level.isK1&&(m.className+=" k1"),e.appDiv&&m.appendChild(e.appDiv),m.className+=d?" win-feedback":" failure-feedback";var S=e.response&&"no more levels"===e.response.message;m.appendChild(this.getFeedbackButtons_({feedbackType:e.feedbackType,tryAgainText:e.tryAgainText,keepPlayingText:e.keepPlayingText,continueText:e.continueText,showPreviousButton:e.level.showPreviousLevelButton,isK1:e.level.isK1,freePlay:e.level.freePlay,finalLevel:S}));var C,B=m.querySelector("#again-button"),R=m.querySelector("#hint-request-button"),P=m.querySelector("#back-button"),j=m.querySelector("#continue-button"),I=!B&&!P,A=j&&(I||e.defaultToContinue),M=this.getMissingBlocks_(i,1).blocksToDisplay.map(function(e){return e.alreadySeen=!1,e}),N=function(){M.filter(function(e){return y&&y.xml&&y.xml.indexOf(e.blockDisplayXML)>-1}).forEach(function(e){e.alreadySeen=!0})},O=A?e.onContinue:function(){this.studioApp_.displayMissingBlockHints(M)}.bind(this);e.hideIcon||(C=d?this.studioApp_.winIcon:this.studioApp_.failureIcon);var L=A?"#continue-button":"#again-button",D=this.createModalDialog({Dialog:e.Dialog,contentDiv:m,icon:C,defaultBtnSelector:L,onHidden:O,id:"feedback-dialog"});if(this.useSpecialFeedbackDesign_(e)&&"white_background"==e.response.design&&(document.getElementById("feedback-dialog").className+=" white-background",document.getElementById("feedback-content").className+=" light-yellow-background"),B&&a.addClickTouchEvent(B,function(){D.hide()}),P&&a.addClickTouchEvent(P,function(){D.hide(),e.backToPreviousLevel()}),R){var F,U=e.response&&e.response.hint_view_requests&&e.response.hint_view_requests.some(function(t){var n=t.feedback_type===e.feedbackType;return y&&y.xml&&(n=n&&t.feedback_xml===y.xml),n});if(e.response&&e.response.abtests&&(F=e.response.abtests.hint_button),U||F)R.parentNode.removeChild(R),N();else{var V=this.getFeedbackMessage_({message:s.tryBlocksBelowFeedback()});y&&y.div&&y.hide(),a.addClickTouchEvent(R,function(){N();var t=_.parentNode;t.replaceChild(V,_),R.parentNode.removeChild(R),y&&y.div&&y.show(),e.response.hint_view_request_url&&$.ajax({url:e.response.hint_view_request_url,type:"POST",data:{script_id:e.response.script_id,level_id:e.response.level_id,feedback_type:e.feedbackType,feedback_xml:y?y.xml:void 0}})})}}j&&(e.response&&e.response.puzzle_ratings_enabled&&m.appendChild(h.buildPuzzleRatingButtons()),a.addClickTouchEvent(j,function(){D.hide(),e.response&&e.response.puzzle_ratings_enabled&&h.cachePuzzleRating(m,{script_id:e.response.script_id,level_id:e.response.level_id}),A||e.onContinue()}));var z=m.querySelector("#save-to-gallery-button");z&&e.response&&e.response.save_to_gallery_url&&a.addClickTouchEvent(z,function(){$.post(e.response.save_to_gallery_url,function(){$("#save-to-gallery-button").prop("disabled",!0).text("Saved!")})});var H=m.querySelector("#print-button");H&&a.addClickTouchEvent(H,function(){o(e.feedbackImage)}),D.show({backdrop:"flappy"===e.app?"static":!0}),y&&y.div&&y.render()},n.prototype.getNumBlocksUsed=function(){var e;if(this.studioApp_.editCode){var t=0,n=this.getGeneratedCodeString_().split("\n");for(e=0;e<n.length;e++)n[e].length>1&&("/"!=n[e][0]||"/"!=n[e][1])&&t++;return t}return this.getUserBlocks_().length},n.prototype.getNumCountableBlocks=function(){var e;if(this.studioApp_.editCode){var t=0,n=this.getGeneratedCodeString_().split("\n");for(e=0;e<n.length;e++)n[e].length>1&&("/"!=n[e][0]||"/"!=n[e][1])&&t++;return t}return this.getCountableBlocks_().length},n.prototype.getFeedbackButtons_=function(e){var t=document.createElement("div");t.id="feedbackButtons";var n="";return e.feedbackType!==c.ALL_PASS&&(n=r.valueOr(e.tryAgainText,s.tryAgain())),e.keepPlayingText&&(n=e.keepPlayingText),ReactDOM.render(React.createElement(d,{previousLevel:!this.canContinueToNextLevel(e.feedbackType)&&e.showPreviousButton,tryAgain:n,continueText:e.continueText||(e.finalLevel?s.finish():s["continue"]()),nextLevel:this.canContinueToNextLevel(e.feedbackType),shouldPromptForHint:this.shouldPromptForHint(e.feedbackType),userId:e.userId,isK1:e.isK1,assetUrl:this.studioApp_.assetUrl,freePlay:e.freePlay}),t),t},n.prototype.getShareFailure_=function(t){var n=t.response.share_failure,i=document.createElement("div");return i.innerHTML=e("./templates/shareFailure.html.ejs")({shareFailure:n}),i},n.prototype.useSpecialFeedbackDesign_=function(e){return e.response&&e.response.design&&e.response.hint},n.prototype.getFeedbackMessage_=function(e){var t=document.createElement("p");t.className="congrats";var n;if(e.feedbackType!==c.ALL_PASS&&e.level&&e.level.failureMessageOverride)n=e.level.failureMessageOverride;else if(e.message)n=e.message;else if(e.response&&e.response.share_failure)n=s.shareFailure();else if(e.response&&e.response.hint)n=e.response.hint;else switch(e.feedbackType){case c.RUNTIME_ERROR_FAIL:n=s.runtimeErrorMsg({lineNumber:e.executionError.lineNumber});break;case c.SYNTAX_ERROR_FAIL:n=s.syntaxErrorMsg({lineNumber:e.executionError.lineNumber});break;case c.EMPTY_BLOCK_FAIL:n=e.level.emptyBlocksErrorMsg||s.emptyBlocksErrorMsg();break;case c.EMPTY_FUNCTION_BLOCK_FAIL:n=e.level.emptyFunctionBlocksErrorMsg?e.level.emptyFunctionBlocksErrorMsg:Blockly.useContractEditor||Blockly.useModalFunctionEditor?s.errorEmptyFunctionBlockModal():s.emptyFunctionBlocksErrorMsg();break;case c.TOO_FEW_BLOCKS_FAIL:n=e.level.tooFewBlocksMsg||e.level.levelIncompleteError||s.levelIncompleteError();break;case c.LEVEL_INCOMPLETE_FAIL:case c.LOG_CONDITION_FAIL:n=e.level.levelIncompleteError||s.levelIncompleteError();break;case c.EXTRA_TOP_BLOCKS_FAIL:var i=Blockly.mainBlockSpace.getTopBlocks().some(function(e){return"when_run"===e.type&&e.isUserVisible()}),r=i?s.extraTopBlocksWhenRun():s.extraTopBlocks();n=e.level.extraTopBlocks||r;break;case c.APP_SPECIFIC_FAIL:n=e.level.appSpecificFailError;break;case c.GENERIC_LINT_FAIL:n=s.errorGenericLintError();break;case c.UNUSED_PARAM:n=s.errorUnusedParam();break;case c.UNUSED_FUNCTION:n=s.errorUnusedFunction();break;case c.PARAM_INPUT_UNATTACHED:n=s.errorParamInputUnattached();break;case c.INCOMPLETE_BLOCK_IN_FUNCTION:n=s.errorIncompleteBlockInFunction();break;case c.QUESTION_MARKS_IN_NUMBER_FIELD:n=s.errorQuestionMarksInNumberField();break;case c.TOO_MANY_BLOCKS_FAIL:var o=e.appStrings&&e.appStrings.tooManyBlocksFailMsgFunction||s.numBlocksNeeded;n=o({numBlocks:this.studioApp_.IDEAL_BLOCK_NUM,puzzleNumber:e.level.puzzle_number||0});break;case c.APP_SPECIFIC_ACCEPTABLE_FAIL:n=e.level.appSpecificAcceptableFailError;break;case c.EDIT_BLOCKS:n=e.level.edit_blocks_success;break;case c.MISSING_BLOCK_UNFINISHED:case c.MISSING_BLOCK_FINISHED:n=e.level.missingRequiredBlocksErrorMsg||s.missingRequiredBlocksErrorMsg();break;case c.MISSING_RECOMMENDED_BLOCK_UNFINISHED:n=s.missingRecommendedBlocksErrorMsg();break;case c.MISSING_RECOMMENDED_BLOCK_FINISHED:var a=this.getNumCountableBlocks();n=this.studioApp_.IDEAL_BLOCK_NUM&&a>this.studioApp_.IDEAL_BLOCK_NUM?s.numBlocksNeeded({numBlocks:this.studioApp_.IDEAL_BLOCK_NUM,puzzleNumber:e.level.puzzle_number||0}):s.completedWithoutRecommendedBlock({puzzleNumber:e.level.puzzle_number||0});break;case c.NESTED_FOR_SAME_VARIABLE:n=s.nestedForSameVariable();break;case c.ALL_PASS:case c.FREE_PLAY:var l=e.response&&"no more levels"===e.response.message,u=null;e.response&&e.response.stage_changing&&(u=e.response.stage_changing.previous.name);var p={numTrophies:e.numTrophies,stageNumber:0,stageName:u,puzzleNumber:e.level.puzzle_number||0};if(e.feedbackType!==c.FREE_PLAY||e.level.disableSharing)if(e.numTrophies>0)n=l?s.finalStageTrophies(p):u?s.nextStageTrophies(p):s.nextLevelTrophies(p);else{var h=e.appStrings&&e.appStrings.nextLevelMsg||s.nextLevel(p);n=l?s.finalStage(p):u?s.nextStage(p):h}else{var d=e.appStrings&&e.appStrings.reinfFeedbackMsg||"";e.level.disableFinalStageMessage?n=d:(n=l?s.finalStage(p)+" ":"",n+=d)}}if($(t).text(n),this.useSpecialFeedbackDesign_(e)){var f=document.createElement("div");f.className="feedback-callout",f.id="feedback-content";var m=document.createElement("img");m.className="hint-image",m.src=this.studioApp_.assetUrl("media/lightbulb_for_"+e.response.design+".png"),f.appendChild(m);var g=document.createElement("p");return $(g).text(s.hintHeader()),f.appendChild(g),g.className="hint-header",f.appendChild(t),f}return t},n.prototype.createSharingDiv=function(t){if(this.studioApp_.disableSocialShare||window.appOptions.disableSocialShare)t.twitterUrl=void 0,t.facebookUrl=void 0,t.sendToPhone=!1;else{var n="https://twitter.com/intent/tweet?url="+t.response.level_source;n+=t.twitter&&void 0!==t.twitter.text?"&text="+encodeURI(t.twitter.text):"&text="+encodeURI(s.defaultTwitterText()+" @codeorg"),n+=t.twitter&&void 0!==t.twitter.hashtag?"&hashtags="+t.twitter.hashtag:"&hashtags=HourOfCode",n+=t.twitter&&void 0!==t.twitter.related?"&related="+t.twitter.related:"&related=codeorg",t.twitterUrl=n;var i="https://www.facebook.com/sharer/sharer.php?u="+t.response.level_source;t.facebookUrl=i}t.assetUrl=this.studioApp_.assetUrl;var r=document.createElement("div");r.setAttribute("id","sharing"),r.innerHTML=e("./templates/sharing.html.ejs")({options:t}),window.dashboard&&window.dashboard.popupWindow&&$(r).find("a.popup-window").click(window.dashboard.popupWindow);var o=r.querySelector("#sharing-input");o&&a.addClickTouchEvent(o,function(){o.focus(),o.select(),o.setSelectionRange(0,9999)});var l=r.querySelector("#sharing-phone");return l&&t.sendToPhone&&a.addClickTouchEvent(l,function(){var e=r.querySelector("#send-to-phone");if($(e).is(":hidden")){$(e).show();var n=$(r.querySelector("#phone")),i=!1,o=r.querySelector("#phone-submit");o.disabled=!0,n.mask("(000) 000-0000",{onComplete:function(){i||(o.disabled=!1)},onChange:function(){o.disabled=!0}}),n.focus(),a.addClickTouchEvent(o,function(){var e=$(r.querySelector("#phone")),n=jQuery.param({level_source:t.response.level_source_id,phone:e.val()});$(o).val("Sending.."),e.prop("readonly",!0),o.disabled=!0,i=!0,jQuery.post(t.response.phone_share_url,n).done(function(){$(o).text("Sent!"),trackEvent("SendToPhone","success")}).fail(function(){$(o).text("Error!"),trackEvent("SendToPhone","error")})})}else $(e).hide()}),r},n.prototype.numTrophiesEarned_=function(e){return e.response&&e.response.trophy_updates?e.response.trophy_updates.length:0},n.prototype.getTrophiesElement_=function(e){for(var t="",n=0;n<e.numTrophies;n++)t+=i({img_url:e.response.trophy_updates[n][2],concept_name:e.response.trophy_updates[n][0]});var r=document.createElement("div");return r.innerHTML=t,r},n.prototype.getShowCodeElement_=function(e){var t=document.createElement("div");t.setAttribute("id","show-code");var n=this.getNumBlocksUsed(),i=e.response&&e.response.total_lines&&e.response.total_lines!==n,r=i?e.response.total_lines:0,o=this.getGeneratedCodeProperties_({generatedCodeDescription:e.appStrings&&e.appStrings.generatedCodeDescription});return ReactDOM.render(React.createElement(f,{numLinesWritten:n,totalNumLinesWritten:r},React.createElement(m,{message:o.message,code:o.code})),t),$.fn.details&&$(t).find("details").details(),t},n.prototype.canContinueToNextLevel=function(e){return e===c.ALL_PASS||e===c.TOO_MANY_BLOCKS_FAIL||e===c.APP_SPECIFIC_ACCEPTABLE_FAIL||e===c.MISSING_RECOMMENDED_BLOCK_FINISHED||e===c.FREE_PLAY},n.prototype.shouldPromptForHint=function(e){return e===c.MISSING_BLOCK_UNFINISHED||e===c.MISSING_BLOCK_FINISHED||e===c.MISSING_RECOMMENDED_BLOCK_FINISHED||e===c.MISSING_RECOMMENDED_BLOCK_UNFINISHED},n.prototype.getGeneratedCodeString_=function(){return this.studioApp_.editCode?this.studioApp_.editor?this.studioApp_.editor.getValue():"":o.workspaceCode(Blockly)},n.prototype.getGeneratedCodeProperties_=function(e){e=e||{};var t={berkeleyLink:"<a href='http://bjc.berkeley.edu/' target='_blank'>Berkeley</a>",harvardLink:"<a href='https://cs50.harvard.edu/' target='_blank'>Harvard</a>"},n=this.getGeneratedCodeDescription(t,e.generatedCodeDescription),i=this.studioApp_.polishGeneratedCodeString(this.getGeneratedCodeString_());return{message:n,code:i}},n.prototype.getGeneratedCodeDescription=function(e,t){return this.studioApp_.editCode?"":t?t:s.generatedCodeInfo(e)},n.prototype.showGeneratedCode=function(e,t){var n=document.createElement("div"),i=this.getGeneratedCodeProperties_({generatedCodeDescription:t&&t.generatedCodeDescription});ReactDOM.render(React.createElement("div",null,React.createElement(m,{message:i.message,code:i.code}),React.createElement(d,{ok:!0})),n);var r=this.createModalDialog({Dialog:e,contentDiv:n,icon:this.studioApp_.icon,defaultBtnSelector:"#ok-button"}),o=n.querySelector("#ok-button");o&&a.addClickTouchEvent(o,function(){r.hide()}),r.show()},n.prototype.showClearPuzzleConfirmation=function(e,t,n){this.showSimpleDialog(e,{headerText:s.clearPuzzleConfirmHeader(),bodyText:s.clearPuzzleConfirm(),confirmText:s.clearPuzzle(),cancelText:s.dialogCancel(),onConfirm:n,onCancel:null,hideIcon:t})},n.prototype.showSimpleDialog=function(e,t){var n={"margin-bottom":"10px"},i=ReactDOM.render(React.createElement("div",null,t.headerText&&React.createElement("p",{"class":"dialog-title"},t.headerText),t.bodyText&&React.createElement("p",null,t.bodyText),t.prompt&&React.createElement("input",{style:n,value:t.promptPrefill}),React.createElement(d,{confirmText:t.confirmText,cancelText:t.cancelText,cancelButtonClass:t.cancelButtonClass})),document.createElement("div")),r=this.createModalDialog({Dialog:e,contentDiv:i,icon:t.hideIcon?null:this.studioApp_.icon,defaultBtnSelector:"#again-button"}),o=i.querySelector("#again-button"),s=i.querySelector("input");o&&a.addClickTouchEvent(o,function(){t.onCancel&&(s?t.onCancel(s.value):t.onCancel()),r.hide()});var l=i.querySelector("#confirm-button");l&&a.addClickTouchEvent(l,function(){t.onConfirm&&t.onConfirm(),r.hide()}),r.show(),s&&(s.focus(),s.select())},n.prototype.showToggleBlocksError=function(e){var t=document.createElement("div");t.innerHTML=s.toggleBlocksErrorMsg();var n=document.createElement("div");ReactDOM.render(React.createElement(d,{ok:!0}),n),t.appendChild(n);var i=this.createModalDialog({Dialog:e,contentDiv:t,icon:this.studioApp_.icon,defaultBtnSelector:"#ok-button"}),r=n.querySelector("#ok-button");r&&a.addClickTouchEvent(r,function(){i.hide()}),i.show()},n.prototype.getEmptyContainerBlock_=function(){var e=Blockly.mainBlockSpace.getAllBlocks();return Blockly.findEmptyContainerBlock(e)},n.prototype.checkForEmptyContainerBlockFailure_=function(){var e=this.getEmptyContainerBlock_();if(!e)return c.ALL_PASS;var t=e.type;return"procedures_defnoreturn"===t||"procedures_defreturn"===t?c.EMPTY_FUNCTION_BLOCK_FAIL:c.EMPTY_BLOCK_FAIL},n.prototype.throwOnInvalidExampleBlocks=function(e,t){if(!e)throw new Error("Invalid Call Block");if(!t)throw new Error("Invalid Result Block");if(t.hasUnfilledFunctionalInput())throw new Error("Result has unfilled inputs");if(e.hasUnfilledFunctionalInput())throw new Error("Call has unfilled inputs")},n.prototype.hasAllBlocks_=function(e){var t=1;return 0===this.getMissingBlocks_(e,t).blocksToDisplay.length},n.prototype.getUserBlocks_=function(){var e=Blockly.mainBlockSpace.getAllBlocks(),t=e.filter(function(e){var t=!e.disabled&&"when_run"!==e.type;return Blockly.mainBlockSpace.isReadOnly()||(t=t&&e.isEditable()),t});return t},n.prototype.getCountableBlocks_=function(){var e=Blockly.mainBlockSpace.getAllBlocks(),t=e.filter(function(e){return!e.disabled});return t},n.prototype.getMissingBlocks_=function(e,t){var n=[],i=null,r=null;if(e&&e.length)for(var o=this.getUserBlocks_(),s=0,a=0;a<e.length&&t>s;a++){for(var l=e[a],u=!1,c=0;c<l.length;c++){var p=l[c].test;if("string"==typeof p){if(r=r||Blockly.Generator.blockSpaceToCode("JavaScript"),-1!==r.indexOf(p)){u=!0;break}}else{if("function"!=typeof p)throw new Error("Bad test: "+p);if(o.some(p)){u=!0;break}i=l[c].message||i}}u||(s++,n=n.concat(e[a][0]))}return{blocksToDisplay:n,message:i}},n.prototype.hasExtraTopBlocks=function(){if(this.studioApp_.editCode)return!1;for(var e=Blockly.mainBlockSpace.getTopBlocks(),t=0;t<e.length;t++)if(!e[t].disabled&&"functional_definition"!==e[t].type&&(e[t].previousConnection||e[t].outputConnection))return!0;return!1},n.prototype.getTestResults=function(e,t,n,i,r){if(r=r||{},this.studioApp_.editCode)return e?this.studioApp_.TestResults.ALL_PASS:r.executionError&&r.executionError.err instanceof SyntaxError?this.studioApp_.TestResults.SYNTAX_ERROR_FAIL:r.executionError?this.studioApp_.TestResults.RUNTIME_ERROR_FAIL:this.studioApp_.TestResults.TOO_FEW_BLOCKS_FAIL;if(i){var o=this.checkForEmptyContainerBlockFailure_();if(o!==c.ALL_PASS)return o}if(!r.allowTopBlocks&&this.hasExtraTopBlocks())return c.EXTRA_TOP_BLOCKS_FAIL;if(this.studioApp_.hasDuplicateVariablesInForLoops())return c.NESTED_FOR_SAME_VARIABLE;if(Blockly.useContractEditor||Blockly.useModalFunctionEditor){if(this.hasUnusedParam_())return c.UNUSED_PARAM;if(this.hasUnusedFunction_())return c.UNUSED_FUNCTION;if(this.hasParamInputUnattached_())return c.PARAM_INPUT_UNATTACHED;if(this.hasIncompleteBlockInFunction_())return c.INCOMPLETE_BLOCK_IN_FUNCTION}if(this.hasQuestionMarksInNumberField())return c.QUESTION_MARKS_IN_NUMBER_FIELD;if(!this.hasAllBlocks_(t))return e?c.MISSING_BLOCK_FINISHED:c.MISSING_BLOCK_UNFINISHED;if(!this.hasAllBlocks_(n))return e?c.MISSING_RECOMMENDED_BLOCK_FINISHED:c.MISSING_RECOMMENDED_BLOCK_UNFINISHED;var s=this.getNumCountableBlocks();return e?this.studioApp_.IDEAL_BLOCK_NUM&&s>this.studioApp_.IDEAL_BLOCK_NUM?c.TOO_MANY_BLOCKS_FAIL:c.ALL_PASS:this.studioApp_.IDEAL_BLOCK_NUM&&this.studioApp_.IDEAL_BLOCK_NUM!==1/0&&s<this.studioApp_.IDEAL_BLOCK_NUM?c.TOO_FEW_BLOCKS_FAIL:c.LEVEL_INCOMPLETE_FAIL},n.prototype.createModalDialog=function(e){var t=document.createElement("div");if(e.icon){var n;n=document.createElement("img"),n.className="modal-image",n.src=e.icon,t.appendChild(n)}else e.contentDiv.className+=" no-modal-icon";e.markdownMode&&(t.className+=" markdown"),e.contentDiv.className+=" modal-content",t.appendChild(e.contentDiv);var i=e.contentDiv.querySelector(e.defaultBtnSelector),r=function(e){if(e.keyCode==p.ENTER||e.keyCode==p.SPACE){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});i.dispatchEvent(t),e.stopPropagation(),e.preventDefault()}},o=e.scrollableSelector||".modal-content",s=e.scrollContent?o:null;return new e.Dialog({body:t,onHidden:e.onHidden,onKeydown:i?r:void 0,autoResizeScrollableElement:s,id:e.id,header:e.header})},n.prototype.hasQuestionMarksInNumberField=function(){return Blockly.mainBlockSpace.getAllBlocks().some(function(e){return e.getTitles().some(function(e){return"???"===e.value_||"???"===e.text_})})},n.prototype.hasUnusedParam_=function(){var e=this;return Blockly.mainBlockSpace.getAllBlocks().some(function(t){var n=t.parameterNames_;return n&&n.some(function(n){return!e.hasMatchingDescendant_(t,function(e){return("parameters_get"===e.type||"functional_parameters_get"===e.type||"variables_get"===e.type)&&e.getTitleValue("VAR")===n})})})},n.prototype.hasParamInputUnattached_=function(){return Blockly.mainBlockSpace.getAllBlocks().some(function(e){return/^procedures_call/.test(e.type)?e.inputList.filter(function(e){return/^ARG/.test(e.name)}).some(function(e){return!e.connection.targetConnection}):!1})},n.prototype.hasUnusedFunction_=function(){var e=[],t={};return Blockly.mainBlockSpace.getAllBlocks().forEach(function(n){var i=n.getTitleValue("NAME");/^procedures_def/.test(n.type)&&n.userCreated?e.push(i):/^procedures_call/.test(n.type)&&(t[i]=!0)}),e.some(function(e){return!t[e]})},n.prototype.hasIncompleteBlockInFunction_=function(){var e=this;return Blockly.mainBlockSpace.getAllBlocks().some(function(t){return t.parameterNames_?e.hasMatchingDescendant_(t,function(e){return e.inputList.some(function(e){return e.type===Blockly.INPUT_VALUE&&!e.connection.targetConnection})}):!1})},n.prototype.hasMatchingDescendant_=function(e,t){if(t(e))return!0;var n=this;return e.childBlocks_.some(function(e){return n.hasMatchingDescendant_(e,t)})}},{"./codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./constants":"/home/ubuntu/staging/apps/build/js/constants.js","./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./feedbackBlocks":"/home/ubuntu/staging/apps/build/js/feedbackBlocks.js","./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./puzzleRatingUtils":"/home/ubuntu/staging/apps/build/js/puzzleRatingUtils.js","./templates/DialogButtons":"/home/ubuntu/staging/apps/build/js/templates/DialogButtons.jsx","./templates/feedback/CodeWritten":"/home/ubuntu/staging/apps/build/js/templates/feedback/CodeWritten.jsx","./templates/feedback/GeneratedCode":"/home/ubuntu/staging/apps/build/js/templates/feedback/GeneratedCode.jsx","./templates/shareFailure.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/shareFailure.html.ejs","./templates/sharing.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/sharing.html.ejs","./templates/trophy.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/trophy.html.ejs","./utils":"/home/ubuntu/staging/apps/build/js/utils.js","./xml":"/home/ubuntu/staging/apps/build/js/xml.js"}],"/home/ubuntu/staging/apps/build/js/templates/trophy.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("<div class='trophy'><img class='trophyimg' src='",escape(img_url),"'><br>",escape(concept_name),"</div>\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/sharing.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var e=require("../locale");buf.push("\n"),options.feedbackImage?buf.push('\n  <img class="feedback-image" src="',escape(options.feedbackImage),'"/>\n  <div class="sharing-content">\n'):buf.push('\n  <div class="sharing-content no-image">\n'),buf.push("\n\n\n"),options.response&&options.response.level_source&&(buf.push("\n  "),options.appStrings&&options.appStrings.sharingText&&buf.push("\n    <div>",escape(options.appStrings.sharingText),"</div>\n  "),buf.push('\n\n  <div>\n    <input type="text" id="sharing-input" value=',escape(options.response.level_source)," readonly>\n  </div>\n  <div class='social-buttons'>\n    "),options.facebookUrl&&buf.push("      <a href='",escape(options.facebookUrl),'\' target="_blank" class="popup-window">\n        <button>\n          <i class="fa fa-facebook fa-lg"></i>\n        </button>\n      </a>\n    '),buf.push("    "),options.twitterUrl&&buf.push("      <a href='",escape(options.twitterUrl),'\' target="_blank" class="popup-window">\n        <button>\n          <i class="fa fa-twitter fa-lg"></i>\n        </button>\n      </a>\n    '),buf.push("    "),options.onMainPage||options.disablePrinting||buf.push('\n      <button id="print-button">\n        <i class="fa fa-print fa-lg"></i>\n      </button>\n    '),buf.push("\n    "),options.alreadySaved?buf.push('\n      <button class="saved-to-gallery" disabled>\n        ',escape(e.savedToGallery()),"\n      </button>\n    "):options.saveToGalleryUrl&&!options.disableSaveToGallery&&buf.push('\n      <button id="save-to-gallery-button" class="launch">\n        ',escape(e.saveToGallery()),"\n      </button>\n    "),buf.push("\n    "),options.sendToPhone&&buf.push('      <button id="sharing-phone">\n        <i class="fa fa-mobile fa-lg"></i>\n        ',escape(e.sendToPhone()),"\n      </button>\n    "),buf.push('\n  </div>\n  <div id="send-to-phone" style="display: none">\n    <label for="phone">Enter a US phone number:</label>\n    <input type="tel" id="phone" name="phone" />\n    <button id="phone-submit" onClick="return false;">Send</button>\n    <div id="phone-charges">A text message will be sent via <a href="http://twilio.com" target="_blank">Twilio</a>. Charges may apply to the recipient.</div>\n  </div>\n')),buf.push("\n\n</div>\n")
}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/shareFailure.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<p id="share-fail-explanation">',escape(shareFailure.message),"</p>\n\n"),shareFailure.contents&&buf.push('\n  <div class="share-fail-excerpt">\n    <pre class="generatedCode">',escape(shareFailure.contents),"</pre>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/templates/feedback/GeneratedCode.jsx":[function(e,t){"use strict";var n=(e("../../locale"),React.createClass({displayName:"GeneratedCode",propTypes:{message:React.PropTypes.string.isRequired,code:React.PropTypes.string.isRequired},render:function(){return React.createElement("div",{className:"generated-code-container"},React.createElement("p",{className:"generatedCodeMessage",dangerouslySetInnerHTML:{__html:this.props.message}}),React.createElement("pre",{className:"generatedCode",dangerouslySetInnerHTML:{__html:this.props.code}}))}}));t.exports=n},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js"}],"/home/ubuntu/staging/apps/build/js/templates/feedback/CodeWritten.jsx":[function(e,t){"use strict";var n=e("../../locale"),i=React.createClass({displayName:"CodeWritten",propTypes:{numLinesWritten:React.PropTypes.number.isRequired,totalNumLinesWritten:React.PropTypes.number.isRequired},render:function(){var e,t,i,r={summary:{fontSize:"18px",lineHeight:"20px",fontWeight:"normal",outline:"none",padding:"5px"}};return e=React.createElement("p",{id:"num-lines-of-code",className:"lines-of-code-message"},n.numLinesOfCodeWritten({numLines:this.props.numLinesWritten})),0!==this.props.totalNumLinesWritten&&(t=React.createElement("p",{id:"total-num-lines-of-code",className:"lines-of-code-message"},n.totalNumLinesOfCodeWritten({numLines:this.props.totalNumLinesWritten}))),i=React.createElement("details",{className:"show-code"},React.createElement("summary",{role:"button",style:r.summary},React.createElement("b",null,n.showGeneratedCode())),this.props.children),React.createElement("div",null,e,t,i)}});t.exports=i},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js"}],"/home/ubuntu/staging/apps/build/js/templates/DialogButtons.jsx":[function(e,t){"use strict";var n=e("../locale"),i=e("./Lightbulb"),r=React.createClass({displayName:"DialogButtons",propTypes:{assetUrl:React.PropTypes.func,cancelButtonClass:React.PropTypes.string,cancelText:React.PropTypes.string,confirmText:React.PropTypes.string,continueText:React.PropTypes.string,freePlay:React.PropTypes.bool,isK1:React.PropTypes.bool,nextLevel:React.PropTypes.bool,ok:React.PropTypes.bool,previousLevel:React.PropTypes.bool,shouldPromptForHint:React.PropTypes.bool,tryAgain:React.PropTypes.string},render:function(){var e,t,r,o,s,a,l,u={confirmButton:{"float":"right"},nextButton:{"float":"right"},lightbulb:{margin:"-9px 0px -9px -5px"}};return this.props.ok&&(e=React.createElement("div",{className:"farSide"},React.createElement("button",{id:"ok-button",className:"secondary"},n.dialogOK()))),this.props.cancelText&&(t=React.createElement("button",{id:"again-button",className:this.props.cancelButtonClass||""},this.props.cancelText)),this.props.confirmText&&(r=React.createElement("button",{id:"confirm-button",className:"launch",style:u.confirmButton},this.props.confirmText)),this.props.previousLevel&&(o=React.createElement("button",{id:"back-button",className:"launch"},n.backToPreviousLevel())),this.props.tryAgain&&(this.props.isK1&&!this.props.freePlay?a=React.createElement("div",{id:"again-button",className:"launch arrow-container arrow-left"},React.createElement("div",{className:"arrow-head"},React.createElement("img",{src:this.props.assetUrl("media/tryagain-arrow-head.png"),alt:"Arrowhead",width:"67",height:"130"})),React.createElement("div",{className:"arrow-text"},this.props.tryAgain)):(this.props.shouldPromptForHint&&(s=React.createElement("button",{id:"hint-request-button",className:"lightbulb-button"},React.createElement(i,{size:32,style:u.lightbulb}),n.hintRequest())),a=React.createElement("button",{id:"again-button",className:"launch"},this.props.tryAgain))),this.props.nextLevel&&(l=this.props.isK1&&!this.props.freePlay?React.createElement("div",{id:"continue-button",className:"launch arrow-container arrow-right"},React.createElement("div",{className:"arrow-head"},React.createElement("img",{src:this.props.assetUrl("media/next-arrow-head.png"),alt:"Arrowhead",width:"66",height:"130"})),React.createElement("div",{className:"arrow-text"},this.props.continueText)):React.createElement("button",{id:"continue-button",className:"launch",style:u.nextButton},this.props.continueText)),React.createElement("div",null,e,t,r,o,s,a,l)}});t.exports=r},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","./Lightbulb":"/home/ubuntu/staging/apps/build/js/templates/Lightbulb.jsx"}],"/home/ubuntu/staging/apps/build/js/puzzleRatingUtils.js":[function(e,t){"use strict";var n={};t.exports=n;var i=e("./dom");n.buildPuzzleRatingButtons=function(){var t=document.createElement("div");t.id="puzzleRatingButtons",t.innerHTML=e("./templates/puzzleRating.html.ejs")();for(var n,r=t.querySelectorAll(".puzzle-rating-btn"),o=function(){for(var e,t=0;e=r[t];t++)e!=this&&$(e).removeClass("enabled");$(this).toggleClass("enabled")},s=0;n=r[s];s++)i.addClickTouchEvent(n,o);return t},n.getPuzzleRatings_=function(){var e=localStorage.getItem("puzzleRatings");try{return e?JSON.parse(e):[]}catch(t){return[]}},n.setPuzzleRatings_=function(e){localStorage.setItem("puzzleRatings",JSON.stringify(e))},n.removePuzzleRating_=function(e){var t=n.getPuzzleRatings_().filter(function(t){var n=e.level_id===t.level_id&&e.script_id===t.script_id&&e.rating===t.rating;return!n});n.setPuzzleRatings_(t)},n.cachePuzzleRating=function(e,t){var i=e.querySelector(".puzzle-rating-btn.enabled");if(i){var r=$.extend({},t,{rating:i.getAttribute("data-value")}),o=n.getPuzzleRatings_();o.push(r),n.setPuzzleRatings_(o)}},n.submitCachedPuzzleRatings=function(e){var t=n.getPuzzleRatings_();t.forEach(function(t){$.ajax({url:e,type:"POST",data:t,complete:function(){n.removePuzzleRating_(t)}})})}},{"./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./templates/puzzleRating.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/puzzleRating.html.ejs"}],"/home/ubuntu/staging/apps/build/js/templates/puzzleRating.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push()}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/feedbackBlocks.js":[function(e,t){"use strict";var n=e("./constants"),i=e("./xml").parseElement,r=n.TestResults,o=function(e,t,n){function i(t){s=t.blocksToDisplay,t.message&&(e.message=t.message)}var o=e.response&&e.response.hint&&0!==e.response.hint.indexOf("[{");if(o||e.feedbackType===r.MISSING_BLOCK_UNFINISHED||e.feedbackType===r.MISSING_BLOCK_FINISHED||e.feedbackType===r.MISSING_RECOMMENDED_BLOCK_UNFINISHED||e.feedbackType===r.MISSING_RECOMMENDED_BLOCK_FINISHED){var s=[];if(o){var a=e.response.hint.match(/(.*)(\[.*\])/);if(!a)return;e.response.hint=a[1].trim();try{s=JSON.parse(a[2])}catch(l){return}}else i(t.blocksToDisplay.length?t:n);0!==s.length&&(this.xml=this.generateXMLForBlocks_(s),this.div=document.createElement("div"),this.div.setAttribute("id","feedbackBlocks"),this.blockSpaceEditor=void 0)}};t.exports=o,o.prototype.render=function(){if(document.body.contains(this.div)){var e=i(this.xml),t=Blockly.BlockSpace.createReadOnlyBlockSpace(this.div,e);this.blockSpaceEditor=t.blockSpaceEditor}},o.prototype.show=function(){this.div.style.visibility="",this.div.style.height="",this.blockSpaceEditor&&this.blockSpaceEditor.svgResize()},o.prototype.hide=function(){this.div.style.visibility="hidden",this.div.style.height="0px"},o.prototype.generateXMLForBlocks_=function(e){for(var t,n,i=["<xml>"],r=10,o=0,s=200,a=120,l=2,u=0;u<e.length;u++){var c=e[u];if(c.blockDisplayXML)i.push(c.blockDisplayXML);else{if(i.push("<block",' type="',c.type,'" x="',r.toString(),'" y="',o,'">'),c.titles){var p=Object.keys(c.titles);for(t=0;t<p.length;t++)n=p[t],i.push('<title name="',n,'">',c.titles[n],"</title>")}if(c.values){var h=Object.keys(c.values);for(t=0;t<h.length;t++)n=h[t],i.push('<value name="',n,'">',c.values[n],"</value>")}c.extra&&i.push(c.extra),i.push("</block>"),(u+1)%l===0?(o+=a,r=0):r+=s}}return i.push("</xml>"),i.join("")}},{"./constants":"/home/ubuntu/staging/apps/build/js/constants.js","./xml":"/home/ubuntu/staging/apps/build/js/xml.js"}],"/home/ubuntu/staging/apps/build/js/clientApi.js":[function(e,t){"use strict";function n(e){return{basePath:function(t){return"/v3/"+e+"/"+dashboard.project.getCurrentId()+(t?"/"+t:"")},ajax:function(e,t,n,i,r){if(!window.dashboard)return void i({status:"No dashboard"});var o=new XMLHttpRequest;o.addEventListener("load",function(){return o.status>=400?void i(o):void n(o)}),o.addEventListener("error",function(){i(o)}),o.open(e,this.basePath(t),!0),o.send(r)}}}t.exports={assets:n("assets"),sources:n("sources")}},{}],"/home/ubuntu/staging/apps/build/js/block_utils.js":[function(e,t,n){"use strict";var i=e("./xml");n.createToolbox=function(e){return'<xml id="toolbox" style="display: none;">'+e+"</xml>"},n.blockOfType=function(e,t){var n="";if(t)for(var i in t)n+='<title name="'+i+'">'+t[i]+"</title>";return'<block type="'+e+'">'+n+"</block>"},n.blockWithNext=function(e,t,n){var i="";if(t)for(var r in t)i+='<title name="'+r+'">'+t[r]+"</title>";return'<block type="'+e+'">'+i+"<next>"+n+"</next></block>"},n.blocksFromList=function(e){return 1===e.length?this.blockOfType(e[0]):this.blockWithNext(e[0],{},this.blocksFromList(e.slice(1)))},n.createCategory=function(e,t,n){return'<category name="'+e+'"'+(n?' custom="'+n+'"':"")+">"+t+"</category>"},n.generateSimpleBlock=function(e,t,n){["name","title","tooltip","functionName"].forEach(function(e){if(!n[e])throw new Error('generateSimpleBlock requires param "'+e+'"')});var i=n.name,r=n.helpUrl||"",o=n.title,s=n.titleImage,a=n.tooltip,l=n.functionName;e.Blocks[i]={helpUrl:r,init:function(){this.setHSV(184,1,.74);var t=this.appendDummyInput();o&&t.appendTitle(o),s&&t.appendTitle(new e.FieldImage(s)),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(a)}},t[i]=function(){return l+"('block_id_"+this.id+"');\n"}},n.domToBlock=function(e){return Blockly.Xml.domToBlock(Blockly.mainBlockSpace,e)},n.domStringToBlock=function(e){return n.domToBlock(i.parseElement(e).firstChild)},n.forceInsertTopBlock=function(e,t){if(e=e||"",null===t||-1!==e.indexOf(t))return e;var n=i.parseElement(e),r=n.parentNode,o=r.createElement("block");o.setAttribute("type",t),o.setAttribute("movable","false"),o.setAttribute("deletable","false");for(var s=n.childNodes?n.childNodes.length:0,a=null,l=0;s>l&&null===a;){var u=n.childNodes[l];if(1===u.nodeType){var c=u.getAttribute("type");"procedures_defnoreturn"!==c&&"procedures_defreturn"!==c&&(a=n.removeChild(u),s--)}l++}if(null!==a){var p;/^functional/.test(t)?(p=r.createElement("functional_input"),p.setAttribute("name","ARG1")):p=r.createElement("next"),p.appendChild(a),o.appendChild(p)}return s>0?n.insertBefore(o,n.childNodes[0]):n.appendChild(o),i.serialize(n)},n.calcBlockXml=function(e,t){for(var i='<block type="'+e+'" inline="false">',r=1;r<=t.length;r++){i+='<functional_input name="ARG'+r+'">';var o=t[r-1];"number"==typeof o?o='<block type="functional_math_number"><title name="NUM">'+o+"</title></block>":/^<block/.test(o)||(o=n.calcBlockGetVar(o)),i+=o,i+="</functional_input>"}return i+="</block>"},n.calcBlockGetVar=function(e){return'<block type="functional_parameters_get" uservisible="false">  <mutation>    <outputtype>Number</outputtype>  </mutation>  <title name="VAR">'+e+"</title></block>"},n.mathBlockXml=function(e,t,n){var i='<block type="'+e+'" inline="false">';for(var r in n)i+='<title name="'+r+'">'+n[r]+"</title>";for(var o in t)i+='<functional_input name="'+o+'">'+t[o]+"</functional_input>";return i+="</block>"},n.functionalDefinitionXml=function(e,t,n,i){var r="<mutation>";return n.forEach(function(e){r+='<arg name="'+e.name+'" type="'+e.type+'"></arg>'}),r+="<outputtype>"+t+"</outputtype></mutation>",'<block type="functional_definition" inline="false">'+r+'<title name="NAME">'+e+'</title><functional_input name="STACK">'+i+"</functional_input></block>"},n.functionalCallXml=function(e,t,n){if(t.length!==n.length)throw new Error("must define contents for each arg");var i='<mutation name="'+e+'">';t.forEach(function(e){i+='<arg name="'+e.name+'" type="'+e.type+'"></arg>'}),i+="</mutation>";var r="";return n.forEach(function(e,t){r+='<functional_input name="ARG'+t+'">'+e+"</functional_input>"}),'<block type="functional_call">'+i+r+"</block>"}},{"./xml":"/home/ubuntu/staging/apps/build/js/xml.js"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletTooltipManager.js":[function(e,t){"use strict";function n(e,t,n,i,a){this.appMsg=e||{},this.tooltipsEnabled=!0,this.dropletConfig=t||{},this.codeFunctions=n,this.autocompletePaletteApisOnly=i,this.blockTypeToTooltip_={},this.docFuncMapping_={},this.dropletBlockTooltipManager_=new r(this),this.dropletAutocompletePopupTooltipManager_=new o(this),this.dropletAutocompleteParameterTooltipManager_=new s(this),this.Dialog=a}var i=e("./DropletFunctionTooltip"),r=e("./DropletBlockTooltipManager"),o=e("./DropletAutocompletePopupTooltipManager"),s=e("./DropletAutocompleteParameterTooltipManager"),a=e("../dropletUtils");n.prototype.registerDropletBlockModeHandlers=function(e){this.dropletBlockTooltipManager_.installTooltipsForEditor_(e)},n.prototype.registerDropletTextModeHandlers=function(e){this.dropletAutocompletePopupTooltipManager_.installTooltipsForEditor_(e),this.dropletAutocompleteParameterTooltipManager_.installTooltipsForEditor_(e)},n.prototype.registerBlocks=function(){var e=a.getAllAvailableDropletBlocks(this.dropletConfig,this.codeFunctions,this.autocompletePaletteApisOnly);e.forEach(function(e){var t=e.modeOptionName||e.func;e.docFunc?this.docFuncMapping_[t]=e.docFunc:this.blockTypeToTooltip_[t]=new i(this.appMsg,e)},this)},n.prototype.getDocFor=function(e){var t=this.docFuncMapping_[e]||e;return this.blockTypeToTooltip_[t]},n.prototype.showDocFor=function(e){if(this.tooltipsEnabled){var t=this.getDropletTooltip(e);if(t.customDocURL){var n=window.open(t.customDocURL,"_blank");return void n.focus()}$(".tooltipstered").tooltipster("hide");var i=new this.Dialog({body:$("<iframe>").addClass("markdown-instructions-container").width("100%").attr("src",t.getFullDocumentationURL()),autoResizeScrollableElement:".markdown-instructions-container",id:"block-documentation-lightbox"});i.show()}},n.prototype.getDropletTooltip=function(e){var t=this.getDocFor(e);if(!t)throw"Function name "+e+" not registered in documentation manager.";return t},n.prototype.setTooltipsEnabled=function(e){this.tooltipsEnabled=!!e,this.dropletAutocompletePopupTooltipManager_.setTooltipsEnabled(e),this.dropletAutocompleteParameterTooltipManager_.setTooltipsEnabled(e),this.dropletBlockTooltipManager_.setTooltipsEnabled(e)},t.exports=n},{"../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","./DropletAutocompleteParameterTooltipManager":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletAutocompleteParameterTooltipManager.js","./DropletAutocompletePopupTooltipManager":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletAutocompletePopupTooltipManager.js","./DropletBlockTooltipManager":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletBlockTooltipManager.js","./DropletFunctionTooltip":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletFunctionTooltip.js"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletBlockTooltipManager.js":[function(e,t){"use strict";function n(e){return function(){try{e()}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}}var i=(e("./DropletFunctionTooltip"),e("./DropletFunctionTooltip.html.ejs")),r=e("../dom"),o=function(e){this.dropletTooltipManager=e,this.showExamplesLink=e.dropletConfig.showExamplesLink,this.tooltipsEnabled=!0},s={interactive:!0,speed:150,maxWidth:450,position:"right",contentAsHTML:!0,theme:"droplet-block-tooltipster",offsetY:2,delay:400};o.prototype.installTooltipsForEditor_=function(e){this.installTooltipsForCurrentCategoryBlocks_(),this.hideTooltipsOnBlockPick_(e),e.on("changepalette",n(this.installTooltipsForCurrentCategoryBlocks_.bind(this))),e.on("toggledone",n(this.installTooltipsIfNotInstalled_.bind(this)))},o.prototype.installTooltipsIfNotInstalled_=function(){$(".droplet-hover-div").hasClass("tooltipstered")||this.installTooltipsForCurrentCategoryBlocks_()},o.prototype.installTooltipsForCurrentCategoryBlocks_=function(){this.tooltipsEnabled&&$(".droplet-hover-div").each(function(e,t){if(!$(t).hasClass("tooltipstered")){var n=$(t).attr("title"),i=$(t).width(),o=$(".droplet-palette-canvas").width()-parseInt(t.style.left,10),a=Math.min(i,o),l=a-i,u=$.extend({},s,{content:this.getTooltipHTML(n),offsetX:l,functionReady:function(e,t){if(this.showExamplesLink){var i=t.find(".tooltip-example-link > a")[0];r.addClickTouchEvent(i,function(e){this.dropletTooltipManager.showDocFor(n),e.stopPropagation()}.bind(this))}}.bind(this)});$(t).attr("id","droplet_palette_block_"+n),$(t).tooltipster(u)}}.bind(this))},o.prototype.hideTooltipsOnBlockPick_=function(e){e.on("pickblock",function(){$(".tooltipstered").tooltipster("hide")})},o.prototype.getTooltipHTML=function(e){var t=this.dropletTooltipManager.getDropletTooltip(e);return i({functionName:t.functionName,isProperty:t.isProperty,tipPrefix:t.tipPrefix,functionShortDescription:t.description,parameters:t.parameterInfos,signatureOverride:t.signatureOverride,showExamplesLink:this.showExamplesLink})},o.prototype.setTooltipsEnabled=function(e){this.tooltipsEnabled=!!e},t.exports=o},{"../dom":"/home/ubuntu/staging/apps/build/js/dom.js","./DropletFunctionTooltip":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletFunctionTooltip.js","./DropletFunctionTooltip.html.ejs":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletFunctionTooltip.html.ejs"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletFunctionTooltip.js":[function(e,t){"use strict";var n=e("../locale"),i=e("../utils"),r="dropletBlock_",o=function(e,t){this.appMsg=e,this.functionName=t.func,this.isProperty="property"===t.type||"readonlyproperty"===t.type,this.tipPrefix=t.tipPrefix,this.customDocURL=t.customDocURL;var n=this.getLocalization(this.descriptionKey());n&&(this.description=n());var i=this.getLocalization(this.signatureOverrideKey());i&&(this.signatureOverride=i()),this.parameterInfos=[];for(var r=0;;r++){var o={},s=this.getLocalization(this.parameterNameKey(r));if(o.name=s?s():t.paletteParams&&t.paletteParams[r],!o.name)break;var a=this.getLocalization(this.parameterDescriptionKey(r));a&&(o.description=a()),t.assetTooltip&&(o.assetTooltip=t.assetTooltip[r]),this.parameterInfos.push(o)}};o.prototype.getLocalization=function(e){return this.appMsg[e]||n[e]},o.prototype.descriptionKey=function(){return this.i18nPrefix()+"_description"},o.prototype.signatureOverrideKey=function(){return this.i18nPrefix()+"_signatureOverride"},o.prototype.parameterNameKey=function(e){return this.i18nPrefix()+"_param"+e},o.prototype.parameterDescriptionKey=function(e){return this.i18nPrefix()+"_param"+e+"_description"},o.prototype.i18nPrefix=function(){return r+this.functionName},o.prototype.getFullDocumentationURL=function(){return this.customDocURL?this.customDocURL:"//"+i.getPegasusHost()+"/applab/docs/"+this.functionName+"?embedded"},t.exports=o},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletAutocompletePopupTooltipManager.js":[function(e,t){"use strict";var n=e("./DropletFunctionTooltip.html.ejs"),i=e("../dom"),r=function(e){this.dropletTooltipManager=e,this.showExamplesLink=e.dropletConfig.showExamplesLink,this.tooltipsEnabled=!0},o={interactive:!0,autoClose:!1,trigger:"custom",speed:100,maxWidth:450,position:"left",contentAsHTML:!0,theme:"droplet-block-tooltipster",offsetY:2,restoration:"none",updateAnimation:!1};r.prototype.installTooltipsForEditor_=function(e){var t=e.aceEditor;this.editorChangedEventHandler_=this.setupOnPopupShown_.bind(this,t),t.commands.on("afterExec",this.editorChangedEventHandler_)},r.prototype.setupOnPopupShown_=function(e,t){if("insertstring"===t.command.name){var n=e.completer&&e.completer.popup;n&&(this.setupForEditorPopup_(e),e.commands.removeListener("afterExec",this.editorChangedEventHandler_),this.editorChangedEventHandler_=null)}},r.prototype.setupForEditorPopup_=function(e){e.completer.popup.setSelectOnHover(!0),e.completer.popup.renderer.on("afterRender",function(){this.updateAutocompletePopupTooltip(e)}.bind(this)),e.completer.popup.on("hide",function(){this.destroyAutocompleteTooltips_()}.bind(this))},r.prototype.updateAutocompletePopupTooltip=function(e){if(this.tooltipsEnabled&&e.completer.completions){var t=e.completer.popup.getRow();if(!(0>t)){var n=e.completer.completions.filtered,i=n[t].docFunc||n[t].value;this.destroyAutocompleteTooltips_(),this.dropletTooltipManager.getDocFor(i)&&this.attachTooltipForFunction(i)}}},r.prototype.attachTooltipForFunction=function(e){var t=this.getTooltipHTML(e),n=$.extend({},o,{content:t,functionReady:function(t,n){if(this.showExamplesLink){var r=n.find(".tooltip-example-link > a")[0];i.addClickTouchEvent(r,function(t){this.dropletTooltipManager.showDocFor(e),t.stopPropagation()}.bind(this))}}.bind(this)}),r=$(".ace_selected");r.tooltipster(n),r.tooltipster("show")},r.prototype.destroyAutocompleteTooltips_=function(){$(".ace_autocomplete .tooltipstered").tooltipster("destroy")},r.prototype.getTooltipHTML=function(e){var t=this.dropletTooltipManager.getDropletTooltip(e),i=n({functionName:t.functionName,isProperty:t.isProperty,tipPrefix:t.tipPrefix,functionShortDescription:t.description,parameters:t.parameterInfos,signatureOverride:t.signatureOverride,showExamplesLink:this.showExamplesLink});return i},r.prototype.setTooltipsEnabled=function(e){this.tooltipsEnabled=!!e},t.exports=r},{"../dom":"/home/ubuntu/staging/apps/build/js/dom.js","./DropletFunctionTooltip.html.ejs":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletFunctionTooltip.html.ejs"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletFunctionTooltip.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function e(){return tipPrefix?tipPrefix+functionName:functionName}if(buf.push(""),buf.push('\n<div class="function-name">\n  '),signatureOverride)buf.push("    ",escape(signatureOverride),"\n  ");else if(isProperty)buf.push("    ",escape(e()),"\n  ");else{buf.push("    ",escape(e()),"(");for(var t=0;t<parameters.length;t++)buf.push("",parameters[t].name,""),t<parameters.length-1&&buf.push(", "),buf.push("");buf.push(")  ")}buf.push("\n</div>\n"),functionShortDescription&&buf.push("<div>",escape(functionShortDescription),"</div>"),buf.push("\n"),showExamplesLink&&buf.push('\n  <div class="tooltip-example-link">\n    <a href="javascript:void(0);">See examples</a>\n  </div>\n'),buf.push("\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletAutocompleteParameterTooltipManager.js":[function(e,t){"use strict";var n=e("./DropletParameterTooltip.html.ejs"),i=e("./tooltipUtils.js"),r=e("../dom"),o=e("../dropletUtils"),s=function(e){this.dropletTooltipManager=e,this.showExamplesLink=e.dropletConfig.showExamplesLink,this.showParamDropdowns=e.dropletConfig.showParamDropdowns,this.tooltipConfig={interactive:!0,autoClose:!1,trigger:"custom",speed:100,maxWidth:450,position:this.showParamDropdowns?"top":"bottom",contentAsHTML:!0,theme:"droplet-block-tooltipster",offsetY:2,restoration:"none",updateAnimation:!1,positionTracker:!0,tooltipsEnabled:!0}};s.prototype.installTooltipsForEditor_=function(e){var t=e.aceEditor,n=this.onCursorMovement_.bind(this,t);t.commands.on("afterExec",n),t.on("mousedown",function(){this.getCursorTooltip_().tooltipster("hide")}.bind(this))},s.prototype.onCursorMovement_=function(e){if(this.getCursorTooltip_().tooltipster("hide"),e.selection.isEmpty()){var t=e.selection.getCursor(),n=i.findFunctionAndParamNumber(e,t);n&&(this.blockDropdownsAndTooltips||this.startingAutoComplete||(e.completer&&this.showParamDropdowns&&this.showParamDropdownIfNeeded_(e,n),this.updateParameterTooltip_(e,n)))}},s.prototype.showParamDropdownIfNeeded_=function(e,t){var n;if(o.getAllAvailableDropletBlocks(this.dropletTooltipManager.dropletConfig,this.dropletTooltipManager.codeFunctions,this.autocompletePaletteApisOnly).forEach(function(i){!i.dropdown||i.func!==t.funcName&&i.func!==t.fullFuncName||i.noAutocomplete||this.dropletTooltipManager.autocompletePaletteApisOnly&&this.dropletTooltipManager.codeFunctions&&"undefined"==typeof this.dropletTooltipManager.codeFunctions[i.func]||(n="function"==typeof i.dropdown[t.currentParameterIndex]?i.dropdown[t.currentParameterIndex](e):i.dropdown[t.currentParameterIndex])},this),n&&!e.completer.activated){this.installAceCompleterHooks_(e);var i=[];n.forEach(function(e){var t,n;"string"==typeof e?t=e:(t=e.text,n=e.click),i.push({name:"dropdown",value:t,click:n})}),e.completer.overrideCompleter={getCompletions:function(e,t,n,r,o){o(null,i)}},this.startingAutoComplete=!0,e.execCommand("startAutocomplete"),this.startingAutoComplete=!1}},s.prototype.updateParameterTooltip_=function(e,t){if(this.tooltipConfig.tooltipsEnabled){var n;if(this.dropletTooltipManager.getDocFor(t.funcName))n=t.funcName;else{if(!this.dropletTooltipManager.getDocFor(t.fullFuncName))return;n=t.fullFuncName}var i=this.dropletTooltipManager.getDropletTooltip(n),o=i.parameterInfos.length>0;if(!(o&&t.currentParameterIndex>=i.parameterInfos.length)){var s=this.getCursorTooltip_();if(s.tooltipster("content",this.getTooltipHTML(i,t.currentParameterIndex)),s.tooltipster("show"),this.showExamplesLink){var a=$(s.tooltipster("elementTooltip")).find(".tooltip-example-link > a")[0];r.addClickTouchEvent(a,function(e){this.dropletTooltipManager.showDocFor(n),e.stopPropagation()}.bind(this))}if(o){var l=i.parameterInfos[t.currentParameterIndex].assetTooltip;if(l){var u=$(s.tooltipster("elementTooltip")).find(".tooltip-choose-link > a")[0];r.addClickTouchEvent(u,function(t){s.tooltipster("hide"),l(function(t){e.onTextInput('"'+t+'"')}),t.stopPropagation()}.bind(this))}}}}},s.prototype.getCursorTooltip_=function(){return this.cursorTooltip_||(this.cursorTooltip_=$(".droplet-ace .ace_cursor"),this.cursorTooltip_.tooltipster(this.tooltipConfig)),this.cursorTooltip_},s.prototype.getTooltipHTML=function(e,t){return n({funcName:e.functionName,functionName:e.functionName,isProperty:e.isProperty,tipPrefix:e.tipPrefix,functionShortDescription:e.description,parameters:e.parameterInfos,signatureOverride:e.signatureOverride,showExamplesLink:this.showExamplesLink,currentParameterIndex:t})},s.prototype.installAceCompleterHooks_=function(e){e.completer.showPopup!==s.showPopup&&(s.originalShowPopup=e.completer.showPopup,e.completer.showPopup=s.showPopup),e.completer.gatherCompletions!==s.gatherCompletions&&(s.originalGatherCompletions=e.completer.gatherCompletions,e.completer.gatherCompletions=s.gatherCompletions),e.completer.insertMatchOverride||(e.completer.insertMatchOverride=s.insertMatch.bind(e.completer,this)),e.completer.insertMatch!==e.completer.insertMatchOverride&&(s.originalInsertMatch=e.completer.insertMatch,e.completer.insertMatch=e.completer.insertMatchOverride)},s.gatherCompletions=function(e,t){if(this.overrideCompleter){var n=e.completers;e.completers=[this.overrideCompleter],e.completer.autoInsert=!1,s.originalGatherCompletions.call(this,e,t),e.completers=n}else s.originalGatherCompletions.call(this,e,t)},s.showPopup=function(e){s.originalShowPopup.call(this,e),this.overrideCompleter=null},s.insertMatch=function(e,t){if(t||(t=this.popup.getData(this.popup.getRow())),!t)return!1;if(t.click){this.detach(),e.getCursorTooltip_().tooltipster("hide"),e.blockDropdownsAndTooltips=!0;var n=ace.require("./lib/lang"),i=n.delayedCall(function(){t.click(function(t){this.editor.execCommand("insertstring",t),e.blockDropdownsAndTooltips=!1}.bind(this))}.bind(this));i.schedule()}else s.originalInsertMatch.call(this,t)},s.prototype.setTooltipsEnabled=function(e){this.tooltipConfig.tooltipsEnabled=!!e},t.exports=s},{"../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","./DropletParameterTooltip.html.ejs":"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletParameterTooltip.html.ejs","./tooltipUtils.js":"/home/ubuntu/staging/apps/build/js/blockTooltips/tooltipUtils.js"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/tooltipUtils.js":[function(e,t,n){"use strict";function i(e,t){return e.split(t).length-1}function r(e,t){var n={"}":"{",")":"(","]":"["};return n[t]===e}var o=e("../utils"),s=o.getLodash(),a=/^\s*$/,l=/\*\/$/,u=/^\/\*/;n.findFunctionAndParamNumber=function(e,t){var n=[],o=0,c=ace.require("./token_iterator").TokenIterator,p=new c(e.session,t.row,t.column),h=p.getCurrentToken();if(0===t.column)h=p.stepBackward();else if(h&&h.type.match(/^comment/)){var d="comment.doc"===h.type||h.value.match(u);
if(!d)return null;var f=h.value.match(l),m=h.start+h.value.length===t.column,g=f&&m;if(!g)return null}for(;h;){switch(h.type){case"paren.rparen":for(var b=h.value.split(),v=b.length-1;v>=0;v--){var y=b[v];n.push(y)}break;case"paren.lparen":for(var _=h.value.split(),w=_.length-1;w>=0;w--){var E=_[w],x=0===n.length&&"("===E;if(x){var k,T=p.stepBackward().value,S=p.stepBackward();return S&&"."===S.value&&(k=p.stepBackward().value+"."+T,T="*."+T),{funcName:T,fullFuncName:k,currentParameterIndex:o}}var C=n.pop();if(!C||!r(E,C))return null}break;case"punctuation.operator":if(0===n.length){if(s.contains(h.value,";"))return null;s.contains(h.value,",")&&(o+=i(h.value,","))}break;case"comment":case"comment.doc":break;case"text":if(0!==n.length||h.value.match(a))break;return null;case"string":case"storage.type":case"identifier":default:if(0===n.length&&0===o)return null}h=p.stepBackward()}return null}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/blockTooltips/DropletParameterTooltip.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){if(buf.push('<div class="function-name">\n  '),signatureOverride)buf.push("    ",escape(signatureOverride),"\n  ");else{buf.push("    ",escape(functionName),"(");for(var e=0;e<parameters.length;e++)buf.push('<span class="tooltip-parameter-name '),e===currentParameterIndex&&buf.push(" current-tooltip-parameter-name"),buf.push('">',parameters[e].name,"</span>"),e<parameters.length-1&&buf.push(", "),buf.push("");buf.push(")  ")}buf.push("\n</div>\n"),parameters[currentParameterIndex]&&parameters[currentParameterIndex].description&&buf.push("<div>",escape(parameters[currentParameterIndex].description),"</div>"),buf.push("\n"),parameters[currentParameterIndex]&&parameters[currentParameterIndex].assetTooltip&&buf.push('\n  <div class="tooltip-choose-link">\n    <a href="javascript:void(0);">Choose...</a>\n  </div>\n'),buf.push("\n"),showExamplesLink&&buf.push('\n  <div class="tooltip-example-link">\n    <a href="javascript:void(0);">See examples</a>\n  </div>\n'),buf.push("\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/authoredHints.js":[function(e,t){"use strict";var n=(e("./dom"),e("./locale")),i=e("./templates/instructions/HintSelect"),r=e("./templates/instructions/HintsDisplay"),o=e("./templates/instructions/HintDialogContent"),s=e("./authoredHintUtils"),a=e("./templates/Lightbulb"),l=function(e){this.studioApp_=e,this.hints_=[],this.contextualHints_=[],this.scrptId_=void 0,this.levelId_=void 0,this.lightbulb=document.createElement("div"),this.lightbulb.id="lightbulb"};t.exports=l,l.prototype.getUnseenHints=function(){var e=this.contextualHints_.concat(this.hints_||[]);return e.filter(function(e){return e.alreadySeen===!1})},l.prototype.getSeenHints=function(){var e=this.contextualHints_.concat(this.hints_||[]);return e.filter(function(e){return e.alreadySeen===!0})},l.prototype.displayMissingBlockHints=function(e){var t=s.createContextualHintsFromBlocks(e),n=this.contextualHints_.filter(function(e){return e.alreadySeen===!1}),i=n.length!==t.length;this.contextualHints_=t,this.updateLightbulbDisplay_(i)},l.prototype.finishHints=function(e){s.finishHints({time:(new Date).getTime()-this.studioApp_.initTime,attempt:this.studioApp_.attempts,testResult:this.studioApp_.lastTestResult,activityId:e&&e.activity_id,levelSourceId:e&&e.level_source_id})},l.prototype.submitHints=function(e){s.submitHints(e)},l.prototype.init=function(e,t,n){this.hints_=e,this.scriptId_=t,this.levelId_=n},l.prototype.display=function(e,t,n){this.promptIcon=e,this.updateLightbulbDisplay_(),t.addEventListener("click",function(){var e=this.getUnseenHints();e.length>0?this.showHint_(e[0],n):n()}.bind(this))},l.prototype.recordUserViewedHint_=function(e){e.alreadySeen=!0,this.updateLightbulbDisplay_(),s.recordUnfinishedHint({scriptId:this.scriptId_,levelId:this.levelId_,hintId:e.hintId,hintClass:e.hintClass,hintType:e.hintType})},l.prototype.updateLightbulbDisplay_=function(e){e=e||!1;var t=this.getUnseenHints().length;t>0&&!document.body.contains(this.lightbulb)&&(this.promptIcon.parentNode.className+=" authored_hints",this.promptIcon.parentNode.insertBefore(this.lightbulb,this.promptIcon)),ReactDOM.render(React.createElement(a,{count:t,lit:t>0,shouldAnimate:e}),this.lightbulb)},l.prototype.userViewedHint_=function(){var e=this.getUnseenHints()[0];this.recordUserViewedHint_(e)},l.prototype.getHintsDisplay=function(){return React.createElement(r,{hintReviewTitle:n.hintReviewTitle(),seenHints:this.getSeenHints(),unseenHints:this.getUnseenHints(),onUserViewedHint:this.userViewedHint_.bind(this)})},l.prototype.showHint_=function(e,t){$("#prompt-icon").qtip({content:{text:function(n,r){var s=document.createElement("div"),a=React.createElement(i,{showInstructions:function(){r.destroy(),t()}.bind(this),showHint:function(){var t=document.createElement("div");r.set("content.text",t),ReactDOM.render(React.createElement(o,{content:e.content,block:e.block}),t,function(){r.reposition()}),$(r.elements.content).find("img").on("load",function(e){r.reposition(e)}),this.recordUserViewedHint_(e)}.bind(this)});return ReactDOM.render(a,s),s}.bind(this),title:{button:$('<div class="tooltip-x-close"/>')}},style:{classes:"cdo-qtips qtip-authored-hint",tip:{width:20,height:20}},position:{my:"bottom left",at:"top right"},hide:{event:"unfocus"},show:!1}).qtip("show")}},{"./authoredHintUtils":"/home/ubuntu/staging/apps/build/js/authoredHintUtils.js","./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./templates/Lightbulb":"/home/ubuntu/staging/apps/build/js/templates/Lightbulb.jsx","./templates/instructions/HintDialogContent":"/home/ubuntu/staging/apps/build/js/templates/instructions/HintDialogContent.jsx","./templates/instructions/HintSelect":"/home/ubuntu/staging/apps/build/js/templates/instructions/HintSelect.jsx","./templates/instructions/HintsDisplay":"/home/ubuntu/staging/apps/build/js/templates/instructions/HintsDisplay.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/instructions/HintsDisplay.jsx":[function(e,t){"use strict";var n=e("../../locale"),i=e("./Hint"),r=e("../Lightbulb"),o=React.createClass({displayName:"HintsDisplay",propTypes:{hintReviewTitle:React.PropTypes.string.isRequired,seenHints:React.PropTypes.arrayOf(React.PropTypes.object).isRequired,unseenHints:React.PropTypes.arrayOf(React.PropTypes.object).isRequired,onUserViewedHint:React.PropTypes.func.isRequired},getInitialState:function(){return{showNextUnseenHint:!1}},viewHint:function(){this.props.onUserViewedHint(),this.setState({showNextUnseenHint:!0})},render:function(){var e=this.props.seenHints;this.state.showNextUnseenHint&&(e=e.concat(this.props.unseenHints[0]));var t;e&&e.length&&(t=React.createElement("div",null,React.createElement("h1",null,React.createElement(r,{size:32,style:{margin:"-9px 9px -9px -5px"}}),this.props.hintReviewTitle),React.createElement("ol",null,e.map(function(e){return React.createElement(i,{hint:e,key:e.hintId,ref:e.hintId})}))));var o;return!this.state.showNextUnseenHint&&this.props.unseenHints&&this.props.unseenHints.length&&(o=React.createElement("button",{id:"hint-button",onClick:this.viewHint,className:"lightbulb-button"},React.createElement(r,{size:32,style:{margin:"-9px 0px -9px -5px"}}),n.hintSelectNewHint())),React.createElement("div",{className:"authored-hints"},t,o)}});t.exports=o},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../Lightbulb":"/home/ubuntu/staging/apps/build/js/templates/Lightbulb.jsx","./Hint":"/home/ubuntu/staging/apps/build/js/templates/instructions/Hint.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/instructions/Hint.jsx":[function(e,t){"use strict";var n=e("../ReadOnlyBlockSpace"),i=React.createClass({displayName:"Hint",propTypes:{hint:React.PropTypes.object.isRequired},render:function(){var e;return this.props.hint.block&&(e=React.createElement(n,{block:this.props.hint.block})),React.createElement("li",{style:{marginBottom:"12px"}},React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.hint.content}}),e)}});t.exports=i},{"../ReadOnlyBlockSpace":"/home/ubuntu/staging/apps/build/js/templates/ReadOnlyBlockSpace.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/instructions/HintSelect.jsx":[function(e,t){"use strict";var n=e("../../locale"),i=React.createClass({displayName:"HintSelect",propTypes:{showInstructions:React.PropTypes.func.isRequired,showHint:React.PropTypes.func.isRequired},render:function(){return React.createElement("div",null,React.createElement("h4",null,n.hintPrompt()),React.createElement("a",{className:"btn btn-link show-instructions",onClick:this.props.showInstructions},n.hintSelectInstructions()),React.createElement("a",{className:"btn btn-link show-hint",onClick:this.props.showHint},n.hintSelectNewHint()))}});t.exports=i},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js"}],"/home/ubuntu/staging/apps/build/js/templates/instructions/HintDialogContent.jsx":[function(e,t){"use strict";var n=e("../../locale"),i=e("../Lightbulb"),r=e("../ReadOnlyBlockSpace"),o=React.createClass({displayName:"HintDialogContent",propTypes:{content:React.PropTypes.string.isRequired,block:React.PropTypes.object},render:function(){var e;return this.props.block&&(e=React.createElement(r,{block:this.props.block})),React.createElement("div",null,React.createElement("h3",null,React.createElement(i,{size:32,style:{margin:"-9px 5px -9px -5px"}}),n.hintTitle()),React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}),e)}});t.exports=o},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../Lightbulb":"/home/ubuntu/staging/apps/build/js/templates/Lightbulb.jsx","../ReadOnlyBlockSpace":"/home/ubuntu/staging/apps/build/js/templates/ReadOnlyBlockSpace.jsx"}],"/home/ubuntu/staging/apps/build/js/templates/ReadOnlyBlockSpace.jsx":[function(e,t){"use strict";var n=React.createClass({displayName:"ReadOnlyBlockSpace",propTypes:{block:React.PropTypes.object.isRequired},componentDidMount:function(){return document.body.contains(this.refs.container)?void Blockly.BlockSpace.createReadOnlyBlockSpace(this.refs.container,this.props.block):new Error("ReadOnlyBlockSpace component MUST be rendered into a container that already exists in the DOM")},render:function(){return React.createElement("div",{className:"block-space",ref:"container",style:{maxHeight:"100px"}})}});t.exports=n},{}],"/home/ubuntu/staging/apps/build/js/templates/Lightbulb.jsx":[function(e,t){"use strict";var n=e("../color"),i=React.createClass({displayName:"Lightbulb",propTypes:{shouldAnimate:React.PropTypes.bool,count:React.PropTypes.number,lit:React.PropTypes.bool,size:React.PropTypes.number,style:React.PropTypes.object},getDefaultProps:function(){return{shouldAnimate:!1,count:0,lit:!0,size:40,style:{}}},getHintCountStyle:function(){return{fontWeight:"bold",fontSize:"400px",fill:n.white,stroke:n.black,strokeWidth:"30px",fontFamily:"Verdana, Geneva, sans-serif"}},render:function(){var e,t=this.props.lit?[React.createElement("g",{key:"line-0"},React.createElement("line",{fill:"#EFB834",x1:"473.582",y1:"208.1",x2:"560.578",y2:"159.16"}),React.createElement("path",{fill:"#EFB834",d:"M473.141,207.315c0,0,1.225-1.003,3.396-2.711c1.08-0.864,2.402-1.894,3.925-3.063 c1.525-1.167,3.227-2.514,5.117-3.927c1.887-1.418,3.931-2.954,6.092-4.578c2.158-1.632,4.462-3.3,6.831-5.055 c2.386-1.723,4.843-3.519,7.372-5.285c2.515-1.791,5.104-3.552,7.677-5.341c2.578-1.778,5.065-3.721,7.503-5.648 c1.228-0.948,2.436-1.907,3.665-2.792c1.231-0.881,2.478-1.695,3.736-2.442c2.527-1.472,5.12-2.629,7.656-3.587 c2.529-0.971,4.998-1.751,7.331-2.377c4.655-1.268,8.797-1.858,11.81-2.069c1.504-0.109,2.718-0.138,3.572-0.111 c0.843,0.007,1.313,0.047,1.313,0.047l0.883,1.569c0,0-0.21,0.422-0.641,1.146c-0.42,0.744-1.075,1.766-1.95,2.995 c-1.745,2.465-4.4,5.698-7.9,9.019c-1.746,1.669-3.694,3.374-5.838,5.031c-2.136,1.671-4.471,3.285-7.041,4.681 c-1.291,0.687-2.635,1.331-4.027,1.925c-1.394,0.591-2.841,1.126-4.289,1.683c-2.914,1.083-5.865,2.2-8.723,3.48 c-2.865,1.27-5.713,2.568-8.55,3.788c-2.823,1.245-5.633,2.412-8.345,3.556c-2.729,1.113-5.352,2.217-7.867,3.213 c-2.511,1.004-4.885,1.953-7.076,2.83c-2.189,0.881-4.224,1.637-6.013,2.334c-1.79,0.695-3.357,1.29-4.656,1.764 c-2.587,0.968-4.08,1.494-4.08,1.494L473.141,207.315z"})),React.createElement("g",{key:"line-1"},React.createElement("line",{fill:"#EFB834",x1:"492.348",y1:"410.008",x2:"589.509",y2:"432.883"}),React.createElement("path",{fill:"#EFB834",d:"M492.555,409.132c0,0,1.581,0.091,4.335,0.303c1.38,0.095,3.05,0.232,4.962,0.403 c1.912,0.173,4.077,0.334,6.424,0.574c2.348,0.234,4.892,0.487,7.583,0.755c2.693,0.259,5.519,0.592,8.45,0.904 c2.923,0.347,5.947,0.688,9.004,1.101c3.064,0.384,6.161,0.841,9.266,1.266c3.102,0.437,6.247,0.691,9.346,0.922 c1.546,0.133,3.084,0.246,4.588,0.426c1.502,0.185,2.972,0.43,4.403,0.732c2.857,0.628,5.548,1.531,8.064,2.543 c2.519,0.998,4.864,2.095,7.004,3.213c4.285,2.219,7.732,4.588,10.093,6.472c1.181,0.938,2.094,1.738,2.704,2.337 c0.615,0.576,0.934,0.923,0.934,0.923l-0.412,1.752c0,0-0.44,0.169-1.248,0.41c-0.813,0.263-1.987,0.572-3.463,0.885 c-2.953,0.633-7.096,1.216-11.92,1.29c-2.414,0.046-5.003-0.018-7.702-0.249c-2.703-0.216-5.515-0.609-8.351-1.322 c-1.415-0.368-2.84-0.804-4.267-1.309c-1.426-0.509-2.853-1.095-4.296-1.665c-2.878-1.176-5.805-2.351-8.776-3.344 c-2.968-1.004-5.944-1.977-8.857-3c-2.92-0.995-5.779-2.038-8.549-3.032c-2.762-1.029-5.44-1.992-7.965-2.961 c-2.528-0.961-4.918-1.869-7.124-2.708c-2.207-0.833-4.217-1.655-6.005-2.353c-1.788-0.7-3.344-1.323-4.621-1.854 c-2.559-1.039-4.015-1.663-4.015-1.663L492.555,409.132z"})),React.createElement("g",{key:"line-2"},React.createElement("line",{fill:"#EFB834",x1:"502.559",y1:"301.7",x2:"602.37",y2:"300.685"}),React.createElement("path",{fill:"#EFB834",d:"M502.55,300.8c0,0,1.557-0.289,4.282-0.742c1.362-0.237,3.017-0.504,4.915-0.795 c1.898-0.289,4.039-0.65,6.375-0.979c2.336-0.334,4.867-0.697,7.544-1.08c2.677-0.392,5.5-0.744,8.421-1.142 c2.921-0.362,5.939-0.753,9.006-1.084c3.067-0.359,6.183-0.656,9.3-0.985c3.116-0.317,6.23-0.823,9.296-1.339 c1.533-0.24,3.053-0.499,4.556-0.683c1.503-0.18,2.989-0.293,4.45-0.342c2.924-0.073,5.753,0.16,8.438,0.542 c2.685,0.366,5.224,0.871,7.57,1.446c4.691,1.13,8.605,2.607,11.347,3.872c1.371,0.629,2.449,1.187,3.185,1.622 c0.735,0.412,1.128,0.673,1.128,0.673l0.018,1.8c0,0-0.387,0.269-1.114,0.696c-0.727,0.45-1.793,1.031-3.151,1.687 c-2.716,1.321-6.6,2.877-11.266,4.102c-2.333,0.622-4.862,1.179-7.539,1.599c-2.676,0.436-5.5,0.727-8.425,0.713 c-1.462-0.019-2.95-0.102-4.456-0.251c-1.506-0.153-3.032-0.381-4.569-0.59c-3.075-0.454-6.199-0.895-9.321-1.149 c-3.122-0.266-6.244-0.499-9.318-0.796c-3.073-0.268-6.099-0.598-9.026-0.9c-2.928-0.338-5.758-0.634-8.442-0.971 c-2.684-0.329-5.222-0.639-7.564-0.926c-2.342-0.281-4.49-0.599-6.394-0.849c-1.903-0.253-3.563-0.486-4.93-0.695 c-2.734-0.397-4.296-0.655-4.296-0.655L502.55,300.8z"})),React.createElement("g",{key:"line-3"},React.createElement("line",{fill:"#EFB834",x1:"135.661",y1:"212.764",x2:"48.665",y2:"163.824"}),React.createElement("path",{fill:"#EFB834",d:"M135.22,213.548c0,0-1.493-0.526-4.08-1.494c-1.299-0.474-2.866-1.069-4.656-1.764 c-1.789-0.697-3.824-1.453-6.013-2.334c-2.191-0.876-4.565-1.826-7.076-2.83c-2.515-0.996-5.138-2.1-7.867-3.213 c-2.712-1.144-5.522-2.312-8.345-3.556c-2.837-1.22-5.686-2.518-8.55-3.788c-2.859-1.28-5.81-2.397-8.723-3.48 c-1.448-0.557-2.895-1.092-4.289-1.683c-1.392-0.594-2.736-1.238-4.027-1.925c-2.57-1.396-4.905-3.01-7.041-4.681 c-2.143-1.657-4.092-3.363-5.838-5.031c-3.5-3.32-6.155-6.554-7.9-9.019c-0.874-1.229-1.53-2.251-1.95-2.995 c-0.431-0.724-0.641-1.146-0.641-1.146l0.883-1.569c0,0,0.47-0.04,1.313-0.047c0.854-0.027,2.068,0.002,3.572,0.111 c3.013,0.211,7.155,0.801,11.81,2.069c2.332,0.625,4.801,1.406,7.331,2.377c2.537,0.958,5.129,2.115,7.656,3.587 c1.258,0.746,2.505,1.561,3.736,2.442c1.229,0.885,2.437,1.844,3.665,2.792c2.438,1.928,4.925,3.87,7.503,5.648 c2.573,1.789,5.161,3.549,7.677,5.341c2.529,1.766,4.986,3.562,7.372,5.285c2.368,1.755,4.673,3.423,6.831,5.055 c2.162,1.625,4.206,3.16,6.092,4.578c1.889,1.413,3.592,2.76,5.117,3.927c1.523,1.169,2.845,2.199,3.925,3.063 c2.17,1.708,3.396,2.711,3.396,2.711L135.22,213.548z"})),React.createElement("g",{key:"line-4"},React.createElement("line",{fill:"#EFB834",x1:"120.895",y1:"411.672",x2:"23.734",y2:"434.547"}),React.createElement("path",{fill:"#EFB834",d:"M121.101,412.548c0,0-1.456,0.623-4.015,1.663c-1.277,0.53-2.833,1.153-4.621,1.854 c-1.788,0.698-3.798,1.52-6.005,2.353c-2.206,0.838-4.596,1.747-7.124,2.708c-2.526,0.969-5.203,1.932-7.965,2.961 c-2.77,0.993-5.629,2.037-8.549,3.032c-2.914,1.023-5.889,1.996-8.857,3c-2.971,0.993-5.899,2.169-8.776,3.344 c-1.443,0.57-2.87,1.156-4.296,1.665c-1.427,0.505-2.852,0.941-4.267,1.309c-2.836,0.713-5.648,1.105-8.351,1.321 c-2.699,0.231-5.288,0.295-7.702,0.249c-4.824-0.074-8.967-0.657-11.92-1.29c-1.476-0.313-2.65-0.621-3.463-0.885 c-0.808-0.241-1.248-0.41-1.248-0.41l-0.413-1.752c0,0,0.319-0.347,0.934-0.923c0.61-0.598,1.523-1.399,2.704-2.337 c2.36-1.884,5.808-4.254,10.093-6.472c2.14-1.119,4.485-2.216,7.004-3.213c2.516-1.012,5.207-1.915,8.064-2.543 c1.431-0.302,2.9-0.547,4.403-0.732c1.503-0.181,3.042-0.293,4.588-0.426c3.1-0.232,6.245-0.486,9.346-0.922 c3.104-0.425,6.201-0.882,9.265-1.266c3.057-0.412,6.081-0.754,9.004-1.101c2.931-0.312,5.757-0.644,8.45-0.904 c2.691-0.268,5.235-0.521,7.583-0.755c2.347-0.239,4.512-0.4,6.424-0.574c1.913-0.171,3.583-0.308,4.962-0.403 c2.754-0.212,4.335-0.303,4.335-0.303L121.101,412.548z"})),React.createElement("g",{key:"line-5"},React.createElement("line",{fill:"#EFB834",x1:"112.684",y1:"306.364",x2:"12.873",y2:"305.349"}),React.createElement("path",{fill:"#EFB834",d:"M112.675,307.264c0,0-1.562,0.257-4.296,0.655c-1.367,0.21-3.026,0.443-4.93,0.695 c-1.904,0.25-4.051,0.568-6.394,0.849c-2.343,0.287-4.88,0.598-7.564,0.926c-2.684,0.337-5.514,0.633-8.442,0.971 c-2.928,0.302-5.953,0.632-9.026,0.9c-3.074,0.297-6.195,0.53-9.318,0.796c-3.122,0.254-6.246,0.696-9.321,1.149 c-1.537,0.209-3.063,0.437-4.569,0.59c-1.506,0.149-2.994,0.232-4.456,0.251c-2.925,0.014-5.749-0.277-8.425-0.713 c-2.676-0.421-5.205-0.977-7.539-1.599c-4.667-1.225-8.55-2.781-11.266-4.102c-1.358-0.656-2.424-1.237-3.151-1.687 c-0.727-0.427-1.114-0.696-1.114-0.696l0.018-1.8c0,0,0.393-0.261,1.128-0.673c0.736-0.435,1.814-0.994,3.185-1.622 c2.742-1.265,6.657-2.742,11.347-3.872c2.345-0.575,4.885-1.079,7.57-1.446c2.685-0.382,5.514-0.615,8.438-0.542 c1.462,0.049,2.947,0.162,4.45,0.342c1.503,0.184,3.024,0.443,4.556,0.683c3.065,0.516,6.18,1.021,9.296,1.339 c3.116,0.329,6.232,0.626,9.299,0.985c3.067,0.33,6.085,0.722,9.006,1.084c2.92,0.398,5.744,0.75,8.421,1.142 c2.677,0.383,5.208,0.745,7.544,1.08c2.336,0.329,4.477,0.69,6.375,0.979c1.898,0.291,3.552,0.558,4.915,0.795 c2.725,0.453,4.282,0.742,4.282,0.742L112.675,307.264z"}))]:[],n=React.createElement("g",{className:this.props.shouldAnimate?"animate-hint":""},React.createElement("path",{fill:this.props.lit?"#EFB834":"#C9C9C9",d:"M453.775,353.156c0,24.012-57.189,128.942-61.414,132.265c-12.384,9.741-48.514,15.318-82.869,16.518 c-8.362,0.292-16.619,0.325-24.403,0.096c-20.716-0.611-38.081-3.079-45.155-7.464c-6.896-4.274-74.477-119.24-74.477-141.415 c0-89.195,64.542-161.502,144.159-161.502S453.775,263.961,453.775,353.156z"}),React.createElement("g",{transform:"matrix(1,0,0,-1,379.66102,1293.0169)"},React.createElement("path",{fill:"#5D5D5D",d:"M7.357,980.857c0-2.96-1.081-5.521-3.244-7.684 s-4.724-3.244-7.684-3.244s-5.521,1.081-7.684,3.244s-3.244,4.724-3.244,7.684c0,10.473-6.147,18.556-18.442,24.248 c-12.295,5.692-24.362,8.538-36.201,8.538c-2.96,0-5.521,1.081-7.684,3.244s-3.244,4.724-3.244,7.684 c0,2.96,1.081,5.521,3.244,7.684s4.724,3.244,7.684,3.244c11.384,0,22.711-1.821,33.981-5.464s21.174-9.79,29.712-18.442 S7.357,992.696,7.357,980.857z M62,980.857c0,16.393-3.927,31.647-11.782,45.763s-18.1,25.671-30.737,34.664 s-26.638,16.051-42.007,21.174s-30.907,7.684-46.617,7.684s-31.249-2.561-46.617-7.684s-29.371-12.181-42.007-21.174 c-12.636-8.993-22.882-20.548-30.737-34.664c-7.855-14.116-11.782-29.371-11.782-45.763c0-22.996,7.741-43.487,23.223-61.473 c2.277-2.504,5.749-6.261,10.416-11.27c4.667-5.009,8.14-8.766,10.416-11.27c29.143-34.835,45.194-68.759,48.154-101.772h77.866 c2.96,33.013,19.011,66.938,48.154,101.772c2.277,2.504,5.749,6.261,10.416,11.27s8.14,8.766,10.416,11.27 C54.259,937.37,62,957.862,62,980.857z M105.714,980.857c0-35.29-11.725-65.799-35.176-91.527 c-10.246-11.156-18.727-21.06-25.443-29.712s-13.49-19.523-20.32-32.615c-6.83-13.092-10.701-25.329-11.612-36.713 c10.701-6.375,16.051-15.71,16.051-28.004c0-8.424-2.846-15.71-8.538-21.857c5.692-6.147,8.538-13.433,8.538-21.857 c0-11.839-5.123-21.06-15.368-27.663c2.96-5.237,4.44-10.587,4.44-16.051c0-10.473-3.586-18.556-10.758-24.248 s-15.994-8.538-26.468-8.538c-4.554-10.018-11.384-17.987-20.491-23.906c-9.107-5.92-19.011-8.879-29.712-8.879 c-10.701,0-20.605,2.96-29.712,8.879c-9.107,5.92-15.938,13.888-20.491,23.906c-10.473,0-19.296,2.846-26.468,8.538 s-10.758,13.775-10.758,24.248c0,5.464,1.48,10.815,4.44,16.051c-10.246,6.603-15.368,15.824-15.368,27.663 c0,8.424,2.846,15.71,8.538,21.857c-5.692,6.147-8.538,13.433-8.538,21.857c0,12.295,5.35,21.629,16.051,28.004 c-0.911,11.384-4.781,23.622-11.612,36.713c-6.83,13.091-13.604,23.963-20.32,32.615s-15.198,18.556-25.443,29.712 C-232.275,915.058-244,945.567-244,980.857c0,22.54,5.066,43.544,15.198,63.01c10.132,19.467,23.451,35.632,39.958,48.496 c16.507,12.864,35.176,22.995,56.009,30.395s42.064,11.099,63.693,11.099s42.86-3.7,63.693-11.099s39.502-17.531,56.009-30.395 c16.507-12.864,29.826-29.029,39.958-48.496C100.648,1024.401,105.714,1003.397,105.714,980.857z"})),t);if(this.props.lit&&this.props.count){var i=this.props.count>9?"9+":this.props.count;e=React.createElement("g",null,React.createElement("text",{id:"hintCount",x:"400",y:"700",style:this.getHintCountStyle()},i))}return React.createElement("svg",{width:this.props.size,height:this.props.size,style:this.props.style,viewBox:"0 0 612 792"},n,e)}});t.exports=i},{"../color":"/home/ubuntu/staging/apps/build/js/color.js"}],"/home/ubuntu/staging/apps/build/js/color.js":[function(e,t){"use strict";t.exports={black:"black",dark_charcoal:"#4d575f",charcoal:"#5b6770",light_gray:"#949ca2",lighter_gray:"#c6cacd",lightest_gray:"#e7e8ea",white:"white",teal:"#00adbc",applab_button_teal:"#1abc9c",light_teal:"#59cad3",lightish_teal:"#80d6de",lighter_teal:"#a6e3e8",lightest_teal:"#d9f3f5",purple:"#7665a0",light_purple:"#a69bc1",lighter_purple:"#cfc9de",lightest_purple:"#ebe8f1",cyan:"#0094ca",light_cyan:"#59b9dc",lighter_cyan:"#a6daed",lightest_cyan:"#d9eff7",orange:"#ffa400",light_orange:"#ffc459",lighter_orange:"#ffe0a6",lightest_orange:"#fff2d9",green:"#b9bf15",light_green:"#d1d567",lighter_green:"#e7e9ad",lightest_green:"#f5f5dc",yellow:"#ffb81d",light_yellow:"#ffdb74",lighter_yellow:"#ffebb5",lightest_yellow:"#fff7df",header_text:"white",bkgnd_color:"#00adbc",inset_color:"#c6cacd",dark_color:"#7665a0",hdr_color:"#7665a0",red:"#c00",realyellow:"yellow",level_submitted:"#7665a0",level_perfect:"rgb(14, 190, 14)",level_passed:"rgb(159, 212, 159)",level_attempted:"yellow",level_not_tried:"#fefefe",level_current:"#ffa400",assessment:"#0094ca",link_color:"#0596CE",shadow:"rgba(0, 0, 0, 0.3)",bootstrap_error_background:"#f2dede",bootstrap_error_text:"#b94a48",bootstrap_error_border:"#ebccd1",bootstrap_warning_background:"#fcf8e3",bootstrap_warning_text:"#c09853",bootstrap_warning_border:"#faebcc"}},{}],"/home/ubuntu/staging/apps/build/js/authoredHintUtils.js":[function(e,t){(function(n){"use strict";var i="undefined"!=typeof window?window.marked:"undefined"!=typeof n?n.marked:null,r=e("./xml").parseElement,o=e("./locale"),s={};t.exports=s,s.getFromLocalStorage_=function(e,t){var n=localStorage.getItem(e);try{n=n?JSON.parse(n):t}catch(i){n=t}return n},s.getUnfinishedHints_=function(){return s.getFromLocalStorage_("unfinished_authored_hint_views",[])},s.getFinishedHints_=function(){return s.getFromLocalStorage_("finished_authored_hint_views",[])},s.getLastAttemptRecord_=function(){return s.getFromLocalStorage_("last_attempt_record",void 0)},s.recordFinishedHints_=function(e){var t=s.getFinishedHints_();t=t.concat(e),localStorage.setItem("finished_authored_hint_views",JSON.stringify(t))},s.clearUnfinishedHints=function(){localStorage.setItem("unfinished_authored_hint_views",JSON.stringify([]))},s.clearFinishedHints_=function(){localStorage.setItem("finished_authored_hint_views",JSON.stringify([]))},s.finalizeHints_=function(){var e=s.getLastAttemptRecord_();localStorage.removeItem("last_attempt_record");var t=s.getFinishedHints_();return e&&(t=t.map(function(t){return t=$.extend({finalTime:e.time,finalAttempt:e.attempt,finalTestResult:e.testResult,finalActivityId:e.activityId,finalLevelSourceId:e.levelSourceId},t)})),t},s.recordUnfinishedHint=function(e){var t=s.getLastAttemptRecord_();t&&(e=$.extend({prevTime:t.time,prevAttempt:t.attempt,prevTestResult:t.testResult,prevActivityId:t.activityId,prevLevelSourceId:t.levelSourceId},e));var n=s.getUnfinishedHints_();n.push(e),localStorage.setItem("unfinished_authored_hint_views",JSON.stringify(n))},s.finishHints=function(e){if(e){localStorage.setItem("last_attempt_record",JSON.stringify(e));var t=s.getUnfinishedHints_();s.clearUnfinishedHints();var n=t.map(function(t){return t=$.extend({nextTime:e.time,nextAttempt:e.attempt,nextTestResult:e.testResult,nextActivityId:e.activityId,nextLevelSourceId:e.levelSourceId},t)});s.recordFinishedHints_(n)}},s.submitHints=function(e){var t=s.getUnfinishedHints_();if(t&&t.length){var n=t[t.length-1];s.finishHints({time:n.prevTime,attempt:n.prevAttempt,testResult:n.prevTestResult,activityId:n.prevActivityId,levelSourceId:n.prevLevelSourceId})}var i=s.finalizeHints_();i&&i.length&&$.ajax({url:e,method:"POST",contentType:"application/json",data:JSON.stringify({hints:i}),complete:function(){s.clearFinishedHints_()}})},s.createContextualHintsFromBlocks=function(e){var t=e.map(function(e){var t=r(e.blockDisplayXML),n=t.firstChild.getAttribute("type");return{content:i(o.recommendedBlockContextualHintTitle()),block:t,hintId:"recommended_block_"+n,hintClass:"recommended",hintType:"contextual",alreadySeen:e.alreadySeen}});return t},s.generateAuthoredHints=function(e){var t;try{t=JSON.parse(e)}catch(n){t=[]}return t.map(function(e){return{content:i(e.hint_markdown),hintId:e.hint_id,hintClass:e.hint_class,hintType:e.hint_type,alreadySeen:!1}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./xml":"/home/ubuntu/staging/apps/build/js/xml.js"}],"/home/ubuntu/staging/apps/build/js/xml.js":[function(e,t,n){"use strict";n.serialize=function(e){var t=new XMLSerializer;return t.serializeToString(e)},n.parseElement=function(e){var t=new DOMParser;e=e.trim();var i=0===e.indexOf("<xml")?t.parseFromString(e,"text/xml"):t.parseFromString("<xml>"+e+"</xml>","text/xml"),r=i.getElementsByTagName("parsererror"),o=i.firstChild;if(!o)throw new Error("Nothing parsed");if(r.length>0)throw new Error(n.serialize(r[0]));if(o!==i.lastChild)throw new Error("Parsed multiple elements");return o}},{}],"/home/ubuntu/staging/apps/build/js/assetManagement/assetPrefix.js":[function(e,t){"use strict";var n,i="//"+location.host+"/media?u=",r=new RegExp("^https?://","i"),o="/v3/assets/";t.exports.init=function(e){e.assetPathPrefix&&(o=e.assetPathPrefix),e.channel&&(n=e.channel)},t.exports.fixPath=function(e){return r.test(e)?i+encodeURIComponent(e.replace(/ /g,"%20")):(e=e||"",0===e.length?"/blockly/media/1x1.gif":-1===e.indexOf("/")&&n?o+n+"/"+e:e)}},{}],"/home/ubuntu/staging/apps/build/js/assetManagement/assetListStore.js":[function(e,t){"use strict";var n=[];t.exports={reset:function(e){n=e.slice()},add:function(e){return n.push(e),n.slice()},remove:function(e){return n=n.filter(function(t){return t.filename!==e}),n.slice()},list:function(e){return e?n.filter(function(t){return t.category===e}):n.slice()}}},{}],"/home/ubuntu/staging/apps/build/js/acemode/mode-javascript_codeorg.js":[function(e,t,n){"use strict";var i=e("../dropletUtils"),r=e("./annotationList");n.defineForAce=function(e,t,n){ace.define("ace/mode/javascript_codeorg",["require","exports","module","ace/lib/oop","ace/mode/javascript","ace/mode/javascript_highlight_rules","ace/worker/worker_client","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/config","ace/lib/net","ace/ext/searchbox"],function(o,s){var a=o("ace/lib/oop"),l=o("ace/mode/javascript").Mode,u=o("ace/mode/javascript_highlight_rules").JavaScriptHighlightRules,c=o("ace/worker/worker_client"),p=c.WorkerClient;window.Worker||(p=c.UIWorkerClient,window.Worker=p);var h=o("./matching_brace_outdent").MatchingBraceOutdent,d=o("./behaviour/cstyle").CstyleBehaviour,f=o("./folding/cstyle").FoldMode,m=function(){this.HighlightRules=u,this.$outdent=new h,this.$behaviour=new d,this.foldingRules=new f};a.inherits(m,l),function(){this.$highlightRules=new u,this.$highlightRules.$keywordList=[],this.createWorker=function(o){var s=new p(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");s.attachToDocument(o.getDocument());var a={unused:!0,undef:!0,maxerr:1e3,predef:{},exported:{}};return i.getAllAvailableDropletBlocks(e).forEach(function(e){a.predef[e.func]=!1}),e.additionalPredefValues&&e.additionalPredefValues.forEach(function(e){a.predef[e]=!1}),t&&t.forEach(function(e){a.exported[e]=!1}),r.attachToSession(o,n),s.send("changeOptions",[a]),s.on("jslint",r.setJSLintAnnotations),s.on("terminate",function(){o.clearAnnotations()}),s},this.cleanup=function(){r.detachFromSession()}}.call(m.prototype),s.Mode=m})}},{"../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","./annotationList":"/home/ubuntu/staging/apps/build/js/acemode/annotationList.js"}],"/home/ubuntu/staging/apps/build/js/acemode/annotationList.js":[function(e,t){"use strict";function n(){i&&(r?r.setAnnotations(s.concat(a)):i.setAnnotations(s.concat(a)))}var i,r,o=e("./errorMapper"),s=[],a=[];t.exports={detachFromSession:function(){i=null,r=null},attachToSession:function(e,t){if(i&&e!==i)throw new Error("Already attached to ace session");i=e,r=t},setJSLintAnnotations:function(e){o.processResults(e),s=e.data.slice(),n()},getJSLintAnnotations:function(){return s},addRuntimeAnnotation:function(e,t,i){var r={row:t-1,col:0,raw:i,text:i,type:e.toLowerCase()};a.push(r),n()},clearRuntimeAnnotations:function(){0!==a.length&&(a=[],n())}}},{"./errorMapper":"/home/ubuntu/staging/apps/build/js/acemode/errorMapper.js"}],"/home/ubuntu/staging/apps/build/js/acemode/errorMapper.js":[function(e,t){"use strict";var n=[{original:/Assignment in conditional expression/,replacement:"For conditionals, use the comparison operator (===) to check if two things are equal."},{original:/(.*)\sis defined but never used./,replacement:"$1 is defined, but it's not called in your program."},{original:/(.*)\sis not defined./,replacement:"$1 hasn't been declared yet."}];t.exports.processResults=function(e){e.data.forEach(function(e){"info"===e.type&&(e.type="warning"),n.forEach(function(t){t.original.test(e.text)&&(e.text=e.text.replace(t.original,t.replacement))})})}},{}],"/home/ubuntu/staging/apps/build/js/ResizeSensor.js":[function(e,t){"use strict";t.exports=function(e,t){function n(){this.q=[],this.add=function(e){this.q.push(e)};var e,t;this.call=function(){for(e=0,t=this.q.length;t>e;e++)this.q[e].call()}}function i(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function r(e,t){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(t)}else e.resizedAttached=new n,e.resizedAttached.add(t);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var r="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0;";e.resizeSensor.style.cssText=r,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+r+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+r+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"absolute"!==i(e,"position")&&(e.style.position="relative");var s,a,l=e.resizeSensor.childNodes[0],u=l.childNodes[0],c=e.resizeSensor.childNodes[1],p=(c.childNodes[0],function(){u.style.width=l.offsetWidth+10+"px",u.style.height=l.offsetHeight+10+"px",l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight,s=e.offsetWidth,a=e.offsetHeight
});p();var h=function(){e.resizedAttached.call()},d=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};d(l,"scroll",function(){(e.offsetWidth>s||e.offsetHeight>a)&&h(),p()}),d(c,"scroll",function(){(e.offsetWidth<s||e.offsetHeight<a)&&h(),p()})}if(e&&e.constructor===Array||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements)for(var o=0,s=e.length;s>o;o++)r(e[o],t);else r(e,t)}},{}],"/home/ubuntu/staging/apps/build/js/MusicController.js":[function(e,t){"use strict";function n(e){s&&console&&console.info&&console.info((new Date).getTime()+": MusicController: "+e)}function i(e,t){return e=r.valueOr(e,[]),e.map(function(e){var n=[];return n.push(t(e.name+".mp3")),e.hasOgg&&n.push(t(e.name+".ogg")),{name:e.name,assetUrls:n,volume:r.valueOr(e.volume,1),sound:null,isLoaded:!1}})}var r=e("./utils"),o=r.getLodash(),s=!1,a=function(e,t,r,o){this.audioPlayer_=e,this.assetUrl_=t,this.trackList_=i(r,t),this.nowPlaying_=null,this.playOnLoad_=null,this.loopRandomWithDelay_=o,this.wasPlayingWhenVideoShown_=!1,this.betweenTrackTimeout_=null,document.addEventListener("videoShown",function(){n("video shown"),(this.nowPlaying_||this.betweenTrackTimeout_)&&(this.wasPlayingWhenVideoShown_=!0,this.betweenTrackTimeout_&&(window.clearTimeout(this.betweenTrackTimeout_),this.betweenTrackTimeout_=null),this.fadeOut())}.bind(this)),document.addEventListener("videoHidden",function(){this.wasPlayingWhenVideoShown_&&this.loopRandomWithDelay_&&!this.nowPlaying_&&this.play(),this.wasPlayingWhenVideoShown_=!1}.bind(this)),n("constructed")};t.exports=a,a.prototype.preload=function(){this.audioPlayer_&&this.trackList_.forEach(function(e){e.sound=this.audioPlayer_.registerByFilenamesAndID(e.assetUrls,e.name),e.sound.onLoad=function(){n("done loading "+e.name),e.isLoaded=!0,this.playOnLoad_===e.name&&this.play(e.name)}.bind(this)},this)},a.prototype.play=function(e){if(n("play "+e),this.audioPlayer_){var t;if(t=e?this.getTrackByName_(e):this.getRandomTrack_())if(t.sound&&t.isLoaded){n("playing now");var i=this.whenMusicStopped_.bind(this,t.name);t.sound.play({volume:t.volume,onEnded:i}),this.nowPlaying_=t.name}else n("not done loading, playing after load"),this.playOnLoad_=t.name}},a.prototype.stop=function(){if(this.nowPlaying_){var e=this.audioPlayer_.get(this.nowPlaying_);e&&e.stop()}},a.prototype.fadeOut=function(e){if(this.nowPlaying_){e=r.valueOr(e,3);var t=this.audioPlayer_.get(this.nowPlaying_);t&&t.fadeToGain(0,e),window.setTimeout(function(){this.stop()}.bind(this),1e3*e+100)}},a.prototype.whenMusicStopped_=function(e){this.nowPlaying_===e&&(this.nowPlaying_=null),this.loopRandomWithDelay_&&!this.wasPlayingWhenVideoShown_&&(this.betweenTrackTimeout_=window.setTimeout(function(){this.betweenTrackTimeout_=null,this.nowPlaying_||this.wasPlayingWhenVideoShown_||this.play()}.bind(this),this.loopRandomWithDelay_))},a.prototype.getTrackByName_=function(e){return o.find(this.trackList_,function(t){return t.name===e})},a.prototype.getRandomTrack_=function(){var e=Math.floor(Math.random()*this.trackList_.length);return this.trackList_[e]}},{"./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/JsInterpreterLogger.js":[function(e,t){"use strict";var n=e("./Observer"),i=t.exports=function(e){this.outputConsole_=e,this.observer_=new n};i.prototype.attachTo=function(e){this.observer_.observe(e.onExecutionWarning,this.log.bind(this))},i.prototype.detach=function(){this.observer_.unobserveAll()},i.prototype.log=function(){this.outputConsole_&&this.outputConsole_.log&&this.outputConsole_.log.apply(this.outputConsole_,arguments)}},{"./Observer":"/home/ubuntu/staging/apps/build/js/Observer.js"}],"/home/ubuntu/staging/apps/build/js/JsDebuggerUi.js":[function(e,t){"use strict";function n(e){return"string"==typeof e||e instanceof String?e:JSON.stringify(e)}function i(e){var t=document.createRange();if(0!==e.childNodes.length){t.setStart(e.lastChild,e.lastChild.nodeValue.length),t.collapse(!0);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}}function r(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var o=e("./CommandHistory"),s=e("./constants"),a=e("./DebugArea"),l=e("./dom"),u=e("./JSInterpreter"),c=e("./Observer"),p=e("./slider"),h=e("./utils"),d=s.KeyCodes,f=u.StepType,m=120,g=400,b=500,v="$watch ",y=t.exports=function(e){this.jsInterpreter_=null,this.observer_=new c,this.runApp_=e,this.history_=new o,this.watchExpressions_={},this.watchIntervalId_=0,this.debugOpenShutController_=null,this.rootDiv_=null};y.prototype.getMarkup=function(t,n){return e("./JsDebuggerUi.html.ejs")({assetUrl:t,debugButtons:n.showButtons,debugConsole:n.showConsole,debugWatch:n.showWatch})},y.prototype.attachTo=function(e){this.jsInterpreter_=e,this.observer_.observe(e.onNextStepChanged,this.updatePauseUiState.bind(this)),this.observer_.observe(e.onPause,this.onPauseContinueButton.bind(this)),this.observer_.observe(e.onExecutionWarning,this.log.bind(this)),this.watchIntervalId_=setInterval(this.onWatchTimer_.bind(this),b),this.updatePauseUiState(),this.clearDebugOutput(),this.clearDebugInput()},y.prototype.detach=function(){this.observer_.unobserveAll(),this.jsInterpreter_=null;var e=this.getElement_("#debug-watch");e&&r(e),this.watchExpressions_={},clearInterval(this.watchIntervalId_),this.watchIntervalId_=0,this.resetDebugControls_()},y.prototype.getElement_=function(e){var t=document.getElementById("debug-area");return t?t.querySelector(e):void 0},y.prototype.initializeAfterDomCreated=function(e){this.rootDiv_=document.getElementById("debug-area"),this.debugOpenShutController_=new a(this.rootDiv_,document.getElementById("codeTextbox"));var t=this.rootDiv_.querySelector("#speed-slider");if(t){var n=10,i=22,r=130;this.speedSlider_=new p(n,i,r,t),e.defaultStepSpeed&&this.setStepSpeed(e.defaultStepSpeed)}var o=this.rootDiv_.querySelector("#debug-input");o&&o.addEventListener("keydown",this.onDebugInputKeyDown.bind(this));var s=this.rootDiv_.querySelector("#debug-output");s&&s.addEventListener("mouseup",this.onDebugOutputMouseUp.bind(this));var u=this.getElement_("#debugResizeBar");if(u){l.addMouseDownTouchEvent(u,this.onMouseDownDebugResizeBar.bind(this)),document.body.addEventListener("mouseup",this.onMouseUpDebugResizeBar.bind(this));var c=l.getTouchEventName("mouseup");c&&document.body.addEventListener(c,this.onMouseUpDebugResizeBar.bind(this))}var h=this.rootDiv_.querySelector("#clear-console-header");h&&l.addClickTouchEvent(h,this.clearDebugOutput.bind(this));var d=this.getElement_("#pauseButton"),f=this.getElement_("#continueButton"),m=this.getElement_("#stepInButton"),g=this.getElement_("#stepOverButton"),b=this.getElement_("#stepOutButton");d&&f&&m&&g&&b&&(l.addClickTouchEvent(d,this.onPauseContinueButton.bind(this)),l.addClickTouchEvent(f,this.onPauseContinueButton.bind(this)),l.addClickTouchEvent(m,this.onStepInButton.bind(this)),l.addClickTouchEvent(g,this.onStepOverButton.bind(this)),l.addClickTouchEvent(b,this.onStepOutButton.bind(this)))},y.prototype.getStepDelay=function(){return this.speedSlider_?y.stepDelayFromStepSpeed(this.speedSlider_.getValue()):void 0},y.prototype.setStepSpeed=function(e){this.speedSlider_&&this.speedSlider_.setValue(e)},y.stepDelayFromStepSpeed=function(e){return 300*Math.pow(1-e,2)},y.prototype.log=function(e){var t=this.getElement_("#debug-output");t&&(t.textContent.length>0&&(t.textContent+="\n"),t.textContent+=n(e),t.scrollTop=t.scrollHeight)},y.prototype.onDebugInputKeyDown=function(e){var t=e.target.textContent;if(e.keyCode===d.ENTER){e.preventDefault(),this.history_.push(t),e.target.textContent="",this.log("> "+t);var n=this.jsInterpreter_;if(n)if(0===t.indexOf(v)){var r=t.substring(v.length);this.watchExpressions_[r]={}}else try{var o=n.evalInCurrentScope(t);this.log("< "+String(o))}catch(s){this.log("< "+String(s))}else this.log("< (not running)")}else e.keyCode===d.UP?(e.target.textContent=this.history_.goBack(t),i(e.target),e.preventDefault()):e.keyCode===d.DOWN&&(e.target.textContent=this.history_.goForward(t),i(e.target),e.preventDefault())},y.prototype.onDebugOutputMouseUp=function(e){var t=this.getElement_("#debug-input");t&&"DIV"===e.target.tagName&&0===window.getSelection().toString().length&&t.focus()};var _,w,E=!1;y.prototype.onMouseDownDebugResizeBar=function(e){var t=e.srcElement||e.target;"debugResizeBar"===t.id&&(E=!0,_=this.onMouseMoveDebugResizeBar.bind(this),document.body.addEventListener("mousemove",_),w=l.getTouchEventName("mousemove"),w&&document.body.addEventListener(w,_),e.preventDefault())},y.prototype.onMouseMoveDebugResizeBar=function(e){var t=document.getElementById("codeApp"),n=document.getElementById("codeTextbox"),i=this.getElement_("#debugResizeBar"),r=i.getBoundingClientRect(),o=(parseInt(window.getComputedStyle(t).bottom,10)||0)-r.height/2,s=Math.max(m,Math.min(g,window.innerHeight-e.pageY-o));this.debugOpenShutController_.isShut()&&this.debugOpenShutController_.snapOpen(),n.style.bottom=s+"px",this.rootDiv_.style.height=s+"px",h.fireResizeEvent()},y.prototype.onMouseUpDebugResizeBar=function(){E&&(document.body.removeEventListener("mousemove",_),w&&document.body.removeEventListener(w,_),E=!1)},y.prototype.clearDebugOutput=function(){var e=this.getElement_("#debug-output");e&&(e.textContent="")},y.prototype.clearDebugInput=function(){var e=this.getElement_("#debug-input");e&&(e.textContent="")},y.prototype.onPauseContinueButton=function(){var e=this.jsInterpreter_;e&&(e.paused&&e.nextStep===f.RUN?e.paused=!1:(e.paused=!0,e.nextStep=f.RUN),this.updatePauseUiState())},y.prototype.updatePauseUiState=function(){var e=this.jsInterpreter_;if(e){var t=this.getElement_("#pauseButton"),n=this.getElement_("#continueButton"),i=this.getElement_("#running-spinner"),r=this.getElement_("#paused-icon");t&&n&&i&&r&&(e.paused&&e.nextStep===f.RUN?(t.style.display="none",n.style.display="inline-block",n.disabled=!1,i.style.display="none",r.style.display="inline-block"):(t.style.display="inline-block",t.disabled=!1,n.style.display="none",i.style.display="inline-block",r.style.display="none"));var o=this.getElement_("#stepInButton"),s=this.getElement_("#stepOverButton"),a=this.getElement_("#stepOutButton");o&&s&&a&&(o.disabled=!e.paused,s.disabled=!e.paused,a.disabled=!e.paused)}},y.prototype.resetDebugControls_=function(){var e=this.getElement_("#running-spinner");e&&(e.style.display="none");var t=this.getElement_("#paused-icon");t&&(t.style.display="none");var n=this.getElement_("#pauseButton"),i=this.getElement_("#continueButton"),r=this.getElement_("#stepInButton"),o=this.getElement_("#stepOverButton"),s=this.getElement_("#stepOutButton");n&&i&&r&&o&&s&&(n.style.display="inline-block",n.disabled=!0,i.style.display="none",r.disabled=!1,o.disabled=!0,s.disabled=!0)},y.prototype.onStepOverButton=function(){var e=this.jsInterpreter_;e&&(e.paused=!0,e.nextStep=f.OVER,this.updatePauseUiState())},y.prototype.onStepInButton=function(){var e=this.jsInterpreter_;e||(this.runApp_(),this.onPauseContinueButton(),e=this.jsInterpreter_),e.paused=!0,e.nextStep=f.IN,this.updatePauseUiState()},y.prototype.onStepOutButton=function(){var e=this.jsInterpreter_;e&&(e.paused=!0,e.nextStep=f.OUT,this.updatePauseUiState())},y.prototype.onWatchTimer_=function(){var t=this.jsInterpreter_;if(t)for(var n in this.watchExpressions_){var i=t.evaluateWatchExpression(n);this.watchExpressions_[n].lastValue!==i&&(this.watchExpressions_[n].lastValue=i);var o=this.getElement_("#debug-watch");if(o){r(o);var s=document.createElement("div");s.className="debug-watch-item",s.innerHTML=e("./JsDebuggerWatchItem.html.ejs")({varName:n,varValue:i}),o.appendChild(s)}}}},{"./CommandHistory":"/home/ubuntu/staging/apps/build/js/CommandHistory.js","./DebugArea":"/home/ubuntu/staging/apps/build/js/DebugArea.js","./JSInterpreter":"/home/ubuntu/staging/apps/build/js/JSInterpreter.js","./JsDebuggerUi.html.ejs":"/home/ubuntu/staging/apps/build/js/JsDebuggerUi.html.ejs","./JsDebuggerWatchItem.html.ejs":"/home/ubuntu/staging/apps/build/js/JsDebuggerWatchItem.html.ejs","./Observer":"/home/ubuntu/staging/apps/build/js/Observer.js","./constants":"/home/ubuntu/staging/apps/build/js/constants.js","./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./slider":"/home/ubuntu/staging/apps/build/js/slider.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/slider.js":[function(e,t){"use strict";var n=e("./constants").SVG_NS,i=e("./dom"),r=function o(e,t,r,s,a){this.KNOB_Y_=t-12,this.KNOB_MIN_X_=e+8,this.KNOB_MAX_X_=e+r-8,this.value_=.5,this.changeFunc_=a,this.isAndroid_=i.isAndroid(),this.isIOS_=i.isIOS(),this.isWindowsTouch_=i.isWindowsTouch();var l=document.createElementNS(n,"line");l.setAttribute("class","sliderTrack"),l.setAttribute("x1",e),l.setAttribute("y1",t),l.setAttribute("x2",e+r),l.setAttribute("y2",t),s.appendChild(l),this.track_=l;var u=document.createElementNS(n,"path");for(u.setAttribute("class","sliderKnob"),u.setAttribute("d","m 0,0 l -8,8 v 12 h 16 v -12 z"),s.appendChild(u),this.knob_=u,this.setValue(.5);s&&"svg"!=s.nodeName.toLowerCase();)s=s.parentNode;this.SVG_=s;var c=this;i.addMouseDownTouchEvent(this.knob_,function(e){return c.knobMouseDown_(e)}),i.addMouseDownTouchEvent(this.track_,function(e){return c.trackMouseDown_(e)}),i.addMouseUpTouchEvent(this.SVG_,o.knobMouseUp_),i.addMouseMoveTouchEvent(this.SVG_,o.knobMouseMove_),o.bindEvent_(document,"mouseover",o.mouseOver_)};r.activeSlider_=null,r.startMouseX_=0,r.startKnobX_=0,r.prototype.knobMouseDown_=function(e){return this.beginDrag_(this.mouseToSvg_(e)),e.preventDefault(),!1},r.prototype.trackMouseDown_=function(e){var t=this.mouseToSvg_(e);return this.snapToPosition_(t.x),this.beginDrag_(t),e.preventDefault(),!1},r.prototype.beginDrag_=function(e){r.activeSlider_=this,r.startMouseX_=e.x,r.startKnobX_=0;var t=this.knob_.getAttribute("transform");if(t){var n=t.match(/translate\(\s*([-\d.]+)/);n&&(r.startKnobX_=Number(n[1]))}},r.prototype.snapToPosition_=function(e){var t=Math.min(Math.max(e,this.KNOB_MIN_X_),this.KNOB_MAX_X_);this.knob_.setAttribute("transform","translate("+t+","+this.KNOB_Y_+")"),this.value_=(t-this.KNOB_MIN_X_)/(this.KNOB_MAX_X_-this.KNOB_MIN_X_),this.changeFunc_&&this.changeFunc_(this.value_)},r.knobMouseUp_=function(){r.activeSlider_=null},r.mouseOver_=function(e){if(r.activeSlider_){for(var t=e.target;t;t=t.parentNode)if(t==r.activeSlider_.SVG_)return;r.knobMouseUp_(e)}},r.knobMouseMove_=function(e){var t=r.activeSlider_;if(t){var n=t.mouseToSvg_(e).x-r.startMouseX_+r.startKnobX_;t.snapToPosition_(n)}},r.prototype.getValue=function(){return this.value_},r.prototype.setValue=function(e){this.value_=Math.min(Math.max(e,0),1);var t=this.KNOB_MIN_X_+(this.KNOB_MAX_X_-this.KNOB_MIN_X_)*this.value_;this.knob_.setAttribute("transform","translate("+t+","+this.KNOB_Y_+")")},r.prototype.mouseToSvg_=function(e){var t=this.SVG_.createSVGPoint();this.isWindowsTouch_?(t.x=e.screenX,t.y=e.screenY):this.isAndroid_?(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):this.isIOS_?(t.x=e.pageX,t.y=e.pageY):(t.x=e.clientX,t.y=e.clientY);var n=this.SVG_.getScreenCTM().inverse();return t.matrixTransform(n)},r.bindEvent_=function(e,t,n){e.addEventListener(t,n,!1)},t.exports=r},{"./constants":"/home/ubuntu/staging/apps/build/js/constants.js","./dom":"/home/ubuntu/staging/apps/build/js/dom.js"}],"/home/ubuntu/staging/apps/build/js/constants.js":[function(e,t,n){"use strict";n.ResultType={UNSET:0,SUCCESS:1,FAILURE:-1,TIMEOUT:2,ERROR:-2},n.TestResults={NO_TESTS_RUN:-1,EMPTY_BLOCK_FAIL:1,TOO_FEW_BLOCKS_FAIL:2,LEVEL_INCOMPLETE_FAIL:3,MISSING_BLOCK_UNFINISHED:4,EXTRA_TOP_BLOCKS_FAIL:5,RUNTIME_ERROR_FAIL:6,SYNTAX_ERROR_FAIL:7,MISSING_BLOCK_FINISHED:10,APP_SPECIFIC_FAIL:11,EMPTY_FUNCTION_BLOCK_FAIL:12,UNUSED_PARAM:13,UNUSED_FUNCTION:14,PARAM_INPUT_UNATTACHED:15,INCOMPLETE_BLOCK_IN_FUNCTION:16,QUESTION_MARKS_IN_NUMBER_FIELD:17,EMPTY_FUNCTIONAL_BLOCK:18,EXAMPLE_FAILED:19,NESTED_FOR_SAME_VARIABLE:-2,EMPTY_FUNCTION_NAME:-3,MISSING_RECOMMENDED_BLOCK_UNFINISHED:-4,EXTRA_FUNCTION_FAIL:-5,LOCAL_FUNCTION_FAIL:-6,GENERIC_LINT_FAIL:-7,LOG_CONDITION_FAIL:-8,TOO_MANY_BLOCKS_FAIL:20,APP_SPECIFIC_ACCEPTABLE_FAIL:21,MISSING_RECOMMENDED_BLOCK_FINISHED:22,FREE_PLAY:30,EDIT_BLOCKS:70,ALL_PASS:100},n.BeeTerminationValue={FAILURE:!1,SUCCESS:!0,INFINITE_LOOP:1/0,NOT_AT_FLOWER:1,FLOWER_EMPTY:2,NOT_AT_HONEYCOMB:3,HONEYCOMB_FULL:4,UNCHECKED_CLOUD:5,UNCHECKED_PURPLE:6,INSUFFICIENT_NECTAR:7,INSUFFICIENT_HONEY:8,DID_NOT_COLLECT_EVERYTHING:9},n.KeyCodes={BACKSPACE:8,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:127},n.SVG_NS="http://www.w3.org/2000/svg"},{}],"/home/ubuntu/staging/apps/build/js/Observer.js":[function(e,t){"use strict";var n=t.exports=function(){this.observed_=[]};n.prototype.observe=function(e,t){var n=e.register(t);this.observed_.push({event:e,key:n})},n.prototype.unobserveAll=function(){this.observed_.forEach(function(e){e.event.unregister(e.key)}),this.observed_.length=0}},{}],"/home/ubuntu/staging/apps/build/js/JsDebuggerWatchItem.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var e=require("./locale");buf.push('\n\n<span class="watch-variable">',escape(varName),'</span><span class="watch-separator">: </span>\n'),varValue instanceof Error?buf.push('  <span class="watch-value watch-unavailable">\n    ',escape(e.debugWatchNotAvailable()),"\n"):buf.push('\n  <span class="watch-value">\n    ',escape(varValue),"\n"),buf.push("\n  </span>\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"./locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/JsDebuggerUi.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var e=require("./locale");buf.push('\n\n<div id="debug-area">\n  <div id="debugResizeBar" class="fa fa-ellipsis-h"></div>\n  <div id="debug-area-header">\n    <span class="header-text">',escape(e.debugConsoleHeader()),'</span>\n    <i id="show-hide-debug-icon" class="fa fa-chevron-circle-down"></i>\n    '),debugButtons&&buf.push('\n    <div id="debug-commands-header" class="workspace-header">\n      <i id="running-spinner" style="display: none;" class="fa fa-spinner fa-spin"></i>\n      <i id="paused-icon" style="display: none;" class="fa fa-pause"></i>\n      <span class="header-text">',escape(e.debugCommandsHeaderWhenOpen()),"</span>\n    </div>\n    "),buf.push("\n    "),debugWatch&&buf.push('\n    <div id="debug-watch-header" class="workspace-header">\n      <span class="header-text">',escape(e.debugWatchHeader()),"</span>\n    </div>\n    "),buf.push('\n    <div id="clear-console-header" class="workspace-header workspace-header-button"><span><i class="fa fa-eraser"></i>Clear</span></div>\n    <div id="slider-cell" style="margin-left: ',escape(debugButtons?0:40),'px">\n      <svg id="speed-slider"\n           xmlns="http://www.w3.org/2000/svg"\n           xmlns:svg="http://www.w3.org/2000/svg"\n           xmlns:xlink="http://www.w3.org/1999/xlink"\n           version="1.1"\n           width="150"\n           height="28">\n          <!-- Slow icon. -->\n          <clipPath id="slowClipPath">\n            <rect width=26 height=12 x=5 y=6 />\n          </clipPath>\n          <image xlink:href="',escape(assetUrl("media/turtle_icons.png")),'" height=42 width=84 x=-21 y=-18\n              clip-path="url(#slowClipPath)" />\n          <!-- Fast icon. -->\n          <clipPath id="fastClipPath">\n            <rect width=26 height=16 x=120 y=2 />\n          </clipPath>\n          <image xlink:href="',escape(assetUrl("media/turtle_icons.png")),'" height=42 width=84 x=120 y=-19\n              clip-path="url(#fastClipPath)" />\n      </svg>\n    </div>\n  </div>\n\n  '),debugButtons&&buf.push('\n  <div id="debug-commands" class="debug-commands">\n    <div id="debug-buttons">\n      <button id="pauseButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="pause-btn icon21">\n        ',escape(e.pause()),'\n      </button>\n      <button id="continueButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="continue-btn icon21">\n        ',escape(e["continue"]()),'\n      </button>\n      <button id="stepOverButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="step-over-btn icon21">\n        ',escape(e.stepOver()),'\n      </button>\n      <button id="stepOutButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="step-out-btn icon21">\n        ',escape(e.stepOut()),'\n      </button>\n      <button id="stepInButton" class="debugger_button">\n        <img src="',escape(assetUrl("media/1x1.gif")),'" class="step-in-btn icon21">\n        ',escape(e.stepIn()),"\n      </button>\n    </div>\n  </div>\n  "),buf.push("\n  "),debugConsole&&buf.push('\n  <div id="debug-console" class="debug-console ',escape(debugButtons?"":"no-commands")," ",escape(debugWatch?"":"no-watch"),'">\n    <div id="debug-output" class="debug-output"></div>\n    <span class="debug-input-prompt">\n      &gt;\n    </span>\n    <div contenteditable spellcheck="false" id="debug-input" class="debug-input"></div>\n  </div>\n  '),buf.push("\n  "),debugWatch&&buf.push('\n  <div id="debug-watch" class="debug-watch ',escape(debugButtons?"":"no-commands"),'">\n  </div>\n  '),buf.push("\n</div>\n")}();return buf.join("")};return function(e){return t(e,require("ejs").filters)}}()},{"./locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js":[function(e,t,n){function i(e){return e.substr(1).split("|").reduce(function(e,t){var n=t.split(":"),i=n.shift(),r=n.join(":")||"";return r&&(r=", "+r),"filters."+i+"("+e+r+")"})}function r(e,t,n,i){var r=t.split("\n"),o=Math.max(i-3,0),s=Math.min(r.length,i+3),a=r.slice(o,s).map(function(e,t){var n=t+o+1;return(n==i?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=n,e.message=(n||"ejs")+":"+i+"\n"+a+"\n\n"+e.message,e}function o(e,t){var n=c(l(t),e),i=u(e);return i||(n+=".ejs"),n}var s=e("./utils"),a=e("path"),l=(a.basename,a.dirname),u=a.extname,c=a.join,p=e("fs"),h=p.readFileSync,d=n.filters=e("./filters"),f={};n.clearCache=function(){f={}};var m=(n.parse=function(e,t){var t=t||{},r=t.open||n.open||"<%",s=t.close||n.close||"%>",a=t.filename,l=t.compileDebug!==!1,u=[];u.push("var buf = [];"),!1!==t._with&&u.push("\nwith (locals || {}) { (function(){ "),u.push("\n buf.push('");for(var c=1,p=!1,d=0,f=e.length;f>d;++d)if(e.slice(d,r.length+d)==r){d+=r.length;var m,g,b=(l?"__stack.lineno=":"")+c;switch(e.substr(d,1)){case"=":m="', escape(("+b+", ",g=")), '",++d;break;case"-":m="', ("+b+", ",g="), '",++d;break;default:m="');"+b+";",g="; buf.push('"}var v=e.indexOf(s,d),y=e.substring(d,v),_=d,w=null,E=0;if("-"==y[y.length-1]&&(y=y.substring(0,y.length-2),p=!0),0==y.trim().indexOf("include")){var x=y.trim().slice(7).trim();if(!a)throw new Error("filename option is required for includes");var k=o(x,a);w=h(k,"utf8"),w=n.parse(w,{filename:k,_with:!1,open:r,close:s,compileDebug:l}),u.push("' + (function(){"+w+"})() + '"),y=""}for(;~(E=y.indexOf("\n",E));)E++,c++;":"==y.substr(0,1)&&(y=i(y)),y&&(y.lastIndexOf("//")>y.lastIndexOf("\n")&&(y+="\n"),u.push(m,y,g)),d+=v-_+s.length-1}else"\\"==e.substr(d,1)?u.push("\\\\"):"'"==e.substr(d,1)?u.push("\\'"):"\r"==e.substr(d,1)||("\n"==e.substr(d,1)?p?p=!1:(u.push("\\n"),c++):u.push(e.substr(d,1)));return u.push(!1!==t._with?"'); })();\n} \nreturn buf.join('');":"');\nreturn buf.join('');"),u.join("")},n.compile=function(e,t){t=t||{};var i=t.escape||s.escape,o=JSON.stringify(e),a=t.compileDebug!==!1,l=t.client,u=t.filename?JSON.stringify(t.filename):"undefined";e=a?["var __stack = { lineno: 1, input: "+o+", filename: "+u+" };",r.toString(),"try {",n.parse(e,t),"} catch (err) {","  rethrow(err, __stack.input, __stack.filename, __stack.lineno);","}"].join("\n"):n.parse(e,t),t.debug&&console.log(e),l&&(e="escape = escape || "+i.toString()+";\n"+e);try{var c=new Function("locals, filters, escape",e)}catch(p){throw"SyntaxError"==p.name&&(p.message+=t.filename?" in "+u:" while compiling ejs"),p}return l?c:function(e){return c.call(this,e,d,i)}});n.render=function(e,t){var n,t=t||{};if(t.cache){if(!t.filename)throw new Error('"cache" option requires "filename".');n=f[t.filename]||(f[t.filename]=m(e,t))}else n=m(e,t);return t.__proto__=t.locals,n.call(t.scope,t)},n.renderFile=function(e,t,i){var r=e+":string";"function"==typeof t&&(i=t,t={}),t.filename=e;var o;try{o=t.cache?f[r]||(f[r]=h(e,"utf8")):h(e,"utf8")}catch(s){return void i(s)}i(null,n.render(o,t))},n.__express=n.renderFile,e.extensions?e.extensions[".ejs"]=function(t,n){source=e("fs").readFileSync(n,"utf-8"),t._compile(m(source,{}),n)}:e.registerExtension&&e.registerExtension(".ejs",function(e){return m(e,{})})},{"./filters":"/home/ubuntu/staging/apps/node_modules/ejs/lib/filters.js","./utils":"/home/ubuntu/staging/apps/node_modules/ejs/lib/utils.js",fs:"/home/ubuntu/staging/apps/node_modules/browserify/lib/_empty.js",path:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/path-browserify/index.js"}],"/home/ubuntu/staging/apps/node_modules/ejs/lib/utils.js":[function(e,t,n){n.escape=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{}],"/home/ubuntu/staging/apps/node_modules/ejs/lib/filters.js":[function(e,t,n){n.first=function(e){return e[0]},n.last=function(e){return e[e.length-1]},n.capitalize=function(e){return e=String(e),e[0].toUpperCase()+e.substr(1,e.length)},n.downcase=function(e){return String(e).toLowerCase()},n.upcase=function(e){return String(e).toUpperCase()},n.sort=function(e){return Object.create(e).sort()},n.sort_by=function(e,t){return Object.create(e).sort(function(e,n){return e=e[t],n=n[t],e>n?1:n>e?-1:0})},n.size=n.length=function(e){return e.length},n.plus=function(e,t){return Number(e)+Number(t)},n.minus=function(e,t){return Number(e)-Number(t)},n.times=function(e,t){return Number(e)*Number(t)},n.divided_by=function(e,t){return Number(e)/Number(t)},n.join=function(e,t){return e.join(t||", ")},n.truncate=function(e,t){return e=String(e),e.substr(0,t)},n.truncate_words=function(e,t){var e=String(e),n=e.split(/ +/);return n.slice(0,t).join(" ")},n.replace=function(e,t,n){return String(e).replace(t,n||"")},n.prepend=function(e,t){return Array.isArray(e)?[t].concat(e):t+e},n.append=function(e,t){return Array.isArray(e)?e.concat(t):e+t},n.map=function(e,t){return e.map(function(e){return e[t]})},n.reverse=function(e){return Array.isArray(e)?e.reverse():String(e).split("").reverse().join("")},n.get=function(e,t){return e[t]},n.json=function(e){return JSON.stringify(e)}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/path-browserify/index.js":[function(e,t,n){(function(e){function t(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return r.exec(e).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return n=t(i(n.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(e){var r=n.isAbsolute(e),o="/"===s(e,-1);return e=t(i(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var r=i(e.split("/")),o=i(t.split("/")),s=Math.min(r.length,o.length),a=s,l=0;s>l;l++)if(r[l]!==o[l]){a=l;break}for(var u=[],l=a;l<r.length;l++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/process/browser.js"}],"/home/ubuntu/staging/apps/node_modules/browserify/node_modules/process/browser.js":[function(e,t){function n(){u=!1,s.length?l=s.concat(l):c=-1,l.length&&i()}function i(){if(!u){var e=setTimeout(n);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var s,a=t.exports={},l=[],u=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new r(e,t)),1!==l.length||u||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],"/home/ubuntu/staging/apps/node_modules/browserify/lib/_empty.js":[function(){},{}],"/home/ubuntu/staging/apps/build/js/JSInterpreter.js":[function(e,t){"use strict";function n(e){try{e.interpreter.step()}catch(t){return t}}var i=e("./codegen"),r=e("./ObservableEvent"),o=e("./utils"),s=t.exports=function(e){this.studioApp=e.studioApp,this.shouldRunAtMaxSpeed=e.shouldRunAtMaxSpeed||function(){return!0},this.maxInterpreterStepsPerTick=e.maxInterpreterStepsPerTick||1e4,this.customMarshalGlobalProperties=e.customMarshalGlobalProperties||{},this.customMarshalBlockedProperties=e.customMarshalBlockedProperties||[],this.onNextStepChanged=new r,this.onPause=new r,this.onExecutionError=new r,this.onExecutionWarning=new r,this.paused=!1,this.yieldExecution=!1,this.startedHandlingEvents=!1,this.executionError=null,this.nextStep=a.RUN,this.maxValidCallExpressionDepth=0,this.executeLoopDepth=0,this.callExpressionSeenAtDepth=[],this.stoppedAtBreakpointRows=[],this.logExecution=e.logExecution,this.executionLog=[]};s.prototype.parse=function(e){if(this.studioApp.hideSource)this.isBreakpointRow=function(){return!1};else{this.calculateCodeInfo(e.code);var t=this.studioApp.editor.aceEditor.getSession();this.isBreakpointRow=i.isAceBreakpointRow.bind(null,t)}var n=this;e.enableEvents&&(this.eventQueue=[],e.code+="\nwhile (true) { var obj = getCallback(); if (obj) { var ret = obj.fn.apply(null, obj.arguments ? obj.arguments : null);setCallbackRetVal(ret); }}",i.createNativeFunctionFromInterpreterFunction=function(e){return function(){if(n.initialized()){for(var t=new Array(arguments.length),i=0;i<arguments.length;i++)t[i]=arguments[i];if(n.eventQueue.push({fn:e,arguments:t}),0===n.executeLoopDepth)return n.executeInterpreter(!1,!0),n.lastCallbackRetVal}}});var r=function(t,r){n.interpreter=t,n.globalScope=r,t.getProperty=n.getProperty.bind(n,t,t.getProperty),t.hasProperty=n.hasProperty.bind(n,t,t.hasProperty),n.baseSetProperty=t.setProperty,t.setProperty=n.setProperty.bind(n,t,t.setProperty),i.initJSInterpreter(t,e.blocks,e.blockFilter,r,e.globalFunctions);var o=i.makeNativeMemberFunction({interpreter:t,nativeFunc:n.nativeGetCallback.bind(n),maxDepth:5});t.setProperty(r,"getCallback",t.createNativeFunction(o)),o=i.makeNativeMemberFunction({interpreter:t,nativeFunc:n.nativeSetCallbackRetVal.bind(n)}),t.setProperty(r,"setCallbackRetVal",t.createNativeFunction(o))
};try{new window.Interpreter(e.code,r)}catch(o){this.executionError=o,this.handleError()}},s.prototype.calculateCodeInfo=function(e){this.codeInfo={},this.codeInfo.userCodeStartOffset=0,this.codeInfo.userCodeLength=e.length,this.codeInfo.cumulativeLength=i.calculateCumulativeLength(e)},s.prototype.initialized=function(){return!!this.interpreter},s.prototype.deinitialize=function(){this.interpreter=null},s.StepType={RUN:0,IN:1,OVER:2,OUT:3},s.prototype.nativeGetCallback=function(){this.startedHandlingEvents=!0;var e=this.eventQueue.shift();return"undefined"==typeof e&&this["yield"](),e},s.prototype.nativeSetCallbackRetVal=function(e){0===this.eventQueue.length&&(this.seenReturnFromCallbackDuringExecution=!0,this.lastCallbackRetVal=e),this.runUntilCallbackReturn||"undefined"==typeof this.lastCallbackRetVal||(this.onExecutionWarning.notifyObservers("Function passed to onEvent() has taken too long - the return value was ignored."),this.shouldRunAtMaxSpeed()||this.onExecutionWarning.notifyObservers("  (try moving the speed slider to its maximum value)"))},s.prototype["yield"]=function(){this.yieldExecution=!0};var a=s.StepType;s.prototype.findStoppedAtBreakpointRow=function(e,t){for(var n=0;n<this.stoppedAtBreakpointRows.length;n++){var i=this.stoppedAtBreakpointRows[n];if(i.scope===e&&("undefined"==typeof t||t===i.row))return i}},s.prototype.replaceStoppedAtBreakpointRowForScope=function(e,t){if("number"!=typeof t||0>t)throw new TypeError("Row "+t+" is not a valid row in user code.");for(var n=0;n<this.stoppedAtBreakpointRows.length;n++){var i=this.stoppedAtBreakpointRows[n];if(i.scope===e)return void(i.row=t)}this.stoppedAtBreakpointRows.unshift({row:t,scope:e})},s.prototype.removeStoppedAtBreakpointRowForScope=function(e){for(var t=0;t<this.stoppedAtBreakpointRows.length;t++){var n=this.stoppedAtBreakpointRows[t];if(n.scope===e)return void this.stoppedAtBreakpointRows.splice(t,1)}},s.prototype.isProgramDone=function(){return this.executionError||!this.interpreter||!this.interpreter.stateStack.length};var l={Program:!0,BlockStatement:!0,SwitchStatement:!0};s.prototype.executeInterpreter=function(e,t){this.executeLoopDepth++,this.runUntilCallbackReturn=t,t&&delete this.lastCallbackRetVal,this.yieldExecution=!1,this.seenReturnFromCallbackDuringExecution=!1;var r=this.paused&&this.nextStep===a.IN&&e,o=!1;if(this.paused)switch(this.nextStep){case a.RUN:return;case a.OUT:if(this.interpreter&&"undefined"==typeof this.stepOutToStackDepth){this.stepOutToStackDepth=0;for(var s=this.maxValidCallExpressionDepth;s>0;s--)if(this.callExpressionSeenAtDepth[s]){this.stepOutToStackDepth=s;break}}}for(var u,c,p=!1,h=!1,d=!1,f=0;f<this.maxInterpreterStepsPerTick||d;f++){o=this.shouldRunAtMaxSpeed();var m;m=this.studioApp.hideSource&&o?function(){return-1}:this.studioApp.hideSource||o?this.getUserCodeLine:this.selectCurrentCode;var g=this.interpreter.getScope();if(h&&!d||p&&!d&&!o||this.yieldExecution||this.interpreter.paused_||t&&this.seenReturnFromCallbackDuringExecution)break;if(c=m.call(this),u=-1!==c,!u||d||this.atInterstitialNode||!(r||this.isBreakpointRow(c)&&!this.findStoppedAtBreakpointRow(g,c))){if(u&&!this.findStoppedAtBreakpointRow(g,c)&&this.removeStoppedAtBreakpointRowForScope(g),u&&d&&this.replaceStoppedAtBreakpointRowForScope(g,c),this.logExecution&&this.logStep_(),this.executionError=n(this),this.executionError||!this.interpreter.stateStack.length)return this.executionError&&this.handleError(u?c+1:void 0),void this.executeLoopDepth--;var b=this.interpreter.stateStack[0],v=b.node.type;this.atInterstitialNode=l.hasOwnProperty(v),u&&(p=p||b.done||this.atInterstitialNode);for(var y=this.interpreter.stateStack.length,_=y+1;_<=this.maxValidCallExpressionDepth;_++)this.callExpressionSeenAtDepth[_]=!1;if(this.maxValidCallExpressionDepth=y,u&&"CallExpression"===this.interpreter.stateStack[0].node.type&&(this.callExpressionSeenAtDepth[y]=!0),this.paused){if(u&&"CallExpression"===this.interpreter.stateStack[0].node.type&&"undefined"==typeof this.firstCallStackDepthThisStep&&(this.firstCallStackDepthThisStep=y),!p&&u&&this.nextStep===a.IN&&y>this.firstCallStackDepthThisStep&&(h=!0),p||h){var w=d;d=i.isNextStepSafeWhileUnwinding(this.interpreter),w&&!d&&(c=m.call(this),u=-1!==c,u||(d=!0))}if((h||p)&&!d)if(this.nextStep===a.OUT&&y>this.stepOutToStackDepth);else if(!(this.nextStep===a.OVER&&"undefined"!=typeof this.firstCallStackDepthThisStep&&y>this.firstCallStackDepthThisStep)){this.nextStep=a.RUN,this.onNextStepChanged.notifyObservers(),u&&this.replaceStoppedAtBreakpointRowForScope(this.interpreter.getScope(),c),delete this.stepOutToStackDepth,delete this.firstCallStackDepthThisStep;break}}}else this.paused?(this.nextStep=a.RUN,this.onNextStepChanged.notifyObservers()):this.onPause.notifyObservers(),this.replaceStoppedAtBreakpointRowForScope(g,c),h=!0,d=i.isNextStepSafeWhileUnwinding(this.interpreter)}h&&o&&this.selectCurrentCode(),this.executeLoopDepth--},s.prototype.isOffsetInUserCode_=function(e){if("undefined"==typeof e||"undefined"==typeof this.codeInfo)return!1;var t=e-this.codeInfo.userCodeStartOffset;return t>=0&&t<this.codeInfo.userCodeLength},s.getMemberExpressionName_=function(e){var t;switch(e.object.type){case"MemberExpression":t=this.getMemberExpressionName_(e.object);break;case"Identifier":t=e.object.name;break;default:throw"Unexpected MemberExpression node object type: "+e.object.type}var n;switch(e.property.type){case"Identifier":n="."+e.property.name;break;case"Literal":n="["+e.property.value+"]";break;default:throw"Unexpected MemberExpression node property type: "+e.object.type}return t+n},s.prototype.logStep_=function(){var e=this.interpreter.stateStack[0],t=e.node;if(this.isOffsetInUserCode_(t.start))if("CallExpression"!==t.type&&"NewExpression"!==t.type||!e.doneCallee_||e.doneExec||t.arguments[e.n_||0]){if("ForStatement"===t.type){var n=e.mode||0;switch(n){case i.ForStatementMode.INIT:this.executionLog.push("[forInit]");break;case i.ForStatementMode.TEST:this.executionLog.push("[forTest]");break;case i.ForStatementMode.UPDATE:this.executionLog.push("[forUpdate]")}}}else switch(t.callee.type){case"Identifier":this.executionLog.push(t.callee.name+":"+t.arguments.length);break;case"MemberExpression":this.executionLog.push(s.getMemberExpressionName_(t.callee)+":"+t.arguments.length);break;default:throw"Unexpected callee node property type: "+t.object.type}},s.prototype.handleError=function(e){!e&&this.executionError instanceof SyntaxError&&(e=this.executionError.loc.line,i.selectEditorRowColError(this.studioApp.editor,e-1,this.executionError.loc.column)),this.selectCurrentCode("ace_error"),e||(e=1+this.getNearestUserCodeLine()),this.onExecutionError.notifyObservers(this.executionError,e)},s.prototype.createPrimitive=function(e){return this.interpreter?this.interpreter.createPrimitive(e):void 0},s.prototype.getProperty=function(e,t,n,r){r=r.toString();var o;if(n.isCustomMarshal||n===this.globalScope&&(o=this.customMarshalGlobalProperties[r])){var s;if(-1!==this.customMarshalBlockedProperties.indexOf(r))return t.call(e,n,r);s=n.isCustomMarshal?n.data[r]:o[r];var a=typeof s;return"number"===a||"boolean"===a||"string"===a||"undefined"===a||null===s?e.createPrimitive(s):i.marshalNativeToInterpreter(e,s,n.data)}return t.call(e,n,r)},s.prototype.hasProperty=function(e,t,n,i){i=i.toString();var r;return n.isCustomMarshal||n===this.globalScope&&(r=this.customMarshalGlobalProperties[i])?-1!==this.customMarshalBlockedProperties.indexOf(i)?t.call(e,n,i):n.isCustomMarshal?i in n.data:i in r:t.call(e,n,i)},s.prototype.setProperty=function(e,t,n,r,o,s,a){r=r.toString();var l;if(n.isCustomMarshal){if(-1!==this.customMarshalBlockedProperties.indexOf(r))return t.call(e,n,r,o,s,a);n.data[r]=i.marshalInterpreterToNative(e,o)}else{if(n!==this.globalScope||!(l=this.customMarshalGlobalProperties[r]))return t.call(e,n,r,o,s,a);if(-1!==this.customMarshalBlockedProperties.indexOf(r))return t.call(e,n,r,o,s,a);l[r]=i.marshalInterpreterToNative(e,o)}},s.prototype.selectCurrentCode=function(e){return this.studioApp.hideSource?-1:i.selectCurrentCode(this.interpreter,this.codeInfo.cumulativeLength,this.codeInfo.userCodeStartOffset,this.codeInfo.userCodeLength,this.studioApp.editor,e)},s.prototype.getUserCodeLine=function(){var e=-1;if(this.interpreter.stateStack[0]){var t=this.interpreter.stateStack[0].node,n=t.start-this.codeInfo.userCodeStartOffset;n>=0&&n<this.codeInfo.userCodeLength&&(e=i.aceFindRow(this.codeInfo.cumulativeLength,0,this.codeInfo.cumulativeLength.length,n))}return e},s.prototype.getNearestUserCodeLine=function(){if(this.studioApp.hideSource)return-1;for(var e=-1,t=0;t<this.interpreter.stateStack.length;t++){var n=this.interpreter.stateStack[t].node,r=n.start-this.codeInfo.userCodeStartOffset;if(r>=0&&r<this.codeInfo.userCodeLength){e=i.aceFindRow(this.codeInfo.cumulativeLength,0,this.codeInfo.cumulativeLength.length,r);break}}return e},s.prototype.createGlobalProperty=function(e,t,n){var r;if("function"==typeof t){var s=i.makeNativeMemberFunction({interpreter:this.interpreter,nativeFunc:t,nativeParentObj:n});r=this.interpreter.createNativeFunction(s)}else r=i.marshalNativeToInterpreter(this.interpreter,t,o.valueOr(n,window));this.baseSetProperty.call(this.interpreter,this.globalScope,e,r)},s.prototype.getValueFromScope=function(e){for(var t=this.interpreter.getScope();t;){if(this.interpreter.hasProperty(t,e))return this.interpreter.getProperty(t,e);t=t.parentScope}throw new ReferenceError("Unknown identifier: "+e)},s.prototype.getWatchValueFromNode_=function(e){if("MemberExpression"===e.type)return this.getValueFromMemberExpression_(e);if("Identifier"===e.type)return this.getValueFromScope(e.name);throw new Error("Invalid")},s.prototype.getValueFromMemberExpression_=function(e){var t=this.getWatchValueFromNode_(e.object);return"Identifier"===e.property.type?this.interpreter.getValue([t,e.property.name]):"Literal"===e.property.type?this.interpreter.getValue([t,this.interpreter.createPrimitive(e.property.value)]):void 0},s.prototype.evaluateWatchExpression=function(e){var t;try{var n=window.acorn.parse(e);if("Program"!==n.type||"ExpressionStatement"!==n.body[0].type)throw new Error("Invalid");t=this.getWatchValueFromNode_(n.body[0].expression)}catch(r){return r instanceof Error?r:new Error(r)}return i.marshalInterpreterToNative(this.interpreter,t)},s.prototype.findGlobalFunction=function(e){var t=this.interpreter.getProperty(this.globalScope,e);return"function"===t.type?t:void 0},s.prototype.getGlobalFunctionNames=function(){var e=["eval","getCallback","setCallbackRetVal"],t=[];for(var n in this.globalScope.properties){var i=this.globalScope.properties[n];"function"!==i.type||i.nativeFunc||-1!==e.indexOf(n)||t.push(n)}return t},s.prototype.getLocalFunctionNames=function(e){e||(e=this.globalScope);var t=[];for(var n in e.properties){var i=e.properties[n];if("function"===i.type&&!i.nativeFunc&&i.node){e!==this.globalScope&&t.push(n);var r=this.interpreter.createScope(i.node.body,i.parentScope),o=this.getLocalFunctionNames(r);t=t.concat(o)}}return t},s.prototype.getCurrentState=function(){return this.interpreter&&this.interpreter.stateStack[0]},s.prototype.evalInCurrentScope=function(e){var t=this.interpreter.getScope(),n=new window.Interpreter(e);return n.populateScope_(n.ast,t),n.stateStack=[{node:n.ast,scope:t,thisExpression:t}],["ARRAY","BOOLEAN","DATE","FUNCTION","NUMBER","OBJECT","STRING","UNDEFINED"].forEach(function(e){n[e]=this.interpreter[e]},this),n.getProperty=this.getProperty.bind(this,n,n.getProperty),n.hasProperty=this.hasProperty.bind(this,n,n.hasProperty),n.setProperty=this.setProperty.bind(this,n,n.setProperty),n.run(),n.value}},{"./ObservableEvent":"/home/ubuntu/staging/apps/build/js/ObservableEvent.js","./codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/codegen.js":[function(e,t,n){"use strict";function i(e,t){try{return e[t]}catch(n){}}function r(e,t,r,o){var s=o||e.createObject(e.OBJECT),a=e.isa(s,e.FUNCTION);for(var l in t){var u=i(t,l);(!a||u!==Function.prototype.trigger&&u!==Function.prototype.inherits)&&e.setProperty(s,l,n.marshalNativeToInterpreter(e,u,t,r))}return s}function o(e){return"undefined"!=typeof Uint8ClampedArray?e instanceof Uint8ClampedArray:e instanceof CanvasPixelArray}function s(e,t,i,r,o){for(var s in i){var a=i[s];if(a instanceof Function){var l=r?r:i,u=n.makeNativeMemberFunction(d.extend(o,{interpreter:e,nativeFunc:a,nativeParentObj:l}));e.setProperty(t,s,e.createNativeFunction(u))}}}function a(e,t,i,r){for(var o=0;o<t.length;o++){var s=t[o];if(s.parent&&(!i||"undefined"!=typeof i[s.func])){var a=r,l=s.func,u=l.split(".");if(2===u.length){var c=u[0];a=e.getProperty(r,c),e.UNDEFINED===a&&(a=e.createObject(e.OBJECT),e.setProperty(r,c,a)),l=u[1]}var p,h=s.parent[l],d=n.makeNativeMemberFunction({interpreter:e,nativeFunc:h,nativeParentObj:s.parent,dontMarshal:s.dontMarshal,nativeIsAsync:s.nativeIsAsync});p=s.nativeIsAsync?e.createAsyncFunction(d):e.createNativeFunction(d),e.setProperty(a,l,p)}}}function l(e){for(var t,i=["fromCharCode"],r=0;r<i.length;r++)t=n.makeNativeMemberFunction({interpreter:e,nativeFunc:String[i[r]],nativeParentObj:String}),e.setProperty(e.STRING,i[r],e.createNativeFunction(t),!1,!0);t=function(){return e.createPrimitive(-1!==String.prototype.indexOf.apply(this,arguments))},e.setProperty(e.STRING.properties.prototype,"includes",e.createNativeFunction(t),!1,!0)}function u(e){var t=e.getSession();for(var n in w)t.removeMarker(w[n]);w={}}function c(e,t,n,i,r,o){var s=e.getSession();t=t||"ace_step",w[t]&&(s.removeMarker(w[t]),w[t]=null),"undefined"!=typeof n&&(w[t]=s.addMarker(new(window.ace.require("ace/range").Range)(n,i,r,o),t,"text"),e.isRowFullyVisible(n)||e.scrollToLine(n,!0))}function p(e,t,i,r,o){var s=e.getSelection(),a=s.getRange();a.start.row=n.aceFindRow(t,0,t.length,i),a.start.column=i-t[a.start.row],a.end.row=n.aceFindRow(t,0,t.length,r),a.end.column=r-t[a.end.row],c(e,o||"ace_step",a.start.row,a.start.column,a.end.row,a.end.column)}var h=e("./dropletUtils"),d=e("./utils");n.ForStatementMode={INIT:0,TEST:1,BODY:2,UPDATE:3},n.evalWith=function(e,t){if(!t.StudioApp||!t.StudioApp.editCode){var i=[],r=[];for(var o in t)i.push(o),r.push(t[o]);i.push(e);var s=function(){return Function.apply(this,i)};return s.prototype=Function.prototype,(new s).apply(null,r)}var a=function(e,i){n.initJSInterpreter(e,null,null,i,t)},l=new Interpreter(e,a);l.run()},n.functionFromCode=function(e,t){if(t.StudioApp&&t.StudioApp.editCode)throw"Unexpected";var n=[],i=[];for(var r in t)n.push(r),i.push(t[r]);n.push(e);var o=function(){return Function.apply(this,n)};return o.prototype=Function.prototype,new o};var f="  executionInfo.checkTimeout(); if (executionInfo.isTerminated()){return;}\n",m="loopHighlight();\n",g=new RegExp(m.replace(/\(.*\)/,"\\(.*\\)"),"g");n.loopTrap=function(){return f},n.loopHighlight=function(e,t){var n="'block_id_"+t+"'";return void 0===t&&(n="%1"),e+"."+m.replace("()","("+n+")")},n.strip=function(e){return e.replace(/(,\s*)?'block_id_\d+'\)/g,")").replace(f,"").replace(g,"").replace(/(StudioApp|Maze|Turtle)\./g,"").replace(/^function (colour_random)[\s\S]*?^}/gm,"").replace(/\n\n+/gm,"\n\n").replace(/^\s+|\s+$/g,"")},n.workspaceCode=function(e){var t=e.Generator.blockSpaceToCode("JavaScript",null,!1);return n.strip(t)};var b=function(e,t,n){if(void 0===t&&e.UNDEFINED)return e.UNDEFINED;var i={data:t,isPrimitive:!1,isCustomMarshal:!0,type:typeof t,parent:n,toBoolean:function(){return Boolean(this.data)},toNumber:function(){return Number(this.data)},toString:function(){return String(this.data)},valueOf:function(){return this.data}};return i};n.customMarshalObjectList=[],n.asyncFunctionList=[],n.nativeCallsInterpreterFunctionList=[];var v=function(e,t){for(var i=0;i<n.customMarshalObjectList.length;i++){var r=n.customMarshalObjectList[i];if(e instanceof r.instance&&("undefined"==typeof r.requiredMethod||void 0!==e[r.requiredMethod])||"function"!=typeof e&&t instanceof r.instance)return!0}return!1},y=function(e){for(var t=0;t<n.customMarshalObjectList.length;t++){var i=n.customMarshalObjectList[t];if(e instanceof i.instance)return"undefined"==typeof i.requiredMethod||void 0!==e[i.requiredMethod]?i.methodOpts||{}:{}}return{}};n.marshalNativeToInterpreter=function(e,t,i,s){if(0===s||"undefined"==typeof t)return e.UNDEFINED;var a,l;if("undefined"==typeof s&&(s=1/0),v(t,i))return b(e,t,i);if(t instanceof Array){for(l=e.createObject(e.ARRAY),a=0;a<t.length;a++)l.properties[a]=n.marshalNativeToInterpreter(e,t[a],null,s-1);l.length=t.length}else if(o(t)){for(l=e.createObject(e.ARRAY),a=0;a<t.length;a++)l.properties[a]=e.createPrimitive(t[a]);l.length=t.length}else if(t instanceof Function){var u={interpreter:e,nativeFunc:t,nativeParentObj:i};-1!==n.asyncFunctionList.indexOf(t)&&(u.nativeIsAsync=!0),-1!==n.nativeCallsInterpreterFunctionList.indexOf(t)&&(u.nativeCallsBackInterpreter=!0);var c=y(i);for(var p in c)u[p]=c[p];var h=n.makeNativeMemberFunction(u);l=u.nativeIsAsync?e.createAsyncFunction(h):e.createNativeFunction(h),r(e,t,s-1,l)}else l=t instanceof Object?e.isa(t,e.FUNCTION)?t:r(e,t,s-1):e.createPrimitive(t);return l},n.createNativeFunctionFromInterpreterFunction=null,n.marshalInterpreterToNative=function(e,t){if(t.isPrimitive||t.isCustomMarshal)return t.data;if(e.isa(t,e.ARRAY)){var i=[];i.length=t.length;for(var r=0;r<i.length;r++)i[r]=n.marshalInterpreterToNative(e,t.properties[r]);return i}if(e.isa(t,e.OBJECT)||"object"===t.type){var o={};for(var s in t.properties)o[s]=n.marshalInterpreterToNative(e,t.properties[s]);return o}if(e.isa(t,e.FUNCTION))return n.createNativeFunctionFromInterpreterFunction?n.createNativeFunctionFromInterpreterFunction(t):t;throw"Can't marshal type "+typeof t};var _=function(e,t){return function(i){t(n.marshalNativeToInterpreter(e.interpreter,i,null,e.maxDepth))}};n.createNativeInterpreterCallback=function(e,t){return function(){var i,r=Array.prototype.slice.call(arguments);if(e.dontMarshal)i=r;else{i=[];for(var o=0;o<r.length;o++)i[o]=n.marshalNativeToInterpreter(e.interpreter,r[o],null,e.maxDepth)}var s=e.callbackState||{};s.node={type:"CallExpression",arguments:i},s.doneCallee_=!0,s.func_=t,s.arguments=i,s.n_=i.length,e.interpreter.stateStack.unshift(s)}},n.makeNativeMemberFunction=function(e){return e.dontMarshal?function(){var t=e.nativeFunc.apply(e.nativeParentObj,arguments);return n.marshalNativeToInterpreter(e.interpreter,t,null,e.maxDepth)}:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=e.nativeIsAsync&&i===arguments.length-1?_(e,arguments[i]):e.nativeCallsBackInterpreter&&"object"==typeof arguments[i]&&e.interpreter.isa(arguments[i],e.interpreter.FUNCTION)?n.createNativeInterpreterCallback(e,arguments[i]):n.marshalInterpreterToNative(e.interpreter,arguments[i]);var r=e.nativeFunc.apply(e.nativeParentObj,t);return n.marshalNativeToInterpreter(e.interpreter,r,null,e.maxDepth)}},n.initJSInterpreter=function(e,t,n,i,r){for(var o in r){var u=e.createObject(e.OBJECT);e.setProperty(i,o.toString(),u),s(e,u,r[o],null,{maxDepth:2})}a(e,h.dropletGlobalConfigBlocks,n,i),t&&a(e,t,n,i),l(e)},n.isNextStepSafeWhileUnwinding=function(e){var t=e.stateStack[0],n=t.node.type;if(t.done)return!0;if("SwitchStatement"===n)return"undefined"!=typeof t.switchValue;if("VariableDeclaration"===n)return t.n>0;switch(n){case"VariableDeclarator":case"BlockStatement":case"BreakStatement":case"ThisExpression":case"ArrayExpression":case"ObjectExpression":case"ArrowExpression":case"SequenceExpression":case"UnaryExpression":case"BinaryExpression":case"UpdateExpression":case"LogicalExpression":case"ConditionalExpression":case"NewExpression":case"CallExpression":case"MemberExpression":case"FunctionExpression":case"AssignmentExpression":case"Identifier":case"Literal":case"Program":return!0}return!1},n.calculateCumulativeLength=function(e){var t=/\n/g,n=[];do n.push(t.lastIndex),t.exec(e);while(0!==t.lastIndex);return n.push(e.length+1),n},n.aceFindRow=function(e,t,i,r){if(t>i)return null;if(t+1===i)return t;var o=Math.floor((t+i)/2);return r<e[o]?n.aceFindRow(e,t,o,r):r>e[o]?n.aceFindRow(e,o,i,r):o},n.isAceBreakpointRow=function(e,t){if(!e)return!1;var n=e.getBreakpoints();return Boolean(n[t])};var w={};n.selectEditorRowColError=function(e,t,n){if(e){if(e.currentlyUsingBlocks){var i={color:"#FFFF22"};e.clearLineMarks(),e.markLine(t,i)}else{var r=e.aceEditor.getSelection(),o=r.getRange();o.start.row=t,o.start.column=n,o.end.row=t,o.end.column=n+1,r.setSelectionRange(o,!0)}w.ace_error=e.aceEditor.getSession().highlightLines(t,t,"ace_error").id}},n.clearDropletAceHighlighting=function(e,t){e.currentlyUsingBlocks?e.clearLineMarks():e.aceEditor.getSelection().clearSelection(),t?u(e.aceEditor):c(e.aceEditor)},n.selectCurrentCode=function(e,t,i,r,o,s){var a=-1;if(e&&e.stateStack[0]){var l=e.stateStack[0].node;if("ForStatement"===l.type){var u,c=e.stateStack[0].mode||0;switch(c){case n.ForStatementMode.INIT:u=l.init;break;case n.ForStatementMode.TEST:u=l.test;break;case n.ForStatementMode.BODY:u=l.body;break;case n.ForStatementMode.UPDATE:u=l.update}l=u||l}var h=l.start-i,d=l.end-i;if(h>=0&&r>h&&r>=d)if(a=n.aceFindRow(t,0,t.length,h),o.currentlyUsingBlocks){var f={color:"#FFFF22"};o.clearLineMarks(),o.mark({row:a,col:h-t[a]},f)}else p(o.aceEditor,t,h,d,s);else n.clearDropletAceHighlighting(o)}else n.clearDropletAceHighlighting(o);return a}},{"./dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/dropletUtils.js":[function(e,t,n){"use strict";function i(e,t,n,i){if(!e||!t||!t.blocks)return[];i=i||{};var r=[];n&&(r=r.concat(n.blocks)),r=r.concat(t.blocks);var o={};return r.forEach(function(t){if(t.func in e&&!i.ignoreDocFunc){var n=t.docFunc;!n||n in e||(o[n]=null)}}),r.filter(function(t){return!i.paletteOnly||t.func in e||t.func in o}).map(function(t){return $.extend({},t,e[t.func])})}function r(e){var t=e&&e.categories;return h.cloneDeep($.extend({},t,v.categories,t))}function o(e,t){var n=e+"(";if(t)for(var i=0;i<t.length;i++)0!==i&&(n+=", "),n+=t[i];return n+")"}function s(e){return function(t){return t&&"socket"!==t.type?e+" = __;":e}}function a(e,t,n,i){for(var r=0;r<i.length;r++){var o=i[r];if(!o.noAutocomplete){var s={name:"api",value:o.modeOptionName||o.func,score:100,meta:o.category};e.autocompleteFunctionsWithParens&&(s.completer={insertMatch:function(e,t){if(t.completer.completions.filterText)for(var n,i=t.selection.getAllRanges(),r=0;n=i[r];r++)n.start.column-=t.completer.completions.filterText.length,t.session.remove(n);if(t.execCommand("insertstring",e+"();"),this.params){var o=t.selection.getRange();o.start.column-=2,o.end.column-=2,t.selection.setSelectionRange(o)}}.bind(o,s.value)}),0===s.value.indexOf("*.")||0===s.value.indexOf("?.")?(s.docFunc=s.value,s.value=s.value.substring(2),n.push(s)):t.push(s)}}}function l(e,t){t&&t.forEach(function(t){e.push({name:"api",value:t,score:100,meta:"constants"})})}function u(e,t){var n=window.ace.require("ace/autocomplete/util"),i=e.getLine(t.row),r=n.retrievePrecedingIdentifier(i,t.column);if(r.length>0&&r.length<t.column){var o=t.column-r.length-1;return"."===i[o]}return!1}function c(e){for(var t=r(e),n={},i=0;i<e.blocks.length;i++){var o={};switch(e.blocks[i].type){case"value":o.value=!0;break;case"either":o.value=!0,o.command=!0;break;case"property":case"readonlyproperty":o.property=!0,o.value=!0}var s=t[e.blocks[i].category];s&&(o.color=s.rgb||s.color),o.dropdown=e.blocks[i].dropdown;var a=e.blocks[i].modeOptionName||e.blocks[i].func;o.title=a,n[a]=o}return n}var p=e("./utils"),h=p.getLodash(),d="#BB77C7",f="#68D995",m="#FFFFFF",g="#64B5F6",b="#FFB74D";n.randomNumber=function(e,t){return"undefined"==typeof t&&(t=e,e=0),Math.floor(Math.random()*(~~t-~~e+1))+~~e},n.getTime=function(){return(new Date).getTime()},n.promptNum=function(e){var t;do t=parseInt(window.prompt(e),10);while(isNaN(t));return t},n.dropletGlobalConfigBlocks=[{func:"getTime",parent:n,category:"Control",type:"value"},{func:"randomNumber",parent:n,category:"Math",type:"value"},{func:"prompt",parent:window,category:"Variables",type:"value"},{func:"promptNum",parent:n,category:"Variables",type:"value"}],n.dropletBuiltinConfigBlocks=[{func:"Math.round",category:"Math",type:"value",docFunc:"mathRound"},{func:"Math.abs",category:"Math",type:"value",docFunc:"mathAbs"},{func:"Math.max",category:"Math",type:"value",docFunc:"mathMax"},{func:"Math.min",category:"Math",type:"value",docFunc:"mathMin"},{func:"Math.random",category:"Math",type:"value",docFunc:"mathRandom"}];var v={};v.blocks=[{func:"forLoop_i_0_4",block:"for (var i = 0; i < 4; i++) {\n  __;\n}",category:"Control"},{func:"whileBlock",block:"while (__) {\n  __;\n}",category:"Control"},{func:"ifBlock",block:"if (__) {\n  __;\n}",category:"Control"},{func:"ifElseBlock",block:"if (__) {\n  __;\n} else {\n  __;\n}",category:"Control"},{func:"getTime",block:"getTime()",category:"Control",type:"value"},{func:"addOperator",block:"__ + __",category:"Math"},{func:"subtractOperator",block:"__ - __",category:"Math"},{func:"multiplyOperator",block:"__ * __",category:"Math"},{func:"divideOperator",block:"__ / __",category:"Math"},{func:"equalityOperator",block:"__ == __",category:"Math"},{func:"inequalityOperator",block:"__ != __",category:"Math"},{func:"greaterThanOperator",block:"__ > __",category:"Math"},{func:"greaterThanOrEqualOperator",block:"__ >= __",category:"Math"},{func:"lessThanOperator",block:"__ < __",category:"Math"},{func:"lessThanOrEqualOperator",block:"__ <= __",category:"Math"},{func:"andOperator",block:"__ && __",category:"Math"},{func:"orOperator",block:"__ || __",category:"Math"},{func:"notOperator",block:"!__",category:"Math"},{func:"randomNumber_min_max",block:"randomNumber(__, __)",category:"Math",docFunc:"randomNumber"},{func:"mathRound",block:"Math.round(__)",category:"Math"},{func:"mathAbs",block:"Math.abs(__)",category:"Math"},{func:"mathMax",block:"Math.max(__)",category:"Math"},{func:"mathMin",block:"Math.min(__)",category:"Math"},{func:"mathRandom",block:"Math.random()",category:"Math"},{func:"declareAssign_x",block:"var x = __;",category:"Variables"},{func:"declareNoAssign_x",block:"var x;",category:"Variables"},{func:"assign_x",block:"x = __;",category:"Variables"},{func:"declareAssign_x_array_1_4",block:"var x = [1, 2, 3, 4];",category:"Variables"},{func:"declareAssign_x_prompt",block:'var x = prompt("Enter a value");',category:"Variables"},{func:"declareAssign_x_promptNum",block:'var x = promptNum("Enter a value");',category:"Variables"},{func:"functionParams_none",block:"function myFunction() {\n  __;\n}",category:"Functions"},{func:"functionParams_n",block:"function myFunction(n) {\n  __;\n}",category:"Functions"},{func:"callMyFunction",block:"myFunction()",category:"Functions"},{func:"callMyFunction_n",block:"myFunction(n)",category:"Functions"},{func:"return",block:"return __;",category:"Functions"},{func:"comment",block:"// Comment",category:"Functions"}],v.categories={Control:{color:"blue",rgb:g,blocks:[]},Math:{color:"orange",rgb:b,blocks:[]},Variables:{color:"purple",rgb:d,blocks:[]},Functions:{color:"green",rgb:f,blocks:[]},"":{blocks:[]}},n.generateCodeAliases=function(e,t){for(var n="",i=e.blocks,r=0;r<i.length;r++){var o=i[r];n+="var "+o.func+" = function() { ",n+=o.idArgNone?"return "+t+"."+o.func+".apply("+t+", arguments); };\n":"var newArgs = "+(o.idArgLast?"arguments.concat(['']);":"[''].concat(arguments);")+" return "+t+"."+o.func+".apply("+t+", newArgs); };\n"}return n},n.generateDropletPalette=function(e,t){for(var n=r(t),a=i(e,t,v,{paletteOnly:!0,ignoreDocFunc:!0}),l=0;l<a.length;l++){var u=a[l],c=u.block,p=u.expansion;if(!c){var h=u.func;if(u.blockPrefix&&(h=u.blockPrefix+h),"property"===u.type||"readonlyproperty"===u.type)c=h;else{var d=u.paletteParams||u.params;c=o(h,d),u.paletteParams&&(p=o(h,u.params))}}p||"property"!==u.type||(p=s(c));var f={block:c,expansion:p,title:u.modeOptionName||u.func};n[u.category].blocks.push(f)}var m=[];for(var g in n)n[g].blocks.length>0&&(n[g].name=g,m.push(n[g]));return m},n.generateAceApiCompleter=function(e,t){var r=[],o=[],s={};if(s.autocompleteFunctionsWithParens=t.autocompleteFunctionsWithParens,e){var c=i(e,t,null,{paletteOnly:!0});a(s,r,o,c)}else a(s,r,o,n.dropletGlobalConfigBlocks),a(s,r,o,n.dropletBuiltinConfigBlocks),a(s,r,o,t.blocks),l(r,t.additionalPredefValues);return{getCompletions:function(e,t,n,i,s){return 0===i.length?void s(null,[]):void(u(t,n)?s(null,o):s(null,r))}}},n.generateDropletModeOptions=function(e){var t={functions:{},categories:{arithmetic:{color:b},logic:{color:b},conditionals:{color:g},loops:{color:g,beginner:e.level.beginnerMode||!1},functions:{color:f},returns:{color:f},comments:{color:m},containers:{color:d},value:{color:d},command:{color:f},assignments:{color:d}},lockZeroParamFunctions:e.level.lockZeroParamFunctions};return $.extend(t.functions,c({blocks:n.dropletGlobalConfigBlocks}),c({blocks:n.dropletBuiltinConfigBlocks}),c(e.dropletConfig)),t},n.getAllAvailableDropletBlocks=function(e,t,r){var o=e&&e.blocks,s=o?e.blocks:[];return t&&o&&(s=i(t,e,null,{paletteOnly:r})),n.dropletGlobalConfigBlocks.concat(n.dropletBuiltinConfigBlocks).concat(v.blocks).concat(s)},n.__TestInterface={mergeCategoriesWithConfig:r,filteredBlocksFromConfig:i}},{"./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/ObservableEvent.js":[function(e,t){"use strict";var n=t.exports=function(){this.observerList_=[]};n.prototype.register=function(e){var t={toCall:e};return Object.freeze(t),this.observerList_.push(t),t},n.prototype.unregister=function(e){for(var t=0;t<this.observerList_.length;t++)if(e===this.observerList_[t])return this.observerList_.splice(t,1),!0;return!1},n.prototype.notifyObservers=function(){var e=Array.prototype.slice.call(arguments,0);this.observerList_.forEach(function(t){t.toCall.apply(void 0,e)})}},{}],"/home/ubuntu/staging/apps/build/js/DebugArea.js":[function(e,t){"use strict";var n=e("./locale"),i=e("./dom"),r=e("./utils"),o=t.exports=function(e,t){if(!e||!t)throw new Error("debugAreaRoot and codeTextboxRoot are required");this.rootDiv_=$(e),this.codeTextbox_=$(t),this.isOpen_=!0,this.lastOpenHeight_=this.rootDiv_.height(),o.prototype.bindHandlersForDebugCommandsHeader.call(this)};o.prototype.bindHandlersForDebugCommandsHeader=function(){var e=this.rootDiv_.find("#show-hide-debug-icon");i.addClickTouchEvent(e[0],o.prototype.slideToggle.bind(this))},o.prototype.isOpen=function(){return this.isOpen_},o.prototype.isShut=function(){return!this.isOpen_},o.snapToggle=function(){this.isOpen_?this.snapShut():this.snapOpen()},o.prototype.snapOpen=function(){this.isOpen_=!0,this.setContentsVisible(!0),this.setIconPointingDown(!0),this.setHeight(this.lastOpenHeight_),this.rootDiv_.find("#clear-console-header").css("opacity",1).css("visibility","visible")},o.prototype.snapShut=function(){this.isOpen_=!1,this.lastOpenHeight_=this.rootDiv_.height(),this.setContentsVisible(!1),this.setIconPointingDown(!1),this.setHeight(this.getHeightWhenClosed()),this.rootDiv_.find("#clear-console-header").css("opacity",0).css("visibility","hidden")},o.prototype.slideToggle=function(){this.isOpen_?this.slideShut():this.slideOpen()},o.prototype.slideOpen=function(){this.isOpen_=!0,this.setContentsVisible(!0),this.rootDiv_.animate({height:this.lastOpenHeight_},{complete:function(){this.setIconPointingDown(!0)}.bind(this)}),this.codeTextbox_.animate({bottom:this.lastOpenHeight_},{step:r.fireResizeEvent});var e=this.rootDiv_.find("#clear-console-header");e.css("visibility","visible"),e.animate({opacity:1})},o.prototype.slideShut=function(){this.isOpen_=!1,this.lastOpenHeight_=this.rootDiv_.height();var e=this.getHeightWhenClosed();this.rootDiv_.animate({height:e},{complete:function(){this.setContentsVisible(!1),this.setIconPointingDown(!1)}.bind(this)}),this.codeTextbox_.animate({bottom:e},{step:r.fireResizeEvent,complete:r.fireResizeEvent});var t=this.rootDiv_.find("#clear-console-header");t.animate({opacity:0},{complete:function(){t.css("visibility","hidden")}})},o.prototype.setContentsVisible=function(e){this.rootDiv_.find("#debug-commands").toggle(e),this.rootDiv_.find("#debug-console").toggle(e),this.rootDiv_.find("#debug-watch").toggle(e)},o.prototype.setIconPointingDown=function(e){var t=this.rootDiv_.find("#debug-commands-header"),i=this.rootDiv_.find("#show-hide-debug-icon");i.toggleClass("fa-chevron-circle-up",!e),i.toggleClass("fa-chevron-circle-down",e);var r=t.find(".header-text");r.text(e?n.debugCommandsHeaderWhenOpen():n.debugCommandsHeaderWhenClosed())},o.prototype.setHeight=function(e){this.rootDiv_.height(e),this.codeTextbox_.css("bottom",e),r.fireResizeEvent()},o.prototype.getHeightWhenClosed=function(){return this.rootDiv_.find("#debug-area-header").height()+this.rootDiv_.find("#debugResizeBar").height()
}},{"./dom":"/home/ubuntu/staging/apps/build/js/dom.js","./locale":"/home/ubuntu/staging/apps/build/js/locale.js","./utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/utils.js":[function(e,t,n){"use strict";var i;"function"==typeof define&&"object"==typeof define.amd&&define.amd&&(i=define.amd,define.amd=!1);var r=e("./lodash"),o=e("./hammer");"function"==typeof define&&i&&(define.amd=i,i=null),n.getLodash=function(){return r},n.getHammer=function(){return o},n.shallowCopy=function(e){var t={};for(var n in e)t[n]=e[n];return t},n.cloneWithoutFunctions=function(e){return JSON.parse(JSON.stringify(e))},n.quote=function(e){return'"'+e+'"'},n.extend=function(e,t){var i=n.shallowCopy(e);for(var r in t)i[r]=t[r];return i},n.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},n.mod=function(e,t){return(e%t+t)%t},n.range=function(e,t){for(var n=[],i=e;t>=i;i++)n.push(i);return n},n.executeIfConditional=function(e,t){return function(){return e()?t.apply(this,arguments):void 0}},n.stripQuotes=function(e){return e.replace(/["']/g,"")},Function.prototype.inherits=function(e){this.prototype=Object.create(e.prototype),this.prototype.constructor=this,this.superPrototype=e.prototype},n.wrapNumberValidatorsForLevelBuilder=function(){var e=Blockly.FieldTextInput.nonnegativeIntegerValidator,t=Blockly.FieldTextInput.numberValidator;Blockly.FieldTextInput.nonnegativeIntegerValidator=function(t){return"???"===t?t:e(t)},Blockly.FieldTextInput.numberValidator=function(e){return"???"===e?e:t(e)}},n.randomKey=function(e){var t=Object.keys(e);return t[t.length*Math.random()<<0]},n.createUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},n.fireResizeEvent=function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},String.prototype.repeat||(String.prototype.repeat=function(e){if(null===this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if(e=+e,e!==e&&(e=0),0>e)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1===(1&e)&&(n+=t),e>>>=1,0!==e;)t+=t;return n}),n.valueOr=function(e,t){return void 0===e?t:e},n.isInfiniteRecursionError=function(e){return e instanceof RangeError&&/^Maximum call stack size exceeded/.test(e.message)?!0:"undefined"!=typeof InternalError&&e instanceof InternalError&&"too much recursion"===e.message?!0:e instanceof Error&&"Out of stack space"===e.message?!0:!1},n.getPegasusHost=function(){switch(window.location.hostname){case"studio.code.org":case"learn.code.org":return"code.org";default:var e=window.location.hostname.split(".")[0];switch(e){case"localhost":return"localhost.code.org:3000";case"development":case"staging":case"test":case"levelbuilder":return e+".code.org";case"staging-studio":return"staging.code.org";case"test-studio":return"test.code.org";case"levelbuilder-studio":return"levelbuilder.code.org";default:return null}}},n.browserSupportsCssMedia=function(){for(var e=document.styleSheets,t=0;t<e.length;t++){var n=e[t].cssRules||e[t].rules;try{n.length>0&&n[0].media}catch(i){return!1}}return!0},n.unescapeText=function(e){var t=e;return t=t.replace(/(?!^)<div>/gi,"\n"),t=t.replace(/<[^>]+>/gi,""),t=t.replace(/&nbsp;/gi," "),t=t.replace(/&gt;/gi,">"),t=t.replace(/&lt;/gi,"<"),t=t.replace(/&amp;/gi,"&")},n.escapeText=function(e){var t=e.toString();t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ {2}/g," &nbsp;");var n=t.split("\n"),i=n[0],r=n.slice(1);return 0===i.length&&n.length>1&&(i="<br>"),i+r.map(function(e){return"<div>"+(e.length?e:"<br>")+"</div>"}).join("")},n.degreesToRadians=function(e){return e*(Math.PI/180)},n.trySetLocalStorage=function(e,t){try{return localStorage.setItem(e,t),!0}catch(n){return!1}}},{"./hammer":"/home/ubuntu/staging/apps/build/js/hammer.js","./lodash":"/home/ubuntu/staging/apps/build/js/lodash.js"}],"/home/ubuntu/staging/apps/build/js/lodash.js":[function(e,t,n){(function(e){"use strict";(function(){function i(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}function r(e,t){var n=typeof t;if(e=e.cache,"boolean"==n||null==t)return e[t]?0:-1;"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:Tt+t;return e=(e=e[n])&&e[r],"object"==n?e&&i(e,t)>-1?0:-1:e?0:-1}function o(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:Tt+e,r=t[n]||(t[n]={});"object"==n?(r[i]||(r[i]=[])).push(e):r[i]=!0}}function s(e,t){for(var n=e.criteria,i=t.criteria,r=-1,o=n.length;++r<o;){var s=n[r],a=i[r];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return e.index-t.index}function a(e){var t=-1,n=e.length,i=e[0],r=e[n/2|0],s=e[n-1];if(i&&"object"==typeof i&&r&&"object"==typeof r&&s&&"object"==typeof s)return!1;var a=u();a["false"]=a["null"]=a["true"]=a.undefined=!1;var l=u();for(l.array=e,l.cache=a,l.push=o;++t<n;)l.push(e[t]);return l}function l(){return Et.pop()||[]}function u(){return xt.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function p(e){e.length=0,Et.length<Ct&&Et.push(e)}function h(e){var t=e.cache;t&&h(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,xt.length<Ct&&xt.push(e)}function d(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,o=Array(0>r?0:r);++i<r;)o[i]=e[t+i];return o}function f(e){return e&&"object"==typeof e&&!Tn(e)&&un.call(e,"__wrapped__")?e:new m(e)}function m(e,t){this.__chain__=!!t,this.__wrapped__=e}function g(e){function t(){if(i){var e=d(i);cn.apply(e,arguments)}if(this instanceof t){var o=v(n.prototype),s=n.apply(o,e||arguments);return V(s)?s:o}return n.apply(r,e||arguments)}var n=e[0],i=e[2],r=e[4];return kn(t,e),t}function b(e,t,n,i,r){if(n){var o=n(e);if("undefined"!=typeof o)return o}var s=V(e);if(!s)return e;var a=nn.call(e);if(!zt[a]||!En.nodeClass&&c(e))return e;var u=_n[a];switch(a){case Mt:case Nt:return new u(+e);case Dt:case Vt:return new u(e);case Ut:return o=u(e.source,Bt.exec(e)),o.lastIndex=e.lastIndex,o}var h=Tn(e);if(t){var f=!i;i||(i=l()),r||(r=l());for(var m=i.length;m--;)if(i[m]==e)return r[m];o=h?u(e.length):{}}else o=h?d(e):In({},e);return h&&(un.call(e,"index")&&(o.index=e.index),un.call(e,"input")&&(o.input=e.input)),t?(i.push(e),r.push(o),(h?jn:Mn)(e,function(e,s){o[s]=b(e,t,n,i,r)}),f&&(p(i),p(r)),o):o}function v(e){return V(e)?fn(e):{}}function y(e,t,n){if("function"!=typeof e)return dt;if("undefined"==typeof t||!("prototype"in e))return e;var i=e.__bindData__;if("undefined"==typeof i&&(En.funcNames&&(i=!e.name),i=i||!En.funcDecomp,!i)){var r=an.call(e);En.funcNames||(i=!Rt.test(r)),i||(i=Pt.test(r),kn(e,i))}if(i===!1||i!==!0&&1&i[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return lt(e,t)}function _(e){function t(){var e=l?s:this;if(r){var f=d(r);cn.apply(f,arguments)}if((o||c)&&(f||(f=d(arguments)),o&&cn.apply(f,o),c&&f.length<a))return i|=16,_([n,p?i:-4&i,f,null,s,a]);if(f||(f=arguments),u&&(n=e[h]),this instanceof t){e=v(n.prototype);var m=n.apply(e,f);return V(m)?m:e}return n.apply(e,f)}var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=1&i,u=2&i,c=4&i,p=8&i,h=n;return kn(t,e),t}function w(e,t){var n=-1,o=P(),s=e?e.length:0,l=s>=St&&o===i,u=[];if(l){var c=a(t);c?(o=r,t=c):l=!1}for(;++n<s;){var p=e[n];o(t,p)<0&&u.push(p)}return l&&h(t),u}function E(e,t,n,i){for(var r=(i||0)-1,o=e?e.length:0,s=[];++r<o;){var a=e[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Tn(a)||A(a))){t||(a=E(a,t,n));var l=-1,u=a.length,c=s.length;for(s.length+=u;++l<u;)s[c++]=a[l]}else n||s.push(a)}return s}function x(e,t,n,i,r,o){var s=!0;e:for(;s;){var a=e,u=t,h=n,d=i,f=r,m=o;if(s=!1,h){var g=h(a,u);if("undefined"!=typeof g)return!!g}if(a===u)return 0!==a||1/a==1/u;var b=typeof a,v=typeof u;if(!(a!==a||a&&Gt[b]||u&&Gt[v]))return!1;if(null==a||null==u)return a===u;var y=nn.call(a),_=nn.call(u);if(y==It&&(y=Ft),_==It&&(_=Ft),y!=_)return!1;switch(y){case Mt:case Nt:return+a==+u;case Dt:return a!=+a?u!=+u:0==a?1/a==1/u:a==+u;case Ut:case Vt:return a==String(u)}var w=y==At;if(!w){var E=un.call(a,"__wrapped__"),k=un.call(u,"__wrapped__");if(E||k){e=E?a.__wrapped__:a,t=k?u.__wrapped__:u,n=h,i=d,r=f,o=m,s=!0,g=b=v=y=_=w=E=k=wt;continue e}if(y!=Ft||!En.nodeClass&&(c(a)||c(u)))return!1;var T=!En.argsObject&&A(a)?Object:a.constructor,S=!En.argsObject&&A(u)?Object:u.constructor;if(T!=S&&!(U(T)&&T instanceof T&&U(S)&&S instanceof S)&&"constructor"in a&&"constructor"in u)return!1}var C=!f;f||(f=l()),m||(m=l());for(var B=f.length;B--;)if(f[B]==a)return m[B]==u;var R=0;if(g=!0,f.push(a),m.push(u),w){if(B=a.length,R=u.length,g=R==B,g||d)for(;R--;){var P=B,j=u[R];if(d)for(;P--&&!(g=x(a[P],j,h,d,f,m)););else if(!(g=x(a[R],j,h,d,f,m)))break}}else An(u,function(e,t,n){return un.call(n,t)?(R++,g=un.call(a,t)&&x(a[t],e,h,d,f,m)):void 0}),g&&!d&&An(a,function(e,t,n){return un.call(n,t)?g=--R>-1:void 0});return f.pop(),m.pop(),C&&(p(f),p(m)),g}}function T(e,t,n,i,r){(Tn(t)?Y:Mn)(t,function(t,o){var s,a,l=t,u=e[o];if(t&&((a=Tn(t))||Nn(t))){for(var c=i.length;c--;)if(s=i[c]==t){u=r[c];break}if(!s){var p;n&&(l=n(u,t),(p="undefined"!=typeof l)&&(u=l)),p||(u=a?Tn(u)?u:[]:Nn(u)?u:{}),i.push(t),r.push(u),p||T(u,t,n,i,r)}}else n&&(l=n(u,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(u=l);e[o]=u})}function S(e,t){return e+sn(yn()*(t-e+1))}function C(e,t,n){var o=-1,s=P(),u=e?e.length:0,c=[],d=!t&&u>=St&&s===i,f=n||d?l():c;if(d){var m=a(f);s=r,f=m}for(;++o<u;){var g=e[o],b=n?n(g,o,e):g;(t?!o||f[f.length-1]!==b:s(f,b)<0)&&((n||d)&&f.push(b),c.push(g))}return d?(p(f.array),h(f)):n&&p(f),c}function B(e,t,n,i,r,o){for(var s=arguments,a=!0;a;){var l=e,u=t,c=n,p=i,h=r,f=o;a=!1;var m=1&u,b=2&u,v=4&u,y=8&u,w=16&u,E=32&u;if(!b&&!U(l))throw new TypeError;w&&!c.length&&(u&=-17,w=c=!1),E&&!p.length&&(u&=-33,E=p=!1);var x=l&&l.__bindData__;if(!x||x===!0){var k=1==u||17===u?g:_;return k([l,u,c,p,h,f])}x=d(x),x[2]&&(x[2]=d(x[2])),x[3]&&(x[3]=d(x[3])),!m||1&x[1]||(x[4]=h),!m&&1&x[1]&&(u|=8),!v||4&x[1]||(x[5]=f),w&&cn.apply(x[2]||(x[2]=[]),c),E&&hn.apply(x[3]||(x[3]=[]),p),x[1]|=u,s=x,e=s[0],t=s[1],n=s[2],i=s[3],r=s[4],o=s[5],a=!0,m=b=v=y=w=E=x=wt}}function R(){Wt.shadowedProps=jt,Wt.array=Wt.bottom=Wt.loop=Wt.top="",Wt.init="iterable",Wt.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)Wt[n]=e[n];var i=Wt.args;Wt.firstArg=/^[^,]+/.exec(i)[0];var r=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+xn(Wt)+"\n}");return r(y,Ot,Zt,un,kt,A,Tn,z,Wt.keys,en,Gt,wn,Vt,tn,nn)}function P(){var e=(e=f.indexOf)===nt?i:e;return e}function j(e){return"function"==typeof e&&rn.test(e)}function I(e){var t,n;return!e||nn.call(e)!=Ft||(t=e.constructor,U(t)&&!(t instanceof t))||!En.argsClass&&A(e)||!En.nodeClass&&c(e)?!1:En.ownLast?(An(e,function(e,t,i){return n=un.call(i,t),!1}),n!==!1):(An(e,function(e,t){n=t}),"undefined"==typeof n||un.call(e,n))}function A(e){return e&&"object"==typeof e&&"number"==typeof e.length&&nn.call(e)==It||!1}function M(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),b(e,t,"function"==typeof n&&y(n,i,1))}function N(e,t,n){return b(e,!0,"function"==typeof t&&y(t,n,1))}function O(e,t){var n=v(e);return t?In(n,t):n}function L(e){var t=[];return An(e,function(e,n){U(e)&&t.push(n)}),t.sort()}function D(e){var t=!0;if(!e)return t;var n=nn.call(e),i=e.length;return n==At||n==Vt||(En.argsClass?n==It:A(e))||n==Ft&&"number"==typeof i&&U(e.splice)?!i:(Mn(e,function(){return t=!1}),t)}function F(e,t,n,i){return x(e,t,"function"==typeof n&&y(n,i,2))}function U(e){return"function"==typeof e}function V(e){return!(!e||!Gt[typeof e])}function z(e){return"string"==typeof e||e&&"object"==typeof e&&nn.call(e)==Vt||!1}function H(e){var t=arguments,n=2;if(!V(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var i=y(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(i=t[--n]);for(var r=d(arguments,1,n),o=-1,s=l(),a=l();++o<n;)T(e,r[o],i,s,a);return p(s),p(a),e}function q(e){for(var t=-1,n=Cn(e),i=n.length,r=Array(i);++t<i;)r[t]=e[n[t]];return r}function W(e,t,n){var i=-1,r=P(),o=e?e.length:0,s=!1;return n=(0>n?bn(0,o+n):n)||0,Tn(e)?s=r(e,t,n)>-1:"number"==typeof o?s=(z(e)?e.indexOf(t,n):r(e,t,n))>-1:jn(e,function(e){return++i>=n?!(s=e===t):void 0}),s}function G(e,t,n){var i=[];if(t=f.createCallback(t,n,3),Tn(e))for(var r=-1,o=e.length;++r<o;){var s=e[r];t(s,r,e)&&i.push(s)}else jn(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function $(e,t,n){if(t=f.createCallback(t,n,3),!Tn(e)){var i;return jn(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}for(var r=-1,o=e.length;++r<o;){var s=e[r];if(t(s,r,e))return s}}function Y(e,t,n){if(t&&"undefined"==typeof n&&Tn(e))for(var i=-1,r=e.length;++i<r&&t(e[i],i,e)!==!1;);else jn(e,t,n);return e}function X(e,t,n){var i=-1,r=e?e.length:0,o=Array("number"==typeof r?r:0);if(t=f.createCallback(t,n,3),Tn(e))for(;++i<r;)o[i]=t(e[i],i,e);else jn(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function K(e,t,n){return t=f.createCallback(t,n,3),G(e,function(e,n,i){return!t(e,n,i)})}function J(e,t,n){if(e&&"number"!=typeof e.length?e=q(e):En.unindexedChars&&z(e)&&(e=e.split("")),null==t||n)return e?e[S(0,e.length-1)]:wt;var i=Q(e);return i.length=vn(bn(0,t),i.length),i}function Q(e){var t=-1,n=e?e.length:0,i=Array("number"==typeof n?n:0);return Y(e,function(e){var n=S(0,++t);i[t]=i[n],i[n]=e}),i}function Z(e){var t=e?e.length:0;return"number"==typeof t?t:Cn(e).length}function et(e,t,n){var i=-1,r=Tn(t),o=e?e.length:0,a=Array("number"==typeof o?o:0);for(r||(t=f.createCallback(t,n,3)),Y(e,function(e,n,o){var s=a[++i]=u();r?s.criteria=X(t,function(t){return e[t]}):(s.criteria=l())[0]=t(e,n,o),s.index=i,s.value=e}),o=a.length,a.sort(s);o--;){var c=a[o];a[o]=c.value,r||p(c.criteria),h(c)}return a}function tt(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(e=X(e,n,i)),E(e,t)}function nt(e,t,n){if("number"==typeof n){var r=e?e.length:0;n=0>n?bn(0,r+n):n||0}else if(n){var o=ot(e,t);return e[o]===t?o:-1}return i(e,t,n)}function it(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=f.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:wt;return d(e,bn(0,r-i))}function rt(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var i=-1,r=bn(0,on((t-e)/(n||1))),o=Array(r);++i<r;)o[i]=e,e+=n;return o}function ot(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?f.createCallback(n,i,1):dt,t=n(t);o>r;){var s=r+o>>>1;n(e[s])<t?r=s+1:o=s}return r}function st(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(n=f.createCallback(n,i,3)),C(e,t,n)}function at(e){return w(e,d(arguments,1))}function lt(e,t){return arguments.length>2?B(e,17,d(arguments,2),null,t):B(e,1,null,null,t)}function ut(e,t,n){var i,r,o,s,a,l,u,c=0,p=!1,h=!0;if(!U(e))throw new TypeError;if(t=bn(0,t)||0,n===!0){var d=!0;h=!1}else V(n)&&(d=n.leading,p="maxWait"in n&&(bn(t,n.maxWait)||0),h="trailing"in n?n.trailing:h);var f=function g(){var n=t-(On()-s);if(0>=n){r&&clearTimeout(r);var p=u;r=l=u=wt,p&&(c=On(),o=e.apply(a,i),l||r||(i=a=null))}else l=setTimeout(g,n)},m=function(){l&&clearTimeout(l),r=l=u=wt,(h||p!==t)&&(c=On(),o=e.apply(a,i),l||r||(i=a=null))};return function(){if(i=arguments,s=On(),a=this,u=h&&(l||!d),p===!1)var n=d&&!l;else{r||d||(c=s);var g=p-(s-c),b=0>=g;b?(r&&(r=clearTimeout(r)),c=s,o=e.apply(a,i)):r||(r=setTimeout(m,g))}return b&&l?l=clearTimeout(l):l||t===p||(l=setTimeout(f,t)),n&&(b=!0,o=e.apply(a,i)),!b||l||r||(i=a=null),o}}function ct(e,t,n){var i=!0,r=!0;if(!U(e))throw new TypeError;return n===!1?i=!1:V(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),Ht.leading=i,Ht.maxWait=t,Ht.trailing=r,ut(e,t,Ht)}function pt(e,t){return B(t,16,[e])}function ht(e,t,n){var i=typeof e;if(null==e||"function"==i)return y(e,t,n);if("object"!=i)return gt(e);var r=Cn(e),o=r[0],s=e[o];return 1!=r.length||s!==s||V(s)?function(t){for(var n=r.length,i=!1;n--&&(i=x(t[r[n]],e[r[n]],null,!0)););return i}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function dt(e){return e}function ft(e,t,n){var i=!0,r=t&&L(t);t&&(n||r.length)||(null==n&&(n=t),o=m,t=e,e=f,r=L(t)),n===!1?i=!1:V(n)&&"chain"in n&&(i=n.chain);var o=e,s=U(o);Y(r,function(n){var r=e[n]=t[n];s&&(o.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,s=[n];cn.apply(s,arguments);var a=r.apply(e,s);if(i||t){if(n===a&&V(a))return this;a=new o(a),a.__chain__=t}return a})})}function mt(){}function gt(e){return function(t){return t[e]}}function bt(e){return e=new m(e),e.__chain__=!0,e}function vt(){return this.__chain__=!0,this}function yt(){return String(this.__wrapped__)}function _t(){return this.__wrapped__}var wt,Et=[],xt=[],kt={},Tt=+new Date+"",St=75,Ct=40,Bt=/\w*$/,Rt=/^\s*function[ \n\r\t]+\w/,Pt=/\bthis\b/,jt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It="[object Arguments]",At="[object Array]",Mt="[object Boolean]",Nt="[object Date]",Ot="[object Error]",Lt="[object Function]",Dt="[object Number]",Ft="[object Object]",Ut="[object RegExp]",Vt="[object String]",zt={};zt[Lt]=!1,zt[It]=zt[At]=zt[Mt]=zt[Nt]=zt[Dt]=zt[Ft]=zt[Ut]=zt[Vt]=!0;var Ht={leading:!1,maxWait:0,trailing:!1},qt={configurable:!1,enumerable:!1,value:null,writable:!1},Wt={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Gt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},$t=Gt[typeof window]&&window||this,Yt=Gt[typeof n]&&n&&!n.nodeType&&n,Xt=Gt[typeof t]&&t&&!t.nodeType&&t,Kt=Xt&&Xt.exports===Yt&&Yt,Jt=Gt[typeof e]&&e;!Jt||Jt.global!==Jt&&Jt.window!==Jt||($t=Jt);var Qt=[],Zt=Error.prototype,en=Object.prototype,tn=String.prototype,nn=en.toString,rn=RegExp("^"+String(nn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),on=Math.ceil,sn=Math.floor,an=Function.prototype.toString,ln=j(ln=Object.getPrototypeOf)&&ln,un=en.hasOwnProperty,cn=Qt.push,pn=en.propertyIsEnumerable,hn=Qt.unshift,dn=function(){try{var e={},t=j(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(i){}return n}(),fn=j(fn=Object.create)&&fn,mn=j(mn=Array.isArray)&&mn,gn=j(gn=Object.keys)&&gn,bn=Math.max,vn=Math.min,yn=Math.random,_n={};_n[At]=Array,_n[Mt]=Boolean,_n[Nt]=Date,_n[Lt]=Function,_n[Ft]=Object,_n[Dt]=Number,_n[Ut]=RegExp,_n[Vt]=String;var wn={};wn[At]=wn[Nt]=wn[Dt]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},wn[Mt]=wn[Vt]={constructor:!0,toString:!0,valueOf:!0},wn[Ot]=wn[Lt]=wn[Ut]={constructor:!0,toString:!0},wn[Ft]={constructor:!0},function(){for(var e=jt.length;e--;){var t=jt[e];for(var n in wn)un.call(wn,n)&&!un.call(wn[n],t)&&(wn[n][t]=!1)}}(),m.prototype=f.prototype;var En=f.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var i in new e)n.push(i);for(i in arguments);En.argsClass=nn.call(arguments)==It,En.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),En.enumErrorProps=pn.call(Zt,"message")||pn.call(Zt,"name"),En.enumPrototypes=pn.call(e,"prototype"),En.funcDecomp=!j($t.WinRTError)&&Pt.test(function(){return this}),En.funcNames="string"==typeof Function.name,En.nonEnumArgs=0!=i,En.nonEnumShadows=!/valueOf/.test(n),En.ownLast="x"!=n[0],En.spliceObjects=(Qt.splice.call(t,0,1),!t[0]),En.unindexedChars="x"[0]+Object("x")[0]!="xx";try{En.nodeClass=!(nn.call(document)==Ft&&!({toString:0}+""))}catch(r){En.nodeClass=!0}}(1);var xn=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",En.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):En.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),En.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),En.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(En.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),En.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",En.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||En.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};fn||(v=function(){function e(){}return function(t){if(V(t)){e.prototype=t;var n=new e;e.prototype=null}return n||$t.Object()}}());var kn=dn?function(e,t){qt.value=t,dn(e,"__bindData__",qt)}:mt;En.argsClass||(A=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&un.call(e,"callee")&&!pn.call(e,"callee")||!1});var Tn=mn||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&nn.call(e)==At||!1},Sn=R({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),Cn=gn?function(e){return V(e)?En.enumPrototypes&&"function"==typeof e||En.nonEnumArgs&&e.length&&A(e)?Sn(e):gn(e):[]}:Sn,Bn={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:Cn,loop:"if (callback(iterable[index], index, collection) === false) return result"},Rn={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:Cn,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Pn={top:"if (!objectTypes[typeof iterable]) return result;\n"+Bn.top,array:!1},jn=R(Bn),In=R(Rn,{top:Rn.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),An=R(Bn,Pn,{useHas:!1}),Mn=R(Bn,Pn);U(/x/)&&(U=function(e){return"function"==typeof e&&nn.call(e)==Lt});var Nn=ln?function(e){if(!e||nn.call(e)!=Ft||!En.argsClass&&A(e))return!1;var t=e.valueOf,n=j(t)&&(n=ln(t))&&ln(n);return n?e==n||ln(e)==n:I(e)}:I,On=j(On=Date.now)&&On||function(){return(new Date).getTime()};f.assign=In,f.bind=lt,f.chain=bt,f.create=O,f.createCallback=ht,f.debounce=ut,f.filter=G,f.flatten=tt,f.forEach=Y,f.forIn=An,f.forOwn=Mn,f.functions=L,f.keys=Cn,f.map=X,f.merge=H,f.property=gt,f.range=rt,f.reject=K,f.shuffle=Q,f.sortBy=et,f.throttle=ct,f.uniq=st,f.values=q,f.without=at,f.wrap=pt,f.collect=X,f.each=Y,f.extend=In,f.methods=L,f.select=G,f.unique=st,ft(f),f.clone=M,f.cloneDeep=N,f.contains=W,f.find=$,f.identity=dt,f.indexOf=nt,f.isArguments=A,f.isArray=Tn,f.isEmpty=D,f.isEqual=F,f.isFunction=U,f.isObject=V,f.isPlainObject=Nn,f.isString=z,f.mixin=ft,f.noop=mt,f.now=On,f.size=Z,f.sortedIndex=ot,f.detect=$,f.findWhere=$,f.include=W,ft(function(){var e={};return Mn(f,function(t,n){f.prototype[n]||(e[n]=t)}),e}(),!1),f.last=it,f.sample=J,Mn(f,function(e,t){var n="sample"!==t;f.prototype[t]||(f.prototype[t]=function(t,i){var r=this.__chain__,o=e(this.__wrapped__,t,i);return r||null!=t&&(!i||n&&"function"==typeof t)?new m(o,r):o})}),f.VERSION="2.4.1",f.prototype.chain=vt,f.prototype.toString=yt,f.prototype.value=_t,f.prototype.valueOf=_t,jn(["join","pop","shift"],function(e){var t=Qt[e];f.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new m(n,e):n}}),jn(["push","reverse","sort","unshift"],function(e){var t=Qt[e];f.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),jn(["concat","slice","splice"],function(e){var t=Qt[e];f.prototype[e]=function(){return new m(t.apply(this.__wrapped__,arguments),this.__chain__)}}),En.spliceObjects||jn(["pop","shift","splice"],function(e){var t=Qt[e],n="splice"==e;f.prototype[e]=function(){var e=this.__chain__,i=this.__wrapped__,r=t.apply(i,arguments);return 0===i.length&&delete i[0],e||n?new m(r,e):r}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?($t._=f,define(function(){return f})):Yt&&Xt?Kt?(Xt.exports=f)._=f:Yt._=f:$t._=f}).call(void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/ubuntu/staging/apps/build/js/hammer.js":[function(e,t){"use strict";!function(e,n){function i(){r.READY||(y.determineEventTypes(),v.each(r.gestures,function(e){w.register(e)}),y.onTouch(r.DOCUMENT,f,w.detect),y.onTouch(r.DOCUMENT,m,w.detect),r.READY=!0)}var r=function E(e,t){return new E.Instance(e,t||{})};r.VERSION="1.1.3",r.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.DOCUMENT=document,r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in e,r.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&r.IS_MOBILE||r.HAS_POINTEREVENTS,r.CALCULATE_INTERVAL=25;var o={},s=r.DIRECTION_DOWN="down",a=r.DIRECTION_LEFT="left",l=r.DIRECTION_UP="up",u=r.DIRECTION_RIGHT="right",c=r.POINTER_MOUSE="mouse",p=r.POINTER_TOUCH="touch",h=r.POINTER_PEN="pen",d=r.EVENT_START="start",f=r.EVENT_MOVE="move",m=r.EVENT_END="end",g=r.EVENT_RELEASE="release",b=r.EVENT_TOUCH="touch";r.READY=!1,r.plugins=r.plugins||{},r.gestures=r.gestures||{};var v=r.utils={extend:function(e,t,i){for(var r in t)!t.hasOwnProperty(r)||e[r]!==n&&i||(e[r]=t[r]);return e},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},each:function(e,t,i){var r,o;if("forEach"in e)e.forEach(t,i);else if(e.length!==n){for(r=0,o=e.length;o>r;r++)if(t.call(i,e[r],r,e)===!1)return}else for(r in e)if(e.hasOwnProperty(r)&&t.call(i,e[r],r,e)===!1)return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t){if(e.indexOf){var n=e.indexOf(t);return-1===n?!1:n}for(var i=0,r=e.length;r>i;i++)if(e[i]===t)return i;return!1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[],i=[],r=[],o=Math.min,s=Math.max;return 1===e.length?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(v.each(e,function(e){t.push(e.pageX),n.push(e.pageY),i.push(e.clientX),r.push(e.clientY)}),{pageX:(o.apply(Math,t)+s.apply(Math,t))/2,pageY:(o.apply(Math,n)+s.apply(Math,n))/2,clientX:(o.apply(Math,i)+s.apply(Math,i))/2,clientY:(o.apply(Math,r)+s.apply(Math,r))/2})},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return n>=i?e.clientX-t.clientX>0?a:u:e.clientY-t.clientY>0?l:s},getDistance:function(e,t){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==l||e==s},setPrefixedCss:function(e,t,n,i){var r=["","Webkit","Moz","O","ms"];t=v.toCamelCase(t);for(var o=0;o<r.length;o++){var s=t;if(r[o]&&(s=r[o]+s.slice(0,1).toUpperCase()+s.slice(1)),s in e.style){e.style[s]=(null==i||i)&&n||"";break}}},toggleBehavior:function(e,t,n){if(t&&e&&e.style){v.each(t,function(t,i){v.setPrefixedCss(e,i,t,n)});var i=n&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=i),"none"==t.userDrag&&(e.ondragstart=i)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}},y=r.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,n,i){var r=t.split(" ");v.each(r,function(t){v.on(e,t,n),i&&i(t)})},off:function(e,t,n,i){var r=t.split(" ");v.each(r,function(t){v.off(e,t,n),i&&i(t)})},onTouch:function(e,t,n){var i=this,s=function(o){var s,a=o.type.toLowerCase(),l=r.HAS_POINTEREVENTS,u=v.inStr(a,"mouse");u&&i.preventMouseEvents||(u&&t==d&&0===o.button?(i.preventMouseEvents=!1,i.shouldDetect=!0):l&&t==d?i.shouldDetect=1===o.buttons||_.matchType(p,o):u||t!=d||(i.preventMouseEvents=!0,i.shouldDetect=!0),l&&t!=m&&_.updatePointer(t,o),i.shouldDetect&&(s=i.doDetect.call(i,o,t,e,n)),s==m&&(i.preventMouseEvents=!1,i.shouldDetect=!1,_.reset()),l&&t==m&&_.updatePointer(t,o))};return this.on(e,o[t],s),s},doDetect:function(e,t,n,i){var r=this.getTouchList(e,t),o=r.length,s=t,a=r.trigger,l=o;t==d?a=b:t==m&&(a=g,l=r.length-(e.changedTouches?e.changedTouches.length:1)),l>0&&this.started&&(s=f),this.started=!0;var u=this.collectEventData(n,s,r,e);return t!=m&&i.call(w,u),a&&(u.changedLength=l,u.eventType=a,i.call(w,u),u.eventType=s,delete u.changedLength),s==m&&(i.call(w,u),this.started=!1),s},determineEventTypes:function(){var t;return t=r.HAS_POINTEREVENTS?e.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],o[d]=t[0],o[f]=t[1],o[m]=t[2],o},getTouchList:function(e,t){if(r.HAS_POINTEREVENTS)return _.getTouchList();if(e.touches){if(t==f)return e.touches;var n=[],i=[].concat(v.toArray(e.touches),v.toArray(e.changedTouches)),o=[];return v.each(i,function(e){v.inArray(n,e.identifier)===!1&&o.push(e),n.push(e.identifier)}),o}return e.identifier=1,[e]},collectEventData:function(e,t,n,i){var r=p;return v.inStr(i.type,"mouse")||_.matchType(c,i)?r=c:_.matchType(h,i)&&(r=h),{center:v.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:t,pointerType:r,srcEvent:i,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return w.stopDetect()}}}},_=r.PointerEvent={pointers:{},getTouchList:function(){var e=[];return v.each(this.pointers,function(t){e.push(t)}),e
},updatePointer:function(e,t){e==m?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,i={};return i[c]=n===(t.MSPOINTER_TYPE_MOUSE||c),i[p]=n===(t.MSPOINTER_TYPE_TOUCH||p),i[h]=n===(t.MSPOINTER_TYPE_PEN||h),i[e]},reset:function(){this.pointers={}}},w=r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:v.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst,n=t.options;return v.each(this.gestures,function(i){!this.stopped&&t.enabled&&n[i.name]&&i.handler.call(i,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==m&&this.stopDetect(),e}},stopDetect:function(){this.previous=v.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,n,i,o){var s=this.current,a=!1,l=s.lastCalcEvent,u=s.lastCalcData;l&&e.timeStamp-l.timeStamp>r.CALCULATE_INTERVAL&&(t=l.center,n=e.timeStamp-l.timeStamp,i=e.center.clientX-l.center.clientX,o=e.center.clientY-l.center.clientY,a=!0),(e.eventType==b||e.eventType==g)&&(s.futureCalcEvent=e),(!s.lastCalcEvent||a)&&(u.velocity=v.getVelocity(n,i,o),u.angle=v.getAngle(t,e.center),u.direction=v.getDirection(t,e.center),s.lastCalcEvent=s.futureCalcEvent||e,s.futureCalcEvent=e),e.velocityX=u.velocity.x,e.velocityY=u.velocity.y,e.interimAngle=u.angle,e.interimDirection=u.direction},extendEventData:function(e){var t=this.current,n=t.startEvent,i=t.lastEvent||n;(e.eventType==b||e.eventType==g)&&(n.touches=[],v.each(e.touches,function(e){n.touches.push({clientX:e.clientX,clientY:e.clientY})}));var r=e.timeStamp-n.timeStamp,o=e.center.clientX-n.center.clientX,s=e.center.clientY-n.center.clientY;return this.getCalculatedData(e,i.center,r,o,s),v.extend(e,{startEvent:n,deltaTime:r,deltaX:o,deltaY:s,distance:v.getDistance(n.center,e.center),angle:v.getAngle(n.center,e.center),direction:v.getDirection(n.center,e.center),scale:v.getScale(n.touches,e.touches),rotation:v.getRotation(n.touches,e.touches)}),e},register:function(e){var t=e.defaults||{};return t[e.name]===n&&(t[e.name]=!0),v.extend(r.defaults,t,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};r.Instance=function(e,t){var n=this;i(),this.element=e,this.enabled=!0,v.each(t,function(e,n){delete t[n],t[v.toCamelCase(n)]=e}),this.options=v.extend(v.extend({},r.defaults),t||{}),this.options.behavior&&v.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=y.onTouch(e,d,function(e){n.enabled&&e.eventType==d?w.startDetect(n,e):e.eventType==b&&w.detect(e)}),this.eventHandlers=[]},r.Instance.prototype={on:function(e,t){var n=this;return y.on(n.element,e,t,function(e){n.eventHandlers.push({gesture:e,handler:t})}),n},off:function(e,t){var n=this;return y.off(n.element,e,t,function(e){var i=v.inArray({gesture:e,handler:t});i!==!1&&n.eventHandlers.splice(i,1)}),n},trigger:function(e,t){t||(t={});var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return v.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(v.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)v.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],y.off(this.element,o[d],this.eventStartHandler),null}},function(e){function t(t,i){var r=w.current;if(!(i.options.dragMaxTouches>0&&t.touches.length>i.options.dragMaxTouches))switch(t.eventType){case d:n=!1;break;case f:if(t.distance<i.options.dragMinDistance&&r.name!=e)return;var o=r.startEvent.center;if(r.name!=e&&(r.name=e,i.options.dragDistanceCorrection&&t.distance>0)){var c=Math.abs(i.options.dragMinDistance/t.distance);o.pageX+=t.deltaX*c,o.pageY+=t.deltaY*c,o.clientX+=t.deltaX*c,o.clientY+=t.deltaY*c,t=w.extendEventData(t)}(r.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=t.distance)&&(t.dragLockToAxis=!0);var p=r.lastEvent.direction;t.dragLockToAxis&&p!==t.direction&&(t.direction=v.isVertical(p)?t.deltaY<0?l:s:t.deltaX<0?a:u),n||(i.trigger(e+"start",t),n=!0),i.trigger(e,t),i.trigger(e+t.direction,t);var h=v.isVertical(t.direction);(i.options.dragBlockVertical&&h||i.options.dragBlockHorizontal&&!h)&&t.preventDefault();break;case g:n&&t.changedLength<=i.options.dragMaxTouches&&(i.trigger(e+"end",t),n=!1);break;case m:n=!1}}var n=!1;r.gestures.Drag={name:e,index:50,handler:t,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),r.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}},function(e){function t(t,i){var r=i.options,o=w.current;switch(t.eventType){case d:clearTimeout(n),o.name=e,n=setTimeout(function(){o&&o.name==e&&i.trigger(e,t)},r.holdTimeout);break;case f:t.distance>r.holdThreshold&&clearTimeout(n);break;case g:clearTimeout(n)}}var n;r.gestures.Hold={name:e,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:t}}("hold"),r.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==g&&t.trigger(this.name,e)}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==g){var n=e.touches.length,i=t.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(e.velocityX>i.swipeVelocityX||e.velocityY>i.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},function(e){function t(t,i){var r,o,s=i.options,a=w.current,l=w.previous;switch(t.eventType){case d:n=!1;break;case f:n=n||t.distance>s.tapMaxDistance;break;case m:!v.inStr(t.srcEvent.type,"cancel")&&t.deltaTime<s.tapMaxTime&&!n&&(r=l&&l.lastEvent&&t.timeStamp-l.lastEvent.timeStamp,o=!1,l&&l.name==e&&r&&r<s.doubleTapInterval&&t.distance<s.doubleTapDistance&&(i.trigger("doubletap",t),o=!0),(!o||s.tapAlways)&&(a.name=e,i.trigger(a.name,t)))}}var n=!1;r.gestures.Tap={name:e,index:100,handler:t,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),r.gestures.Touch={name:"touch",index:-(1/0),defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){return t.options.preventMouse&&e.pointerType==c?void e.stopDetect():(t.options.preventDefault&&e.preventDefault(),void(e.eventType==b&&t.trigger("touch",e)))}},function(e){function t(t,i){switch(t.eventType){case d:n=!1;break;case f:if(t.touches.length<2)return;var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(r<i.options.transformMinScale&&o<i.options.transformMinRotation)return;w.current.name=e,n||(i.trigger(e+"start",t),n=!0),i.trigger(e,t),o>i.options.transformMinRotation&&i.trigger("rotate",t),r>i.options.transformMinScale&&(i.trigger("pinch",t),i.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case g:n&&t.changedLength<2&&(i.trigger(e+"end",t),n=!1)}}var n=!1;r.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:t}}("transform"),"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof t&&t.exports?t.exports=r:e.Hammer=r}(window)},{}],"/home/ubuntu/staging/apps/build/js/locale.js":[function(e,t){"use strict";t.exports=window.blockly.common_locale},{}],"/home/ubuntu/staging/apps/build/js/dom.js":[function(e,t,n){"use strict";n.addReadyListener=function(e){"complete"===document.readyState?setTimeout(e,1):window.addEventListener("load",e,!1)},n.getTouchEventName=function(e){var t,n=window.navigator.pointerEnabled,i=window.navigator.msPointerEnabled,o="ontouchend"in document.documentElement;return n?t="ie11":i?t="ie10":o&&(t="standard"),t&&r[e]?r[e][t]:void 0};var i=function(e,t,i){var r={},o=function(t,n,i){e.addEventListener(n,i,!1),r[t]={name:n,handler:i}},s=function(t){var n=r[t];n&&(e.removeEventListener(n.name,n.handler),delete r[t])};o("click",t,i);var a=n.getTouchEventName(t);return a&&o("touch",a,function(e){e.preventDefault(),s("click"),i.call(this,e)}),function(){s("click"),s("touch")}};n.addMouseDownTouchEvent=function(e,t){return i(e,"mousedown",t)},n.addMouseUpTouchEvent=function(e,t){return i(e,"mouseup",t)},n.addMouseMoveTouchEvent=function(e,t){return i(e,"mousemove",t)},n.addClickTouchEvent=function(e,t){return i(e,"click",t)};var r={click:{standard:"touchstart",ie10:"MSPointerDown",ie11:"pointerdown"},mousedown:{standard:"touchstart",ie10:"MSPointerDown",ie11:"pointerdown"},mouseup:{standard:"touchend",ie10:"MSPointerUp",ie11:"pointerup"},mousemove:{standard:"touchmove",ie10:"MSPointerMove",ie11:"pointermove"}};n.isMobile=function(){var e=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/;return e.test(window.navigator.userAgent)},n.isWindowsTouch=function(){var e=/MSIE.*Touch/;return e.test(window.navigator.userAgent)},n.isAndroid=function(){var e=/Android/;return e.test(window.navigator.userAgent)},n.isIOS=function(){var e=/iP(hone|od|ad)/;return e.test(window.navigator.userAgent)},n.isIPad=function(){var e=/iPad/i;return e.test(window.navigator.userAgent)}},{}],"/home/ubuntu/staging/apps/build/js/CommandHistory.js":[function(e,t){"use strict";var n=t.exports=function(){this.commands_=[],this.currentIndex_=0,this.maxEntries_=64};n.prototype.push=function(e){this.commands_.length>=this.maxEntries_&&(this.commands_.shift(),this.currentIndex_-=1),this.commands_.push(e),this.currentIndex_=this.commands_.length},n.prototype.goBack=function(e){return this.alterHistory_(this.currentIndex_,e),this.currentIndex_>0&&(this.currentIndex_-=1),"undefined"!=typeof this.commands_[this.currentIndex_]?this.commands_[this.currentIndex_]:e},n.prototype.goForward=function(e){return this.alterHistory_(this.currentIndex_,e),this.currentIndex_<this.commands_.length&&(this.currentIndex_+=1),this.currentIndex_===this.commands_.length&&e===this.commands_[this.currentIndex_-1]?"":"undefined"!=typeof this.commands_[this.currentIndex_]?this.commands_[this.currentIndex_]:e},n.prototype.alterHistory_=function(e,t){void 0!==this.commands_[e]&&(this.commands_[e]=t)}},{}]},{},[]);